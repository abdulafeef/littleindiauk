"use strict";(self.webpackChunklittle_india_UI_app=self.webpackChunklittle_india_UI_app||[]).push([[829],{1112:(b,g,s)=>{s.d(g,{a:()=>d});class d{constructor(l,S){this.from=l??"",this.to=S??""}}},874:(b,g,s)=>{s.d(g,{w:()=>d});class d{constructor(){this.required=!0,this.pageNumber=1,this.pageSize=20}}},3829:(b,g,s)=>{s.r(g),s.d(g,{DailySaleModule:()=>ee});var d=s(6895),i=s(2956),l=s(433),S=s(3900);class x{}class T{}var _=s(673),e=s(8256),m=s(7579),C=s(9057),u=s(6037);let h=(()=>{class o{constructor(t){this.http=t,this.manageEmitter=new m.x}getDailySaleList(t){return this.http.post(C.b.getDailySaleList,t)}getDailySaleManageDetail(t){let a=C.b.getDailySaleManageDetail;return a=a.replace(/{date}/gi,t),this.http.post(a,null)}static#e=this.\u0275fac=function(a){return new(a||o)(e.LFG(u.L))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var y=s(5659),w=s(3184);let L=(()=>{class o{constructor(t,a,n){this.element=t,this.renderer=a,this.colorService=n}ngOnInit(){this.renderer.setStyle(this.element.nativeElement,"color",this.colorService.getSaleTypeColor(this.saleType))}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(w.A))};static#t=this.\u0275dir=e.lG2({type:o,selectors:[["","appSaleTypeColor",""]],inputs:{saleType:["appSaleTypeColor","saleType"]}})}return o})();function A(o,p){if(1&o&&(e.TgZ(0,"div",28)(1,"label",29),e._uU(2),e.qZA(),e._UZ(3,"input",30),e.qZA()),2&o){const t=p.index,a=e.oxw(2);e.Q6J("formGroupName",t),e.xp6(2),e.Oqu(a.manageRequest.directDailySaleLines[t].saleGroup.name)}}function F(o,p){if(1&o&&(e.TgZ(0,"div",28)(1,"label",29),e._uU(2),e.qZA(),e._UZ(3,"input",30),e.qZA()),2&o){const t=p.index,a=e.oxw(2);e.Q6J("formGroupName",t),e.xp6(2),e.Oqu(a.manageRequest.tipDailySaleLines[t].saleGroup.name)}}function N(o,p){if(1&o&&(e.TgZ(0,"div",28)(1,"label",29),e._uU(2),e.qZA(),e._UZ(3,"input",30),e.qZA()),2&o){const t=p.index,a=e.oxw().index,n=e.oxw(2);e.Q6J("formGroupName",t),e.xp6(2),e.Oqu(n.manageRequest.platformDailySaleLines[a].platformDailySaleLines[t].saleGroup.name)}}function M(o,p){if(1&o&&(e.TgZ(0,"div",31)(1,"h5"),e._uU(2),e.qZA(),e.TgZ(3,"div",17)(4,"div",0),e.YNc(5,N,4,2,"div",22),e.qZA()()()),2&o){const t=p.$implicit,a=p.index,n=e.oxw(2);e.Q6J("formGroupName",a),e.xp6(2),e.Oqu(n.manageRequest.platformDailySaleLines[a].platform),e.xp6(3),e.Q6J("ngForOf",n.getLines(t))}}function J(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"form",13),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.manageDailySale())}),e.TgZ(1,"div",14)(2,"div",15)(3,"div",16)(4,"div",17)(5,"div",18)(6,"div",19)(7,"div",20)(8,"h2",21),e._uU(9,"Direct"),e.qZA()(),e.TgZ(10,"div",0),e.YNc(11,A,4,2,"div",22),e.qZA()()()()()(),e.TgZ(12,"div",15)(13,"div",23)(14,"div",17)(15,"div",18)(16,"div",19)(17,"div",20)(18,"h2",21),e._uU(19,"Tip"),e.qZA()(),e.TgZ(20,"div",0),e.YNc(21,F,4,2,"div",22),e.qZA()()()()()()(),e.TgZ(22,"div",24)(23,"h2",21),e._uU(24,"Platform"),e.qZA()(),e.TgZ(25,"div",25)(26,"div",17)(27,"div",14),e.YNc(28,M,6,3,"div",26),e.qZA()()(),e.TgZ(29,"div",0),e._UZ(30,"div",27),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.manageForm),e.xp6(8),e.Q6J("appSaleTypeColor","direct"),e.xp6(3),e.Q6J("ngForOf",t.directControls),e.xp6(7),e.Q6J("appSaleTypeColor","tip"),e.xp6(3),e.Q6J("ngForOf",t.tipControls),e.xp6(2),e.Q6J("appSaleTypeColor","platform"),e.xp6(5),e.Q6J("ngForOf",t.platformControls)}}let O=(()=>{class o{constructor(t,a,n,r){this.activatedRoute=t,this.router=a,this.dailySaleService=n,this.ds=r,this.requiredDataProcessed=!1,this.total=0}get directControls(){return this.manageForm.get("directLines").get("lines").controls}get tipControls(){return this.manageForm.get("tipLines").get("lines").controls}get platformControls(){return this.manageForm.get("platformLines").get("lines").controls}getLines(t){return t.get("lines").controls}ngOnInit(){this.paramSub=this.activatedRoute.params.pipe((0,S.w)(t=>(this.date=t.date,this.filterForm=new l.cw({date:new l.NI(this.date,l.kI.required)}),this.dailySaleService.getDailySaleManageDetail(this.date)))).subscribe(t=>{if(t.response?.status!=_.s.success)return;this.manageRequest=t.item;let a=new l.cw({lines:new l.Oe([])}),n=new l.cw({lines:new l.Oe([])}),r=new l.cw({lines:new l.Oe([])});this.manageRequest?.directDailySaleLines.forEach(c=>{let v=new l.NI(0==c.amount?null:c.amount.toFixed(2)),f=new l.cw({amount:v});a.get("lines").push(f)}),this.manageRequest?.tipDailySaleLines.forEach(c=>{let v=new l.NI(0==c.amount?null:c.amount.toFixed(2)),f=new l.cw({amount:v});n.get("lines").push(f)}),this.manageRequest?.platformDailySaleLines.forEach(c=>{let v=new l.cw({lines:new l.Oe([])});c.platformDailySaleLines.forEach(f=>{let te=new l.NI(0==f.amount?null:f.amount.toFixed(2)),ae=new l.cw({amount:te});v.get("lines").push(ae)}),r.get("lines").push(v)}),this.manageForm=new l.cw({directLines:a,tipLines:n,platformLines:r}),this.calculateTotal(),this.requiredDataProcessed=!0,this.manageForm.valueChanges.subscribe(()=>{this.calculateTotal()})})}ngOnChanges(t){}onPrev(){let t=this.ds.prevDay(new Date(this.date)),a=this.ds.formatToRequest(t);this.router.navigate(["daily-sale/manage",a])}onNext(){let t=this.ds.nextDay(new Date(this.date)),a=this.ds.formatToRequest(t);this.router.navigate(["daily-sale/manage",a])}onChange(){this.router.navigate(["daily-sale/manage",this.filterForm.value.date])}calculateTotal(){this.total=0,this.manageForm.get("directLines.lines").controls.forEach((t,a)=>{!isNaN(t.value.amount)&&null!=t.value.amount&&""!=t.value.amount&&(this.total=this.total+parseFloat(t.value.amount))}),this.manageForm.get("tipLines.lines").controls.forEach((t,a)=>{!isNaN(t.value.amount)&&null!=t.value.amount&&""!=t.value.amount&&(this.total=this.total+parseFloat(t.value.amount))}),this.manageForm.get("platformLines.lines").controls.forEach((t,a)=>{t.get("lines").controls.forEach((n,r)=>{!isNaN(n.value.amount)&&null!=n.value.amount&&""!=n.value.amount&&(this.total=this.total+parseFloat(n.value.amount))})})}manageDailySale(){if(!confirm("Are you sure to add sale ?"))return;let t=new x;t.dateOfSale=this.date,t.dailySaleLines=[],this.manageForm.get("directLines.lines").controls.forEach((a,n)=>{let r=new T;r.saleGroup=this.manageRequest.directDailySaleLines[n].saleGroup,r.amount=isNaN(a.value.amount)||null==a.value.amount||""==a.value.amount?0:parseFloat(a.value.amount),t.dailySaleLines.push(r)}),this.manageForm.get("tipLines.lines").controls.forEach((a,n)=>{let r=new T;r.saleGroup=this.manageRequest.tipDailySaleLines[n].saleGroup,r.amount=isNaN(a.value.amount)||null==a.value.amount||""==a.value.amount?0:parseFloat(a.value.amount),t.dailySaleLines.push(r)}),this.manageForm.get("platformLines.lines").controls.forEach((a,n)=>{let r=this.manageRequest?.platformDailySaleLines[n];a.get("lines").controls.forEach((c,v)=>{let f=new T;f.saleGroup=r.platformDailySaleLines[v].saleGroup,f.amount=isNaN(c.value.amount)||null==c.value.amount||""==c.value.amount?0:parseFloat(c.value.amount),t.dailySaleLines.push(f)})}),alert(JSON.stringify(t))}ngOnDestroy(){this.paramSub.unsubscribe(),this.dsManageSub?.unsubscribe(),this.eventSub?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(i.gz),e.Y36(i.F0),e.Y36(h),e.Y36(y.R))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-daily-sale-manage"]],features:[e.TTD],decls:19,vars:6,consts:[[1,"row"],[1,"col-2","p-4","offset-1"],[1,"col-4","offset-1"],[1,"row","mt-4",3,"formGroup"],[1,"col-3","mt-4","text-end"],["type","button",1,"btn","btn-primary","mt-2",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left"],[1,"col-6","form-outline"],[1,"form-label"],["type","date","formControlName","date",1,"form-control",3,"change"],[1,"col-3","mt-4","text-start"],["aria-hidden","true",1,"fa","fa-arrow-right"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row","px-4"],[1,"col-4"],["formGroupName","directLines"],["formArrayName","lines"],[1,"row","my-3"],[1,"col-12"],[1,"row","py-4"],[3,"appSaleTypeColor"],["class","col-4 form-group",3,"formGroupName",4,"ngFor","ngForOf"],["formGroupName","tipLines"],[1,"row","px-4","pt-3"],["formGroupName","platformLines"],["class","col-4 py-3",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-2","offset-5"],[1,"col-4","form-group",3,"formGroupName"],[1,"sale-group-label","form-label"],["type","text","formControlName","amount",1,"form-control"],[1,"col-4","py-3",3,"formGroupName"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3),e.ALo(4,"number"),e.qZA()(),e.TgZ(5,"div",2)(6,"form",3)(7,"div",0)(8,"div",4)(9,"button",5),e.NdJ("click",function(){return n.onPrev()}),e._UZ(10,"i",6),e.qZA()(),e.TgZ(11,"div",7)(12,"label",8),e._uU(13,"Date (MM/dd)"),e.qZA(),e.TgZ(14,"input",9),e.NdJ("change",function(){return n.onChange()}),e.qZA()(),e.TgZ(15,"div",10)(16,"button",5),e.NdJ("click",function(){return n.onNext()}),e._UZ(17,"i",11),e.qZA()()()()()(),e.YNc(18,J,31,7,"form",12)),2&a&&(e.xp6(3),e.Oqu(e.xi3(4,3,n.total,"1.2-2")),e.xp6(3),e.Q6J("formGroup",n.filterForm),e.xp6(12),e.Q6J("ngIf",n.requiredDataProcessed))},dependencies:[d.sg,d.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,l.x0,l.CE,L,d.JJ],styles:[".sale-group-label[_ngcontent-%COMP%]{color:#807c7c}"]})}return o})();class E{dictSaleType(){let p=new Map;return this.saleBySaleTypeList.forEach(t=>{p.set(t.saleType.toLowerCase(),t.totalSale)}),p}dictPaymentType(){let p=new Map;return this.saleByPaymentTypeList.forEach(t=>{p.set(t.paymentType.toLowerCase(),t.totalSale)}),p}}class q extends E{}var D=s(1112),U=s(874);class P{constructor(){this.between=new D.a,this.pagination=new U.w}}var Q=s(3359);let R=(()=>{class o{constructor(t){this.ds=t,this.filterEvent=new m.x,this.loadEvent=new m.x}ngOnInit(){this.initDateRange(),this.filterForm=new l.cw({from:new l.NI(this.req.from,[l.kI.required]),to:new l.NI(this.req.to,[l.kI.required])}),this.valueChangeSubscription=this.filterForm.valueChanges.subscribe(t=>{this.req.from=this.filterForm.value.from,this.req.to=this.filterForm.value.to,this.filterEvent.next(this.req)})}ngOnChanges(t){null!=this.filterForm&&this.filterForm.patchValue({from:this.req.from,to:this.req.to})}initDateRange(){let a=this.ds.Today;this.req.from=this.ds.formatToRequest(this.ds.Today),this.req.to=this.ds.formatToRequest(a)}getList(){this.loadEvent.next()}ngOnDestroy(){this.valueChangeSubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(y.R))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-filter-between-date"]],inputs:{req:"req"},outputs:{filterEvent:"filterEvent",loadEvent:"loadEvent"},features:[e.TTD],decls:14,vars:1,consts:[[1,"row","mt-2",3,"formGroup","ngSubmit"],[1,"col-3","offset-8"],[1,"row"],[1,"col-6","form-outline","mb-4"],[1,"form-label"],["type","date","formControlName","from",1,"form-control"],["type","date","formControlName","to",1,"form-control"],[1,"col-1","mt-4"],["type","submit",1,"btn","btn-primary","col-12","mt-2"]],template:function(a,n){1&a&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.getList()}),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"From"),e.qZA(),e._UZ(6,"input",5),e.qZA(),e.TgZ(7,"div",3)(8,"label",4),e._uU(9,"To"),e.qZA(),e._UZ(10,"input",6),e.qZA()()(),e.TgZ(11,"div",7)(12,"button",8),e._uU(13,"Load"),e.qZA()()()),2&a&&e.Q6J("formGroup",n.filterForm)},dependencies:[l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u]})}return o})();var Z=s(7020),Y=s(2873);function G(o,p){if(1&o&&(e.TgZ(0,"div",1)(1,"div",2)(2,"h2",3),e._uU(3),e.ALo(4,"number"),e.qZA()(),e.TgZ(5,"div",4),e._UZ(6,"div",5),e.qZA(),e.TgZ(7,"div",4),e._UZ(8,"div",5),e.qZA(),e.TgZ(9,"div",6),e._UZ(10,"div",5),e.qZA()()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(e.xi3(4,4,t.dsSummary.totalSale,"1.0-0")),e.xp6(3),e.Q6J("chart",t.paymentChart),e.xp6(2),e.Q6J("chart",t.saleTypeChart),e.xp6(2),e.Q6J("chart",t.platformChart)}}let I=(()=>{class o{constructor(t,a){this.colorService=t,this.graphService=a,this.paymentChart=new Z.kL,this.saleTypeChart=new Z.kL,this.platformChart=new Z.kL,this.cash=0,this.card=0,this.online=0,this.direct=0,this.tip=0,this.platform=0,this.loaded=!1}ngOnChanges(t){this.loaded=null!=this.dsSummary.from,this.loadPaymentChart(),this.loadSaleTypeChart(),this.loadPlatformChart()}loadPaymentChart(){let t=this.dsSummary.saleByPaymentTypeList.map(n=>({name:n.paymentType,y:n.totalSale,color:this.colorService.getPaymentColor(n.paymentType)})),a=this.dsSummary.saleByPaymentTypeList.map(n=>n.paymentType);this.paymentChart=this.graphService.getBarChart(t,a,"Payment","Sale",200)}loadSaleTypeChart(){let t=this.dsSummary.saleBySaleTypeList.map(n=>({name:n.saleType,y:n.totalSale,color:this.colorService.getSaleTypeColor(n.saleType)})),a=this.dsSummary.saleBySaleTypeList.map(n=>n.saleType);this.saleTypeChart=this.graphService.getBarChart(t,a,"Sale","Sale",200)}loadPlatformChart(){let t=this.dsSummary.saleByPlatformList.map(c=>c.salePlatform.name),a=this.dsSummary.saleByPlatformList.map(c=>({y:c.totalSale,color:"#6167C7"})),n=0;a.forEach(c=>{n+=c.y}),this.platformChart=this.graphService.getBarChart(a,t,"Platform","Sale",200)}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(w.A),e.Y36(Y.M))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-daily-sale-summary"]],inputs:{dsSummary:"dsSummary"},features:[e.TTD],decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-1","mt-5"],[1,"text-center"],[1,"col-3"],[1,"column",3,"chart"],[1,"col-5"]],template:function(a,n){1&a&&e.YNc(0,G,11,7,"div",0),2&a&&e.Q6J("ngIf",n.loaded)},dependencies:[d.O5,Z.Dm,d.JJ],styles:[".testimonial-group[_ngcontent-%COMP%] > .row[_ngcontent-%COMP%]{overflow-x:auto;white-space:nowrap}.testimonial-group[_ngcontent-%COMP%] > .row[_ngcontent-%COMP%] > .col-sm-4[_ngcontent-%COMP%]{display:inline-block;float:none}.summary-value[_ngcontent-%COMP%]{font-size:18px}.summary-head[_ngcontent-%COMP%]{font-size:12px;color:gray}"]})}return o})(),B=(()=>{class o{constructor(t,a,n){this.element=t,this.renderer=a,this.colorService=n}ngOnInit(){this.renderer.setStyle(this.element.nativeElement,"color",this.colorService.getPaymentColor(this.paymentType))}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(w.A))};static#t=this.\u0275dir=e.lG2({type:o,selectors:[["","appPaymentTypeColor",""]],inputs:{paymentType:["appPaymentTypeColor","paymentType"]}})}return o})();var k=s(7114);let j=(()=>{class o{constructor(t){this.pipe=t}transform(t,a){let n=new Date(t);return this.pipe.transform(n,a)}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(d.uU,16))};static#t=this.\u0275pipe=e.Yjl({name:"formatDate",type:o,pure:!0})}return o})();function z(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"div",14)(1,"div",5)(2,"div",6)(3,"label"),e._uU(4),e.ALo(5,"formatDate"),e.qZA()(),e.TgZ(6,"div",7)(7,"div",5)(8,"div",7)(9,"label",15),e._uU(10),e.ALo(11,"number"),e.qZA()(),e.TgZ(12,"div",7)(13,"label",16),e._uU(14),e.ALo(15,"number"),e.qZA()(),e.TgZ(16,"div",7)(17,"label",17),e._uU(18),e.ALo(19,"number"),e.qZA()()()(),e.TgZ(20,"div",7)(21,"div",5)(22,"div",7)(23,"label",18),e._uU(24),e.ALo(25,"number"),e.qZA()(),e.TgZ(26,"div",7)(27,"label",18),e._uU(28),e.ALo(29,"number"),e.qZA()(),e.TgZ(30,"div",7)(31,"label",18),e._uU(32),e.ALo(33,"number"),e.qZA()()()(),e.TgZ(34,"div",6)(35,"div",5)(36,"label",9),e._uU(37),e.ALo(38,"number"),e.qZA(),e.TgZ(39,"div",9)(40,"button",19),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.gotoManage(r.date))}),e._UZ(41,"i",20),e.qZA()()()()()()}if(2&o){const t=p.$implicit;e.xp6(4),e.Oqu(e.xi3(5,11,t.date,"EEE, dd-MMM-yyyy")),e.xp6(6),e.Oqu(e.xi3(11,14,t.item.saleByPaymentTypeList[0].totalSale,"1.2-2")),e.xp6(4),e.Oqu(e.xi3(15,17,t.item.saleByPaymentTypeList[1].totalSale,"1.2-2")),e.xp6(4),e.Oqu(e.xi3(19,20,t.item.saleByPaymentTypeList[2].totalSale,"1.2-2")),e.xp6(5),e.Q6J("appSaleTypeColor","direct"),e.xp6(1),e.Oqu(e.xi3(25,23,t.item.saleBySaleTypeList[0].totalSale,"1.2-2")),e.xp6(3),e.Q6J("appSaleTypeColor","tip"),e.xp6(1),e.Oqu(e.xi3(29,26,t.item.saleBySaleTypeList[2].totalSale,"1.2-2")),e.xp6(3),e.Q6J("appSaleTypeColor","platform"),e.xp6(1),e.Oqu(e.xi3(33,29,t.item.saleBySaleTypeList[1].totalSale,"1.2-2")),e.xp6(5),e.Oqu(e.xi3(38,32,t.item.totalSale,"1.2-2"))}}let X=(()=>{class o{constructor(t,a,n){this.router=t,this.ds=a,this.eService=n,this.moreEvent=new m.x}loadMore(){this.moreEvent.next(!0)}gotoManage(t){if(null!=t){let a=this.ds.formatToRequest(this.ds.responseFormatToDate(t));this.router.navigate(["daily-sale/manage",a]).then(()=>{this.eService.manageEmitter.next(a)})}else{let a=this.ds.formatToRequest(new Date);this.router.navigate(["daily-sale/manage",a])}}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(i.F0),e.Y36(y.R),e.Y36(h))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-daily-sale-list"]],inputs:{dsList:"dsList",count:"count"},outputs:{moreEvent:"moreEvent"},decls:42,vars:3,consts:[[1,"row","py-2"],[1,"col-1","offset-11"],["type","submit",1,"col-12","btn","btn-primary",3,"click"],[1,"row","t-head"],[1,"col-12"],[1,"row"],[1,"col-2"],[1,"col-4"],[1,"col-12","text-end"],[1,"col-6","text-end"],[1,"row","scroll","t-body"],["class","col-12 t-item",4,"ngFor","ngForOf"],[1,"col-6"],[3,"loaded","count","loadMore"],[1,"col-12","t-item"],["appPaymentTypeColor","cash",1,"col-12","text-end"],["appPaymentTypeColor","card",1,"col-12","text-end"],["appPaymentTypeColor","online",1,"col-12","text-end"],[1,"col-12","text-end",3,"appSaleTypeColor"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-edit"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return n.gotoManage()}),e._uU(3,"Add"),e.qZA()()(),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"label"),e._uU(9,"Date"),e.qZA()(),e.TgZ(10,"div",7)(11,"div",5)(12,"div",7)(13,"label",8),e._uU(14,"Cash"),e.qZA()(),e.TgZ(15,"div",7)(16,"label",8),e._uU(17,"Card"),e.qZA()(),e.TgZ(18,"div",7)(19,"label",8),e._uU(20,"Online"),e.qZA()()()(),e.TgZ(21,"div",7)(22,"div",5)(23,"div",7)(24,"label",8),e._uU(25,"Direct"),e.qZA()(),e.TgZ(26,"div",7)(27,"label",8),e._uU(28,"Tip"),e.qZA()(),e.TgZ(29,"div",7)(30,"label",8),e._uU(31,"Platform"),e.qZA()()()(),e.TgZ(32,"div",6)(33,"div",5)(34,"label",9),e._uU(35,"Total"),e.qZA(),e._UZ(36,"label",9),e.qZA()()()()(),e.TgZ(37,"div",10),e.YNc(38,z,42,35,"div",11),e.qZA(),e.TgZ(39,"div",5)(40,"div",12)(41,"app-pagination",13),e.NdJ("loadMore",function(){return n.loadMore()}),e.qZA()()()),2&a&&(e.xp6(38),e.Q6J("ngForOf",n.dsList),e.xp6(3),e.Q6J("loaded",n.dsList.length)("count",n.count))},dependencies:[d.sg,B,L,k.Q,d.JJ,j],styles:["div.scroll[_ngcontent-%COMP%]{height:23rem;overflow-x:hidden;overflow-y:auto}"]})}return o})();const H=[{path:"",component:(()=>{class o{constructor(t,a,n){this.weekService=t,this.ds=a,this.dailySaleService=n,this.req=new P,this.dsList=[],this.dsSummary=new q,this.count=0}ngOnInit(){let t=this.ds.formatToRequest(new Date);this.weekSubscription=this.weekService.getWeek(t).subscribe(a=>{a.response?.status==_.s.success&&(this.req.between=new D.a,this.req.between.from=this.ds.responseFormatToRequest(a.item?.from),this.req.between.to=this.ds.responseFormatToRequest(a.item?.to))})}ngAfterViewInit(){this.getList()}getList(){this.dailySaleSubscription=this.dailySaleService.getDailySaleList(this.req).subscribe(t=>{t?.response?.status==_.s.success&&(this.dsSummary=t.dailySaleBetweenSummary,this.dsList.push.apply(this.dsList,t?.list),this.count=t?.totalRecords,this.req.pagination.pageNumber+=1)})}onFilter(){this.dsSummary=new q,this.dsList=[],this.req.pagination.pageNumber=1}ngOnDestroy(){this.weekSubscription?.unsubscribe(),this.dailySaleSubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(Q.F),e.Y36(y.R),e.Y36(h))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-daily-sale"]],decls:3,vars:4,consts:[[3,"req","filterEvent","loadEvent"],[3,"dsSummary"],[3,"dsList","count","moreEvent"]],template:function(a,n){1&a&&(e.TgZ(0,"app-filter-between-date",0),e.NdJ("filterEvent",function(){return n.onFilter()})("loadEvent",function(){return n.getList()}),e.qZA(),e._UZ(1,"app-daily-sale-summary",1),e.TgZ(2,"app-daily-sale-list",2),e.NdJ("moreEvent",function(){return n.getList()}),e.qZA()),2&a&&(e.Q6J("req",n.req.between),e.xp6(1),e.Q6J("dsSummary",n.dsSummary),e.xp6(1),e.Q6J("dsList",n.dsList)("count",n.count))},dependencies:[R,I,X]})}return o})()},{path:"manage/:date",component:O}];let K=(()=>{class o{static#e=this.\u0275fac=function(a){return new(a||o)};static#t=this.\u0275mod=e.oAB({type:o});static#a=this.\u0275inj=e.cJS({imports:[i.Bz.forChild(H)]})}return o})();var $=s(1097),V=s(7367),W=s(2346);let ee=(()=>{class o{static#e=this.\u0275fac=function(a){return new(a||o)};static#t=this.\u0275mod=e.oAB({type:o});static#a=this.\u0275inj=e.cJS({imports:[d.ez,K,l.u5,l.UX,W.g,$.z,V.o,Z.SD]})}return o})()},7114:(b,g,s)=>{s.d(g,{Q:()=>e});var d=s(7579),i=s(8256),l=s(6895);let S=(()=>{class m{constructor(u,h){this.element=u,this.renderer=h}ngOnChanges(u){this.loaded==this.total?(this.renderer.addClass(this.element.nativeElement,"text-success"),this.renderer.removeClass(this.element.nativeElement,"text-info")):(this.renderer.removeClass(this.element.nativeElement,"text-success"),this.renderer.addClass(this.element.nativeElement,"text-info"))}static#e=this.\u0275fac=function(h){return new(h||m)(i.Y36(i.SBq),i.Y36(i.Qsj))};static#t=this.\u0275dir=i.lG2({type:m,selectors:[["","appLoadedStatus",""]],inputs:{loaded:"loaded",total:"total"},features:[i.TTD]})}return m})();function x(m,C){if(1&m&&(i.TgZ(0,"label",5)(1,"span",6),i._uU(2),i.qZA(),i.TgZ(3,"span",7),i._uU(4," of "),i.qZA(),i.TgZ(5,"span",6),i._uU(6),i.qZA()()),2&m){const u=i.oxw(2);i.Q6J("loaded",u.loaded)("total",u.count),i.xp6(1),i.Q6J("ngClass",u.loaded!=u.count?"page-data":"page-data-full"),i.xp6(1),i.Oqu(u.loaded),i.xp6(3),i.Q6J("ngClass",u.loaded!=u.count?"page-data":"page-data-full"),i.xp6(1),i.Oqu(u.count)}}function T(m,C){if(1&m){const u=i.EpF();i.TgZ(0,"button",8),i.NdJ("click",function(){i.CHM(u);const y=i.oxw(2);return i.KtG(y.more())}),i._uU(1,"More ..."),i.qZA()}}function _(m,C){if(1&m&&(i.TgZ(0,"div",1),i.YNc(1,x,7,6,"label",2),i.TgZ(2,"div",3),i.YNc(3,T,2,0,"button",4),i.qZA()()),2&m){const u=i.oxw();i.xp6(1),i.Q6J("ngIf",u.loaded!=u.count),i.xp6(2),i.Q6J("ngIf",u.loaded!=u.count)}}let e=(()=>{class m{constructor(){this.loadMore=new d.x}more(){this.loadMore.next(!0)}static#e=this.\u0275fac=function(h){return new(h||m)};static#t=this.\u0275cmp=i.Xpm({type:m,selectors:[["app-pagination"]],inputs:{count:"count",loaded:"loaded"},outputs:{loadMore:"loadMore"},decls:1,vars:1,consts:[["class","row my-4",4,"ngIf"],[1,"row","my-4"],["appLoadedStatus","","class","col-4",3,"loaded","total",4,"ngIf"],[1,"col-6"],["type","button","class","btn btn-primary btn-sm col-4",3,"click",4,"ngIf"],["appLoadedStatus","",1,"col-4",3,"loaded","total"],[3,"ngClass"],[1,"page-data"],["type","button",1,"btn","btn-primary","btn-sm","col-4",3,"click"]],template:function(h,y){1&h&&i.YNc(0,_,4,2,"div",0),2&h&&i.Q6J("ngIf",y.loaded>0)},dependencies:[l.mk,l.O5,S],styles:[".page-data[_ngcontent-%COMP%]{background-color:transparent;color:var(--text-color);border-radius:10px;opacity:.3}.page-data-full[_ngcontent-%COMP%]{background-color:#009cbf;color:#fff;padding:10px;border-radius:10px}"]})}return m})()}}]);