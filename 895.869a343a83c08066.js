"use strict";(self.webpackChunklittle_india_UI_app=self.webpackChunklittle_india_UI_app||[]).push([[895],{1112:(Z,y,s)=>{s.d(y,{a:()=>p});class p{constructor(l,T){this.from=l??"",this.to=T??""}}},874:(Z,y,s)=>{s.d(y,{w:()=>p});class p{constructor(){this.required=!0,this.pageNumber=1,this.pageSize=20}}},8895:(Z,y,s)=>{s.r(y),s.d(y,{DailySaleModule:()=>Xt});var p=s(6895),r=s(1635),l=s(4006),T=s(3900);class A{}class D{}var M=s(673),t=s(4650),x=s(7579),u=s(9057),L=s(6037);let c=(()=>{class e{constructor(a){this.http=a,this.manageEmitter=new x.x}getDailySaleList(a){return this.http.post(u.b.getDailySaleList,a)}getDailySaleManageDetail(a){let n=u.b.getDailySaleManageDetail;return n=n.replace(/{date}/gi,a),this.http.post(n,null)}addDailySale(a){return this.http.post(u.b.addDailySale,a)}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(L.L))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var f=s(5659),S=s(3184);let Q=(()=>{class e{constructor(a,n,o){this.element=a,this.renderer=n,this.colorService=o}ngOnInit(){this.renderer.setStyle(this.element.nativeElement,"color",this.colorService.getSaleTypeColor(this.saleType))}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(S.A))};static#e=this.\u0275dir=t.lG2({type:e,selectors:[["","appSaleTypeColor",""]],inputs:{saleType:["appSaleTypeColor","saleType"]}})}return e})();var v=s(9549),F=s(4144),b=s(4859),q=s(7392),C=s(9602);function Y(e,i){if(1&e&&(t.TgZ(0,"div",30)(1,"mat-form-field",31)(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"input",32),t.qZA()()),2&e){const a=i.index,n=t.oxw(2);t.Q6J("formGroupName",a),t.xp6(3),t.Oqu(n.manageRequest.directDailySaleLines[a].saleGroup.name)}}function E(e,i){if(1&e&&(t.TgZ(0,"div",30)(1,"mat-form-field",31)(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"input",32),t.qZA()()),2&e){const a=i.index,n=t.oxw(2);t.Q6J("formGroupName",a),t.xp6(3),t.Oqu(n.manageRequest.tipDailySaleLines[a].saleGroup.name)}}function G(e,i){if(1&e&&(t.TgZ(0,"div",36)(1,"mat-form-field",31)(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"input",32),t.qZA()()),2&e){const a=i.index,n=t.oxw().index,o=t.oxw(2);t.Q6J("formGroupName",a),t.xp6(3),t.Oqu(o.manageRequest.platformDailySaleLines[n].platformDailySaleLines[a].saleGroup.name)}}function O(e,i){if(1&e&&(t.TgZ(0,"div",33)(1,"h6",34),t._uU(2),t.qZA(),t.TgZ(3,"div",18)(4,"div",0),t.YNc(5,G,5,2,"div",35),t.qZA()()()),2&e){const a=i.$implicit,n=i.index,o=t.oxw(2);t.Q6J("formGroupName",n),t.xp6(2),t.Oqu(o.manageRequest.platformDailySaleLines[n].platform),t.xp6(3),t.Q6J("ngForOf",o.getLines(a))}}function R(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"form",14),t.NdJ("ngSubmit",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.manageDailySale())}),t.TgZ(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"div",19)(6,"div",20)(7,"div",21)(8,"h2",22),t._uU(9,"Direct"),t.qZA()(),t.TgZ(10,"div",0),t.YNc(11,Y,5,2,"div",23),t.qZA()()()()()(),t.TgZ(12,"div",16)(13,"div",24)(14,"div",18)(15,"div",19)(16,"div",20)(17,"div",21)(18,"h2",22),t._uU(19,"Tip"),t.qZA()(),t.TgZ(20,"div",0),t.YNc(21,E,5,2,"div",23),t.qZA()()()()()()(),t.TgZ(22,"div",25)(23,"h2",22),t._uU(24,"Platform"),t.qZA()(),t.TgZ(25,"div",26)(26,"div",18)(27,"div",15),t.YNc(28,O,6,3,"div",27),t.qZA()()(),t.TgZ(29,"div",0)(30,"div",28)(31,"button",29),t._uU(32,"Save"),t.qZA()()()()}if(2&e){const a=t.oxw();t.Q6J("formGroup",a.manageForm),t.xp6(8),t.Q6J("appSaleTypeColor","direct"),t.xp6(3),t.Q6J("ngForOf",a.directControls),t.xp6(7),t.Q6J("appSaleTypeColor","tip"),t.xp6(3),t.Q6J("ngForOf",a.tipControls),t.xp6(2),t.Q6J("appSaleTypeColor","platform"),t.xp6(5),t.Q6J("ngForOf",a.platformControls)}}let P=(()=>{class e{constructor(a,n,o,d){this.activatedRoute=a,this.router=n,this.dailySaleService=o,this.ds=d,this.requiredDataProcessed=!1,this.total=0}get directControls(){return this.manageForm.get("directLines").get("lines").controls}get tipControls(){return this.manageForm.get("tipLines").get("lines").controls}get platformControls(){return this.manageForm.get("platformLines").get("lines").controls}getLines(a){return a.get("lines").controls}ngOnInit(){this.paramSub=this.activatedRoute.params.pipe((0,T.w)(a=>(this.date=a.date,this.filterForm=new l.cw({date:new l.NI(this.date,l.kI.required)}),this.dailySaleService.getDailySaleManageDetail(this.date)))).subscribe(a=>{if(a.response?.status!=M.s.success)return;this.manageRequest=a.item;let n=new l.cw({lines:new l.Oe([])}),o=new l.cw({lines:new l.Oe([])}),d=new l.cw({lines:new l.Oe([])});this.manageRequest?.directDailySaleLines.forEach(m=>{let _=new l.NI(0==m.amount?null:m.amount.toFixed(2)),h=new l.cw({amount:_});n.get("lines").push(h)}),this.manageRequest?.tipDailySaleLines.forEach(m=>{let _=new l.NI(0==m.amount?null:m.amount.toFixed(2)),h=new l.cw({amount:_});o.get("lines").push(h)}),this.manageRequest?.platformDailySaleLines.forEach(m=>{let _=new l.cw({lines:new l.Oe([])});m.platformDailySaleLines.forEach(h=>{let $t=new l.NI(0==h.amount?null:h.amount.toFixed(2)),Wt=new l.cw({amount:$t});_.get("lines").push(Wt)}),d.get("lines").push(_)}),this.manageForm=new l.cw({directLines:n,tipLines:o,platformLines:d}),this.calculateTotal(),this.requiredDataProcessed=!0,this.manageForm.valueChanges.subscribe(()=>{this.calculateTotal()})})}ngOnChanges(a){}onPrev(){let a=this.ds.prevDay(new Date(this.date)),n=this.ds.formatToRequest(a);this.router.navigate(["daily-sale/manage",n])}onNext(){let a=this.ds.nextDay(new Date(this.date)),n=this.ds.formatToRequest(a);this.router.navigate(["daily-sale/manage",n])}onChange(a){this.router.navigate(["daily-sale/manage",this.ds.formatToRequest(this.filterForm.value.date)])}calculateTotal(){this.total=0,this.manageForm.get("directLines.lines").controls.forEach((a,n)=>{!isNaN(a.value.amount)&&null!=a.value.amount&&""!=a.value.amount&&(this.total=this.total+parseFloat(a.value.amount))}),this.manageForm.get("tipLines.lines").controls.forEach((a,n)=>{!isNaN(a.value.amount)&&null!=a.value.amount&&""!=a.value.amount&&(this.total=this.total+parseFloat(a.value.amount))}),this.manageForm.get("platformLines.lines").controls.forEach((a,n)=>{a.get("lines").controls.forEach((o,d)=>{!isNaN(o.value.amount)&&null!=o.value.amount&&""!=o.value.amount&&(this.total=this.total+parseFloat(o.value.amount))})})}manageDailySale(){if(!confirm("Are you sure to add sale ?"))return;let a=new A;a.dateOfSale=this.date,a.dailySaleLines=[],this.manageForm.get("directLines.lines").controls.forEach((n,o)=>{let d=new D;d.saleGroup=this.manageRequest.directDailySaleLines[o].saleGroup,d.amount=isNaN(n.value.amount)||null==n.value.amount||""==n.value.amount?0:parseFloat(n.value.amount),a.dailySaleLines.push(d)}),this.manageForm.get("tipLines.lines").controls.forEach((n,o)=>{let d=new D;d.saleGroup=this.manageRequest.tipDailySaleLines[o].saleGroup,d.amount=isNaN(n.value.amount)||null==n.value.amount||""==n.value.amount?0:parseFloat(n.value.amount),a.dailySaleLines.push(d)}),this.manageForm.get("platformLines.lines").controls.forEach((n,o)=>{let d=this.manageRequest?.platformDailySaleLines[o];n.get("lines").controls.forEach((m,_)=>{let h=new D;h.saleGroup=d.platformDailySaleLines[_].saleGroup,h.amount=isNaN(m.value.amount)||null==m.value.amount||""==m.value.amount?0:parseFloat(m.value.amount),a.dailySaleLines.push(h)})}),this.dsManageSub=this.dailySaleService.addDailySale(a).subscribe(n=>{this.router.navigate(["daily-sale"])})}ngOnDestroy(){this.paramSub.unsubscribe(),this.dsManageSub?.unsubscribe(),this.eventSub?.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(r.gz),t.Y36(r.F0),t.Y36(c),t.Y36(f.R))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-daily-sale-manage"]],features:[t.TTD],decls:27,vars:8,consts:[[1,"row"],[1,"col-md-2","col-12","p-md-4","p-1","offset-md-1"],[1,"mat-headline-4","text-center"],[1,"col-md-4","col-12","offset-md-1"],[1,"row","mt-md-4",3,"formGroup"],[1,"col-3","mt-md-4","text-end"],["mat-fab","","color","primary",3,"click"],[1,"col-6","mt-md-4"],["appearance","outline",1,"col-12","form-field"],["matInput","","formControlName","date",3,"matDatepicker","dateChange"],["matIconSuffix","",3,"for"],["picker",""],[1,"col-3","mt-md-4","text-start"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row","px-4"],[1,"col-md-4","col-12"],["formGroupName","directLines"],["formArrayName","lines"],[1,"row","my-md-3"],[1,"col-12"],[1,"row","py-md-4"],[1,"mat-headline-6",3,"appSaleTypeColor"],["class","col-md-4 col-6 form-group",3,"formGroupName",4,"ngFor","ngForOf"],["formGroupName","tipLines"],[1,"row","px-4","pt-md-3"],["formGroupName","platformLines"],["class","col-md-4 col-12 py-3",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-2","offset-5"],["mat-raised-button","","color","primary",1,"col-6","offset-3"],[1,"col-md-4","col-6","form-group",3,"formGroupName"],["appearance","outline","floatLabel","always",1,"form-field","w-100"],["type","text","placeholder","","matInput","","formControlName","amount"],[1,"col-md-4","col-12","py-3",3,"formGroupName"],[1,"my-md-2","mat-body"],["class","col-4 form-group",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-4","form-group",3,"formGroupName"]],template:function(n,o){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3),t.ALo(4,"number"),t.qZA()(),t.TgZ(5,"div",3)(6,"form",4)(7,"div",0)(8,"div",5)(9,"button",6),t.NdJ("click",function(){return o.onPrev()}),t.TgZ(10,"mat-icon"),t._uU(11,"chevron_left"),t.qZA()()(),t.TgZ(12,"div",7)(13,"mat-form-field",8)(14,"mat-label"),t._uU(15,"Date"),t.qZA(),t.TgZ(16,"input",9),t.NdJ("dateChange",function(m){return o.onChange(m)}),t.qZA(),t.TgZ(17,"mat-hint"),t._uU(18,"MM/DD/YYYY"),t.qZA(),t._UZ(19,"mat-datepicker-toggle",10)(20,"mat-datepicker",null,11),t.qZA()(),t.TgZ(22,"div",12)(23,"button",6),t.NdJ("click",function(){return o.onNext()}),t.TgZ(24,"mat-icon"),t._uU(25,"chevron_right"),t.qZA()()()()()()(),t.YNc(26,R,33,7,"form",13)),2&n){const d=t.MAs(21);t.xp6(3),t.Oqu(t.xi3(4,5,o.total,"1.2-2")),t.xp6(3),t.Q6J("formGroup",o.filterForm),t.xp6(10),t.Q6J("matDatepicker",d),t.xp6(3),t.Q6J("for",d),t.xp6(7),t.Q6J("ngIf",o.requiredDataProcessed)}},dependencies:[p.sg,p.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,l.x0,l.CE,Q,v.KE,v.hX,v.bx,v.R9,F.Nt,b.lW,b.cs,q.Hw,C.Mq,C.hl,C.nW,p.JJ],styles:[".sale-group-label[_ngcontent-%COMP%]{color:#807c7c}input[_ngcontent-%COMP%]{font-size:large!important}"]})}return e})();var g=s(7155);class B{dictSaleType(){let i=new Map;return this.saleBySaleTypeList.forEach(a=>{i.set(a.saleType.toLowerCase(),a.totalSale)}),i}dictPaymentType(){let i=new Map;return this.saleByPaymentTypeList.forEach(a=>{i.set(a.paymentType.toLowerCase(),a.totalSale)}),i}}class I extends B{}var J=s(1112),k=s(874);class j{constructor(){this.between=new J.a,this.pagination=new k.w}}var z=s(3359);let H=(()=>{class e{constructor(a){this.ds=a,this.filterEvent=new x.x,this.loadEvent=new x.x}ngOnInit(){this.initDateRange(),this.filterForm=new l.cw({from:new l.NI(this.req.from,[l.kI.required]),to:new l.NI(this.req.to,[l.kI.required])}),this.valueChangeSubscription=this.filterForm.valueChanges.subscribe(a=>{this.req.from=this.ds.formatToRequest(this.filterForm.value.from),this.req.to=this.ds.formatToRequest(this.filterForm.value.to),this.filterEvent.next(this.req)})}ngOnChanges(a){null!=this.filterForm&&this.filterForm.patchValue({from:this.req.from,to:this.req.to})}initDateRange(){let n=this.ds.Today;this.req.from=this.ds.formatToRequest(this.ds.Today),this.req.to=this.ds.formatToRequest(n)}getList(){this.loadEvent.next()}ngOnDestroy(){this.valueChangeSubscription?.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(f.R))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-filter-between-date"]],inputs:{req:"req"},outputs:{filterEvent:"filterEvent",loadEvent:"loadEvent"},features:[t.TTD],decls:22,vars:5,consts:[[1,"row","mt-4",3,"formGroup","ngSubmit"],[1,"col-md-3","col-8","offset-md-8","offset-1"],[1,"row"],[1,"col-md-6","col-6","px-2"],["appearance","outline",1,"col-12","form-field"],["matInput","","formControlName","from",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],["matInput","","formControlName","to",3,"matDatepicker"],["picker1",""],[1,"col-md-1","col-3"],["type","submit","mat-raised-button","","color","primary",1,"col-12","mt-2"]],template:function(n,o){if(1&n&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.getList()}),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),t._uU(6,"From"),t.qZA(),t._UZ(7,"input",5)(8,"mat-datepicker-toggle",6)(9,"mat-datepicker",null,7),t.qZA()(),t.TgZ(11,"div",3)(12,"mat-form-field",4)(13,"mat-label"),t._uU(14,"To"),t.qZA(),t._UZ(15,"input",8)(16,"mat-datepicker-toggle",6)(17,"mat-datepicker",null,9),t.qZA()()()(),t.TgZ(19,"div",10)(20,"button",11),t._uU(21,"Load"),t.qZA()()()),2&n){const d=t.MAs(10),m=t.MAs(18);t.Q6J("formGroup",o.filterForm),t.xp6(7),t.Q6J("matDatepicker",d),t.xp6(1),t.Q6J("for",d),t.xp6(7),t.Q6J("matDatepicker",m),t.xp6(1),t.Q6J("for",m)}},dependencies:[l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,v.KE,v.hX,v.R9,b.lW,F.Nt,C.Mq,C.hl,C.nW]})}return e})();var w=s(7020),X=s(2873);function $(e,i){if(1&e&&(t.TgZ(0,"div",1)(1,"div",2)(2,"h2",3),t._uU(3),t.ALo(4,"number"),t.qZA()(),t.TgZ(5,"div",4),t._UZ(6,"div",5),t.qZA(),t.TgZ(7,"div",4),t._UZ(8,"div",5),t.qZA(),t.TgZ(9,"div",6),t._UZ(10,"div",5),t.qZA()()),2&e){const a=t.oxw();t.xp6(3),t.Oqu(t.xi3(4,4,a.dsSummary.totalSale,"1.0-0")),t.xp6(3),t.Q6J("chart",a.paymentChart),t.xp6(2),t.Q6J("chart",a.saleTypeChart),t.xp6(2),t.Q6J("chart",a.platformChart)}}let W=(()=>{class e{constructor(a,n){this.colorService=a,this.graphService=n,this.paymentChart=new w.kL,this.saleTypeChart=new w.kL,this.platformChart=new w.kL,this.cash=0,this.card=0,this.online=0,this.direct=0,this.tip=0,this.platform=0,this.loaded=!1}ngOnChanges(a){this.loaded=null!=this.dsSummary.from,this.loadPaymentChart(),this.loadSaleTypeChart(),this.loadPlatformChart()}loadPaymentChart(){let a=this.dsSummary.saleByPaymentTypeList.map(o=>({name:o.paymentType,y:o.totalSale,color:this.colorService.getPaymentColor(o.paymentType)})),n=this.dsSummary.saleByPaymentTypeList.map(o=>o.paymentType);this.paymentChart=this.graphService.getBarChart(a,n,"Payment","Sale",150)}loadSaleTypeChart(){let a=this.dsSummary.saleBySaleTypeList.map(o=>({name:o.saleType,y:o.totalSale,color:this.colorService.getSaleTypeColor(o.saleType)})),n=this.dsSummary.saleBySaleTypeList.map(o=>o.saleType);this.saleTypeChart=this.graphService.getBarChart(a,n,"Sale","Sale",150)}loadPlatformChart(){let a=this.dsSummary.saleByPlatformList.map(m=>m.salePlatform.name),n=this.dsSummary.saleByPlatformList.map(m=>({y:m.totalSale,color:"#6167C7"})),o=0;n.forEach(m=>{o+=m.y}),this.platformChart=this.graphService.getBarChart(n,a,"Platform","Sale",150)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(S.A),t.Y36(X.M))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-daily-sale-summary"]],inputs:{dsSummary:"dsSummary"},features:[t.TTD],decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-md-1","col-12","mt-5"],[1,"mat-headline-4","text-center"],[1,"col-md-3","col-6"],[1,"column",3,"chart"],[1,"col-md-5","col-12"]],template:function(n,o){1&n&&t.YNc(0,$,11,7,"div",0),2&n&&t.Q6J("ngIf",o.loaded)},dependencies:[p.O5,w.Dm,p.JJ],styles:[".testimonial-group[_ngcontent-%COMP%] > .row[_ngcontent-%COMP%]{overflow-x:auto;white-space:nowrap}.testimonial-group[_ngcontent-%COMP%] > .row[_ngcontent-%COMP%] > .col-sm-4[_ngcontent-%COMP%]{display:inline-block;float:none}.summary-value[_ngcontent-%COMP%]{font-size:18px}.summary-head[_ngcontent-%COMP%]{font-size:12px;color:gray}"]})}return e})();var K=s(7114),U=s(7974);let V=(()=>{class e{constructor(a){this.pipe=a}transform(a,n){let o=new Date(a);return this.pipe.transform(o,n)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(p.uU,16))};static#e=this.\u0275pipe=t.Yjl({name:"formatDate",type:e,pure:!0})}return e})();const tt=["page"];function et(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1," Date "),t.qZA())}function at(e,i){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.ALo(2,"formatDate"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.date,"EEE, dd-MMM-yyyy")," ")}}function nt(e,i){1&e&&(t.TgZ(0,"th",27),t._uU(1,"Cash "),t.qZA())}function it(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.item.saleByPaymentTypeList[0].totalSale,"1.2-2")," ")}}function ot(e,i){1&e&&(t.TgZ(0,"th",27),t._uU(1," Card "),t.qZA())}function rt(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.item.saleByPaymentTypeList[1].totalSale,"1.2-2")," ")}}function lt(e,i){1&e&&(t.TgZ(0,"th",27),t._uU(1," Online "),t.qZA())}function st(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.item.saleByPaymentTypeList[2].totalSale,"1.2-2")," ")}}function dt(e,i){1&e&&(t.TgZ(0,"th",27),t._uU(1," Direct "),t.qZA())}function ct(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.item.saleBySaleTypeList[0].totalSale,"1.2-2")," ")}}function mt(e,i){1&e&&(t.TgZ(0,"th",27),t._uU(1," Tip "),t.qZA())}function ut(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.item.saleBySaleTypeList[1].totalSale,"1.2-2")," ")}}function pt(e,i){1&e&&(t.TgZ(0,"th",27),t._uU(1," Platform "),t.qZA())}function ft(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.item.saleBySaleTypeList[2].totalSale,"1.2-2")," ")}}function gt(e,i){1&e&&(t.TgZ(0,"th",27),t._uU(1," Total "),t.qZA())}function ht(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.item.totalSale,"1.2-2")," ")}}function yt(e,i){1&e&&t._UZ(0,"th",27)}function vt(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"td",28)(1,"button",29),t.NdJ("click",function(){const d=t.CHM(a).$implicit,m=t.oxw();return t.KtG(m.gotoManage(d.date))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()()}}function _t(e,i){1&e&&t._UZ(0,"tr",30)}function Ct(e,i){1&e&&t._UZ(0,"tr",31)}const xt=function(){return[7,14,28,70,366]};let St=(()=>{class e{constructor(a,n,o){this.router=a,this.ds=n,this.eService=o,this.moreEvent=new x.x,this.displayedColumns=["date","cash","card","online","direct","tip","platform","total","manage"]}ngOnChanges(a){this.dsList.paginator=this.paginator}ngAfterViewInit(){this.dsList.paginator=this.paginator}loadMore(){this.moreEvent.next(!0)}gotoManage(a){if(null!=a){let n=this.ds.formatToRequest(this.ds.responseFormatToDate(a));this.router.navigate(["daily-sale/manage",n]).then(()=>{this.eService.manageEmitter.next(n)})}else{let n=this.ds.formatToRequest(new Date);this.router.navigate(["daily-sale/manage",n])}}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(r.F0),t.Y36(f.R),t.Y36(c))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-daily-sale-list"]],viewQuery:function(n,o){if(1&n&&t.Gf(tt,5),2&n){let d;t.iGM(d=t.CRH())&&(o.paginator=d.first)}},inputs:{dsList:"dsList",count:"count"},outputs:{moreEvent:"moreEvent"},features:[t.TTD],decls:40,vars:7,consts:[[1,"row","py-2"],[1,"col-1","offset-11"],["type","submit","mat-raised-button","","color","primary",1,"col-12",3,"click"],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","cash"],["mat-header-cell","","class","text-end",4,"matHeaderCellDef"],["mat-cell","","class","text-end",4,"matCellDef"],["matColumnDef","card"],["matColumnDef","online"],["matColumnDef","direct"],["matColumnDef","tip"],["matColumnDef","platform"],["matColumnDef","total"],["matColumnDef","manage"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","",3,"pageSizeOptions"],["page",""],[1,"row"],[1,"col-6"],[3,"loaded","count","loadMore"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"text-end"],["mat-cell","",1,"text-end"],["mat-mini-fab","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return o.gotoManage()}),t._uU(3,"Add"),t.qZA()()(),t.TgZ(4,"div",3)(5,"table",4),t.ynx(6,5),t.YNc(7,et,2,0,"th",6),t.YNc(8,at,3,4,"td",7),t.BQk(),t.ynx(9,8),t.YNc(10,nt,2,0,"th",9),t.YNc(11,it,3,4,"td",10),t.BQk(),t.ynx(12,11),t.YNc(13,ot,2,0,"th",9),t.YNc(14,rt,3,4,"td",10),t.BQk(),t.ynx(15,12),t.YNc(16,lt,2,0,"th",9),t.YNc(17,st,3,4,"td",10),t.BQk(),t.ynx(18,13),t.YNc(19,dt,2,0,"th",9),t.YNc(20,ct,3,4,"td",10),t.BQk(),t.ynx(21,14),t.YNc(22,mt,2,0,"th",9),t.YNc(23,ut,3,4,"td",10),t.BQk(),t.ynx(24,15),t.YNc(25,pt,2,0,"th",9),t.YNc(26,ft,3,4,"td",10),t.BQk(),t.ynx(27,16),t.YNc(28,gt,2,0,"th",9),t.YNc(29,ht,3,4,"td",10),t.BQk(),t.ynx(30,17),t.YNc(31,yt,1,0,"th",9),t.YNc(32,vt,4,0,"td",10),t.BQk(),t.YNc(33,_t,1,0,"tr",18),t.YNc(34,Ct,1,0,"tr",19),t.qZA(),t._UZ(35,"mat-paginator",20,21),t.qZA(),t.TgZ(37,"div",22)(38,"div",23)(39,"app-pagination",24),t.NdJ("loadMore",function(){return o.loadMore()}),t.qZA()()()),2&n&&(t.xp6(5),t.Q6J("dataSource",o.dsList),t.xp6(28),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(6,xt)),t.xp6(4),t.Q6J("loaded",o.dsList.data.length)("count",o.count))},dependencies:[K.Q,b.lW,b.nh,q.Hw,g.BZ,g.fO,g.as,g.w1,g.Dz,g.nj,g.ge,g.ev,g.XQ,g.Gk,U.NW,p.JJ,V],styles:["div.scroll[_ngcontent-%COMP%]{height:23rem;overflow-x:hidden;overflow-y:auto}"]})}return e})();const bt=[{path:"",component:(()=>{class e{constructor(a,n,o){this.weekService=a,this.ds=n,this.dailySaleService=o,this.req=new j,this.dsList=[],this.dsSummary=new I,this.count=0}ngOnInit(){this.dataSource=new g.by(this.dsList);let a=this.ds.formatToRequest(new Date);this.weekSubscription=this.weekService.getWeek(a).subscribe(n=>{n.response?.status==M.s.success&&(this.req.between=new J.a,this.req.between.from=this.ds.responseFormatToRequest(n.item?.from),this.req.between.to=this.ds.responseFormatToRequest(n.item?.to),this.getList())})}ngAfterViewInit(){}getList(){this.dailySaleSubscription=this.dailySaleService.getDailySaleList(this.req).subscribe(a=>{a?.response?.status==M.s.success&&(this.dsSummary=a.dailySaleBetweenSummary,this.dsList.push.apply(this.dsList,a?.list),this.dataSource=new g.by(this.dsList),this.count=a?.totalRecords,this.req.pagination.pageNumber+=1)})}onFilter(){this.dsSummary=new I,this.dsList=[],this.dataSource=new g.by(this.dsList),this.req.pagination.pageNumber=1}ngOnDestroy(){this.weekSubscription?.unsubscribe(),this.dailySaleSubscription?.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(z.F),t.Y36(f.R),t.Y36(c))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-daily-sale"]],decls:3,vars:4,consts:[[3,"req","filterEvent","loadEvent"],[3,"dsSummary"],[3,"dsList","count","moreEvent"]],template:function(n,o){1&n&&(t.TgZ(0,"app-filter-between-date",0),t.NdJ("filterEvent",function(){return o.onFilter()})("loadEvent",function(){return o.getList()}),t.qZA(),t._UZ(1,"app-daily-sale-summary",1),t.TgZ(2,"app-daily-sale-list",2),t.NdJ("moreEvent",function(){return o.getList()}),t.qZA()),2&n&&(t.Q6J("req",o.req.between),t.xp6(1),t.Q6J("dsSummary",o.dsSummary),t.xp6(1),t.Q6J("dsList",o.dataSource)("count",o.count))},dependencies:[H,W,St]})}return e})()},{path:"manage/:date",component:P}];let Tt=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#a=this.\u0275inj=t.cJS({imports:[r.Bz.forChild(bt)]})}return e})();var Dt=s(1097),Mt=s(7367),wt=s(2346),N=s(3238);let Ht=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[N.BQ,p.ez,N.BQ]}),e})(),Xt=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#a=this.\u0275inj=t.cJS({imports:[p.ez,Tt,l.u5,l.UX,wt.g,Dt.z,Mt.o,w.SD,v.lN,F.c,b.ot,q.Ps,C.FA,N.XK,Ht,g.p0,U.TU]})}return e})()},7114:(Z,y,s)=>{s.d(y,{Q:()=>x});var p=s(7579),r=s(4650),l=s(6895),T=s(4859);let A=(()=>{class u{constructor(c,f){this.element=c,this.renderer=f}ngOnChanges(c){this.loaded==this.total?(this.renderer.addClass(this.element.nativeElement,"text-success"),this.renderer.removeClass(this.element.nativeElement,"text-info")):(this.renderer.removeClass(this.element.nativeElement,"text-success"),this.renderer.addClass(this.element.nativeElement,"text-info"))}static#t=this.\u0275fac=function(f){return new(f||u)(r.Y36(r.SBq),r.Y36(r.Qsj))};static#e=this.\u0275dir=r.lG2({type:u,selectors:[["","appLoadedStatus",""]],inputs:{loaded:"loaded",total:"total"},features:[r.TTD]})}return u})();function D(u,L){if(1&u&&(r.TgZ(0,"label",5)(1,"span",6),r._uU(2),r.qZA(),r.TgZ(3,"span",7),r._uU(4," of "),r.qZA(),r.TgZ(5,"span",6),r._uU(6),r.qZA()()),2&u){const c=r.oxw(2);r.Q6J("loaded",c.loaded)("total",c.count),r.xp6(1),r.Q6J("ngClass",c.loaded!=c.count?"page-data":"page-data-full"),r.xp6(1),r.Oqu(c.loaded),r.xp6(3),r.Q6J("ngClass",c.loaded!=c.count?"page-data":"page-data-full"),r.xp6(1),r.Oqu(c.count)}}function M(u,L){if(1&u){const c=r.EpF();r.TgZ(0,"button",8),r.NdJ("click",function(){r.CHM(c);const S=r.oxw(2);return r.KtG(S.more())}),r._uU(1,"More ..."),r.qZA()}}function t(u,L){if(1&u&&(r.TgZ(0,"div",1),r.YNc(1,D,7,6,"label",2),r.TgZ(2,"div",3),r.YNc(3,M,2,0,"button",4),r.qZA()()),2&u){const c=r.oxw();r.xp6(1),r.Q6J("ngIf",c.loaded!=c.count),r.xp6(2),r.Q6J("ngIf",c.loaded!=c.count)}}let x=(()=>{class u{constructor(){this.loadMore=new p.x}more(){this.loadMore.next(!0)}static#t=this.\u0275fac=function(f){return new(f||u)};static#e=this.\u0275cmp=r.Xpm({type:u,selectors:[["app-pagination"]],inputs:{count:"count",loaded:"loaded"},outputs:{loadMore:"loadMore"},decls:1,vars:1,consts:[["class","row my-4",4,"ngIf"],[1,"row","my-4"],["appLoadedStatus","","class","col-4 mx-2",3,"loaded","total",4,"ngIf"],[1,"col-6"],["mat-raised-button","","color","primary","type","button","class","col-4",3,"click",4,"ngIf"],["appLoadedStatus","",1,"col-4","mx-2",3,"loaded","total"],[3,"ngClass"],[1,"page-data"],["mat-raised-button","","color","primary","type","button",1,"col-4",3,"click"]],template:function(f,S){1&f&&r.YNc(0,t,4,2,"div",0),2&f&&r.Q6J("ngIf",S.loaded>0)},dependencies:[l.mk,l.O5,T.lW,A],styles:[".page-data[_ngcontent-%COMP%]{background-color:transparent;color:var(--text-color);border-radius:10px;opacity:.3}.page-data-full[_ngcontent-%COMP%]{background-color:#009cbf;color:#fff;padding:10px;border-radius:10px}"]})}return u})()}}]);