"use strict";(self.webpackChunklittle_india_UI_app=self.webpackChunklittle_india_UI_app||[]).push([[125],{1112:(P,y,l)=>{l.d(y,{a:()=>h});class h{constructor(d,S){this.from=d??"",this.to=S??""}}},874:(P,y,l)=>{l.d(y,{w:()=>h});class h{constructor(){this.required=!0,this.pageNumber=1,this.pageSize=20}}},125:(P,y,l)=>{l.r(y),l.d(y,{DailySaleModule:()=>qe});var h=l(6895),c=l(1635),d=l(4006),S=l(5412),_=l(7579);class Y{}class L{}var F=l(673),t=l(4650),p=l(9057),R=l(6037);let u=(()=>{class a{constructor(e){this.http=e,this.manageEmitter=new _.x}getDailySaleList(e){return this.http.post(p.b.getDailySaleList,e)}getDailySaleManageDetail(e){let n=p.b.getDailySaleManageDetail;return n=n.replace(/{date}/gi,e),this.http.post(n,null)}addDailySale(e){return this.http.post(p.b.addDailySale,e)}static#t=this.\u0275fac=function(n){return new(n||a)(t.LFG(R.L))};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var v=l(5659),I=l(3184);let et=(()=>{class a{constructor(e,n,i){this.element=e,this.renderer=n,this.colorService=i}ngOnInit(){this.renderer.setStyle(this.element.nativeElement,"color",this.colorService.getSaleTypeColor(this.saleType))}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(I.A))};static#e=this.\u0275dir=t.lG2({type:a,selectors:[["","appSaleTypeColor",""]],inputs:{saleType:["appSaleTypeColor","saleType"]}})}return a})();const at=["*"];let nt=(()=>{class a{static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-form-heading"]],ngContentSelectors:at,decls:3,vars:0,consts:[[1,"text-center","bg-primary","text-light","py-3"],[1,"fw-normal"]],template:function(n,i){1&n&&(t.F$t(),t.TgZ(0,"div",0)(1,"h5",1),t.Hsn(2),t.qZA()())}})}return a})();var M=l(4859),J=l(4144),x=l(9549),T=l(9602),D=l(3238),it=l(1281),A=l(9646),ot=l(2843),rt=l(4128),st=l(727),G=l(8505),E=l(4004),lt=l(262),ct=l(8746),dt=l(3099),mt=l(5698),B=l(529),Q=l(1481);const ut=["*"];let q;function Z(a){return function pt(){if(void 0===q&&(q=null,typeof window<"u")){const a=window;void 0!==a.trustedTypes&&(q=a.trustedTypes.createPolicy("angular#components",{createHTML:r=>r}))}return q}()?.createHTML(a)||a}function k(a){return Error(`Unable to find icon with the name "${a}"`)}function z(a){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${a}".`)}function H(a){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${a}".`)}class b{constructor(r,e,n){this.url=r,this.svgText=e,this.options=n}}let U=(()=>{class a{constructor(e,n,i,o){this._httpClient=e,this._sanitizer=n,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(e,n,i){return this.addSvgIconInNamespace("",e,n,i)}addSvgIconLiteral(e,n,i){return this.addSvgIconLiteralInNamespace("",e,n,i)}addSvgIconInNamespace(e,n,i,o){return this._addSvgIconConfig(e,n,new b(i,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,n,i,o){const s=this._sanitizer.sanitize(t.q3G.HTML,i);if(!s)throw H(i);const m=Z(s);return this._addSvgIconConfig(e,n,new b("",m,o))}addSvgIconSet(e,n){return this.addSvgIconSetInNamespace("",e,n)}addSvgIconSetLiteral(e,n){return this.addSvgIconSetLiteralInNamespace("",e,n)}addSvgIconSetInNamespace(e,n,i){return this._addSvgIconSetConfig(e,new b(n,null,i))}addSvgIconSetLiteralInNamespace(e,n,i){const o=this._sanitizer.sanitize(t.q3G.HTML,n);if(!o)throw H(n);const s=Z(o);return this._addSvgIconSetConfig(e,new b("",s,i))}registerFontClassAlias(e,n=e){return this._fontCssClassesByAlias.set(e,n),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const n=this._sanitizer.sanitize(t.q3G.RESOURCE_URL,e);if(!n)throw z(e);const i=this._cachedIconsByUrl.get(n);return i?(0,A.of)(O(i)):this._loadSvgIconFromConfig(new b(e,null)).pipe((0,G.b)(o=>this._cachedIconsByUrl.set(n,o)),(0,E.U)(o=>O(o)))}getNamedSvgIcon(e,n=""){const i=j(n,e);let o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(n,e),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);const s=this._iconSetConfigs.get(n);return s?this._getSvgFromIconSetConfigs(e,s):(0,ot._)(k(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?(0,A.of)(O(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,E.U)(n=>O(n)))}_getSvgFromIconSetConfigs(e,n){const i=this._extractIconWithNameFromAnySet(e,n);if(i)return(0,A.of)(i);const o=n.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe((0,lt.K)(m=>{const C=`Loading icon set URL: ${this._sanitizer.sanitize(t.q3G.RESOURCE_URL,s.url)} failed: ${m.message}`;return this._errorHandler.handleError(new Error(C)),(0,A.of)(null)})));return(0,rt.D)(o).pipe((0,E.U)(()=>{const s=this._extractIconWithNameFromAnySet(e,n);if(!s)throw k(e);return s}))}_extractIconWithNameFromAnySet(e,n){for(let i=n.length-1;i>=0;i--){const o=n[i];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){const s=this._svgElementFromConfig(o),m=this._extractSvgIconFromSet(s,e,o.options);if(m)return m}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe((0,G.b)(n=>e.svgText=n),(0,E.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?(0,A.of)(null):this._fetchIcon(e).pipe((0,G.b)(n=>e.svgText=n))}_extractSvgIconFromSet(e,n,i){const o=e.querySelector(`[id="${n}"]`);if(!o)return null;const s=o.cloneNode(!0);if(s.removeAttribute("id"),"svg"===s.nodeName.toLowerCase())return this._setSvgAttributes(s,i);if("symbol"===s.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(s),i);const m=this._svgElementFromString(Z("<svg></svg>"));return m.appendChild(s),this._setSvgAttributes(m,i)}_svgElementFromString(e){const n=this._document.createElement("DIV");n.innerHTML=e;const i=n.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(e){const n=this._svgElementFromString(Z("<svg></svg>")),i=e.attributes;for(let o=0;o<i.length;o++){const{name:s,value:m}=i[o];"id"!==s&&n.setAttribute(s,m)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&n.appendChild(e.childNodes[o].cloneNode(!0));return n}_setSvgAttributes(e,n){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),n&&n.viewBox&&e.setAttribute("viewBox",n.viewBox),e}_fetchIcon(e){const{url:n,options:i}=e,o=i?.withCredentials??!1;if(!this._httpClient)throw function ht(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const s=this._sanitizer.sanitize(t.q3G.RESOURCE_URL,n);if(!s)throw z(n);const m=this._inProgressUrlFetches.get(s);if(m)return m;const f=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe((0,E.U)(C=>Z(C)),(0,ct.x)(()=>this._inProgressUrlFetches.delete(s)),(0,dt.B)());return this._inProgressUrlFetches.set(s,f),f}_addSvgIconConfig(e,n,i){return this._svgIconConfigs.set(j(e,n),i),this}_addSvgIconSetConfig(e,n){const i=this._iconSetConfigs.get(e);return i?i.push(n):this._iconSetConfigs.set(e,[n]),this}_svgElementFromConfig(e){if(!e.svgElement){const n=this._svgElementFromString(e.svgText);this._setSvgAttributes(n,e.options),e.svgElement=n}return e.svgElement}_getIconConfigFromResolvers(e,n){for(let i=0;i<this._resolvers.length;i++){const o=this._resolvers[i](n,e);if(o)return gt(o)?new b(o.url,null,o.options):new b(o,null)}}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(B.eN,8),t.LFG(Q.H7),t.LFG(h.K0,8),t.LFG(t.qLn))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function O(a){return a.cloneNode(!0)}function j(a,r){return a+":"+r}function gt(a){return!(!a.url||!a.options)}const vt=(0,D.pj)(class{constructor(a){this._elementRef=a}}),_t=new t.OlP("MAT_ICON_DEFAULT_OPTIONS"),yt=new t.OlP("mat-icon-location",{providedIn:"root",factory:function St(){const a=(0,t.f3M)(h.K0),r=a?a.location:null;return{getPathname:()=>r?r.pathname+r.search:""}}}),$=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Ct=$.map(a=>`[${a}]`).join(", "),xt=/^url\(['"]?#(.*?)['"]?\)$/;let W=(()=>{class a extends vt{get inline(){return this._inline}set inline(e){this._inline=(0,it.Ig)(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const n=this._cleanupFontValue(e);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const n=this._cleanupFontValue(e);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}constructor(e,n,i,o,s,m){super(e),this._iconRegistry=n,this._location=o,this._errorHandler=s,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=st.w0.EMPTY,m&&(m.color&&(this.color=this.defaultColor=m.color),m.fontSet&&(this.fontSet=m.fontSet)),i||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];const n=e.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let n=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const i=e.childNodes[n];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,n=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>e.classList.remove(i)),n.forEach(i=>e.classList.add(i)),this._previousFontSetClass=n,this.fontIcon!==this._previousFontIconClass&&!n.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const n=this._elementsWithExternalReferences;n&&n.forEach((i,o)=>{i.forEach(s=>{o.setAttribute(s.name,`url('${e}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(e){const n=e.querySelectorAll(Ct),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<n.length;o++)$.forEach(s=>{const m=n[o],f=m.getAttribute(s),C=f?f.match(xt):null;if(C){let w=i.get(m);w||(w=[],i.set(m,w)),w.push({name:s,value:C[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[n,i]=this._splitIconName(e);n&&(this._svgNamespace=n),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,n).pipe((0,mt.q)(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${i}! ${o.message}`))})}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(t.SBq),t.Y36(U),t.$8M("aria-hidden"),t.Y36(yt),t.Y36(t.qLn),t.Y36(_t,8))},a.\u0275cmp=t.Xpm({type:a,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(e,n){2&e&&(t.uIk("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet)("fontIcon",n._usingFontIcon()?n.fontIcon:null),t.ekj("mat-icon-inline",n.inline)("mat-icon-no-color","primary"!==n.color&&"accent"!==n.color&&"warn"!==n.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[t.qOj],ngContentSelectors:ut,decls:1,vars:0,template:function(e,n){1&e&&(t.F$t(),t.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),a})(),Tt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[D.BQ,D.BQ]}),a})();function bt(a,r){if(1&a&&(t.TgZ(0,"div",33)(1,"mat-form-field",34)(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"input",35),t.qZA()()),2&a){const e=r.index,n=t.oxw(2);t.Q6J("formGroupName",e),t.xp6(3),t.Oqu(n.manageRequest.directDailySaleLines[e].saleGroup.name)}}function It(a,r){if(1&a&&(t.TgZ(0,"div",33)(1,"mat-form-field",34)(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"input",35),t.qZA()()),2&a){const e=r.index,n=t.oxw(2);t.Q6J("formGroupName",e),t.xp6(3),t.Oqu(n.manageRequest.tipDailySaleLines[e].saleGroup.name)}}function Mt(a,r){if(1&a&&(t.TgZ(0,"div",39)(1,"mat-form-field",34)(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"input",35),t.qZA()()),2&a){const e=r.index,n=t.oxw().index,i=t.oxw(2);t.Q6J("formGroupName",e),t.xp6(3),t.Oqu(i.manageRequest.platformDailySaleLines[n].platformDailySaleLines[e].saleGroup.name)}}function Dt(a,r){if(1&a&&(t.TgZ(0,"div",36)(1,"h6",37),t._uU(2),t.qZA(),t.TgZ(3,"div",18)(4,"div",4),t.YNc(5,Mt,5,2,"div",38),t.qZA()()()),2&a){const e=r.$implicit,n=r.index,i=t.oxw(2);t.Q6J("formGroupName",n),t.xp6(2),t.Oqu(i.manageRequest.platformDailySaleLines[n].platform),t.xp6(3),t.Q6J("ngForOf",i.getLines(e))}}function wt(a,r){if(1&a&&(t.TgZ(0,"h1",40),t._uU(1),t.ALo(2,"number"),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(t.xi3(2,1,e.total,"1.2-2"))}}function Lt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"form",14),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.manageDailySale())}),t.TgZ(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"div",19)(6,"div",20)(7,"div",21)(8,"h2",22),t._uU(9,"Direct"),t.qZA()(),t.TgZ(10,"div",4),t.YNc(11,bt,5,2,"div",23),t.qZA()()()()()(),t.TgZ(12,"div",16)(13,"div",24)(14,"div",18)(15,"div",19)(16,"div",20)(17,"div",21)(18,"h2",22),t._uU(19,"Tip"),t.qZA()(),t.TgZ(20,"div",4),t.YNc(21,It,5,2,"div",23),t.qZA()()()()()()(),t.TgZ(22,"div",25)(23,"h2",22),t._uU(24,"Platform"),t.qZA()(),t.TgZ(25,"div",26)(26,"div",18)(27,"div",15),t.YNc(28,Dt,6,3,"div",27),t.qZA()()(),t.TgZ(29,"div",28)(30,"div",29),t.YNc(31,wt,3,4,"h1",30),t.qZA(),t.TgZ(32,"div",31)(33,"button",32),t._uU(34,"Save"),t.qZA()()()()}if(2&a){const e=t.oxw();t.Q6J("formGroup",e.manageForm),t.xp6(8),t.Q6J("appSaleTypeColor","direct"),t.xp6(3),t.Q6J("ngForOf",e.directControls),t.xp6(7),t.Q6J("appSaleTypeColor","tip"),t.xp6(3),t.Q6J("ngForOf",e.tipControls),t.xp6(2),t.Q6J("appSaleTypeColor","platform"),t.xp6(5),t.Q6J("ngForOf",e.platformControls),t.xp6(3),t.Q6J("ngIf",e.requiredDataProcessed)}}let X=(()=>{class a{constructor(e,n,i,o,s,m){this.dialogRef=e,this.activatedRoute=n,this.router=i,this.dailySaleService=o,this.ds=s,this.data=m,this.requiredDataProcessed=!1,this.total=0,this.addEvent=new _.x}get directControls(){return this.manageForm.get("directLines").get("lines").controls}get tipControls(){return this.manageForm.get("tipLines").get("lines").controls}get platformControls(){return this.manageForm.get("platformLines").get("lines").controls}getLines(e){return e.get("lines").controls}ngOnInit(){this.filterForm=new d.cw({date:new d.NI(this.data,d.kI.required)}),this.getDailySaleManageDetail()}getDailySaleManageDetail(){this.requiredDataProcessed=!1,this.dailySaleService.getDailySaleManageDetail(this.data).subscribe(e=>{if(e.response?.status!=F.s.success)return;this.manageRequest=e.item;let n=new d.cw({lines:new d.Oe([])}),i=new d.cw({lines:new d.Oe([])}),o=new d.cw({lines:new d.Oe([])});this.manageRequest?.directDailySaleLines.forEach(s=>{let m=new d.NI(0==s.amount?null:s.amount.toFixed(2)),f=new d.cw({amount:m});n.get("lines").push(f)}),this.manageRequest?.tipDailySaleLines.forEach(s=>{let m=new d.NI(0==s.amount?null:s.amount.toFixed(2)),f=new d.cw({amount:m});i.get("lines").push(f)}),this.manageRequest?.platformDailySaleLines.forEach(s=>{let m=new d.cw({lines:new d.Oe([])});s.platformDailySaleLines.forEach(f=>{let C=new d.NI(0==f.amount?null:f.amount.toFixed(2)),w=new d.cw({amount:C});m.get("lines").push(w)}),o.get("lines").push(m)}),this.manageForm=new d.cw({directLines:n,tipLines:i,platformLines:o}),this.calculateTotal(),this.requiredDataProcessed=!0,this.manageForm.valueChanges.subscribe(()=>{this.calculateTotal()})})}ngOnChanges(e){}onPrev(){let e=this.ds.prevDay(new Date(this.data)),n=this.ds.formatToRequest(e);this.data=n,this.filterForm.patchValue({date:n}),this.getDailySaleManageDetail()}onNext(){let e=this.ds.nextDay(new Date(this.data)),n=this.ds.formatToRequest(e);this.data=n,this.filterForm.patchValue({date:n}),this.getDailySaleManageDetail()}onChange(e){let n=this.ds.formatToRequest(this.filterForm.value.date);this.data=n,this.filterForm.patchValue({date:n}),this.getDailySaleManageDetail()}calculateTotal(){this.total=0,this.manageForm.get("directLines.lines").controls.forEach((e,n)=>{!isNaN(e.value.amount)&&null!=e.value.amount&&""!=e.value.amount&&(this.total=this.total+parseFloat(e.value.amount))}),this.manageForm.get("tipLines.lines").controls.forEach((e,n)=>{!isNaN(e.value.amount)&&null!=e.value.amount&&""!=e.value.amount&&(this.total=this.total+parseFloat(e.value.amount))}),this.manageForm.get("platformLines.lines").controls.forEach((e,n)=>{e.get("lines").controls.forEach((i,o)=>{!isNaN(i.value.amount)&&null!=i.value.amount&&""!=i.value.amount&&(this.total=this.total+parseFloat(i.value.amount))})})}manageDailySale(){if(!confirm("Are you sure to add sale ?"))return;let e=new Y;e.dateOfSale=this.ds.formatToRequest(this.filterForm.value.date),e.dailySaleLines=[],this.manageForm.get("directLines.lines").controls.forEach((n,i)=>{let o=new L;o.saleGroup=this.manageRequest.directDailySaleLines[i].saleGroup,o.amount=isNaN(n.value.amount)||null==n.value.amount||""==n.value.amount?0:parseFloat(n.value.amount),e.dailySaleLines.push(o)}),this.manageForm.get("tipLines.lines").controls.forEach((n,i)=>{let o=new L;o.saleGroup=this.manageRequest.tipDailySaleLines[i].saleGroup,o.amount=isNaN(n.value.amount)||null==n.value.amount||""==n.value.amount?0:parseFloat(n.value.amount),e.dailySaleLines.push(o)}),this.manageForm.get("platformLines.lines").controls.forEach((n,i)=>{let o=this.manageRequest?.platformDailySaleLines[i];n.get("lines").controls.forEach((s,m)=>{let f=new L;f.saleGroup=o.platformDailySaleLines[m].saleGroup,f.amount=isNaN(s.value.amount)||null==s.value.amount||""==s.value.amount?0:parseFloat(s.value.amount),e.dailySaleLines.push(f)})}),this.dsManageSub=this.dailySaleService.addDailySale(e).subscribe(n=>{this.addEvent.next(!0),this.onNext()})}ngOnDestroy(){this.paramSub?.unsubscribe(),this.dsManageSub?.unsubscribe(),this.eventSub?.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(S.so),t.Y36(c.gz),t.Y36(c.F0),t.Y36(u),t.Y36(v.R),t.Y36(S.WI))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-daily-sale-manage"]],features:[t.TTD],decls:24,vars:4,consts:[[1,"mat-dialog-content"],[1,"row","p-0","m-0"],[1,"col-4","offset-4"],[1,"row","mt-md-4",3,"formGroup"],[1,"row"],[1,"col-3","mt-md-4","text-end"],["mat-fab","","color","primary",3,"click"],[1,"col-6","mt-md-4"],["appearance","outline",1,"col-12","form-field"],["matInput","","formControlName","date",3,"matDatepicker","dateChange"],["matIconSuffix","",3,"for"],["picker",""],[1,"col-3","mt-md-4","text-start"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row","m-0","px-4"],[1,"col-md-4","col-12"],["formGroupName","directLines"],["formArrayName","lines"],[1,"row","my-md-3"],[1,"col-12"],[1,"row","py-md-4"],[1,"mat-headline-6",3,"appSaleTypeColor"],["class","col-md-4 col-6 form-group",3,"formGroupName",4,"ngFor","ngForOf"],["formGroupName","tipLines"],[1,"row","px-4","m-0","pt-md-3"],["formGroupName","platformLines"],["class","col-md-4 col-12 py-3",3,"formGroupName",4,"ngFor","ngForOf"],[1,"row","m-0"],[1,"col-4","offset-6"],["class","mat-headline-4 text-end text-mat-accent total-sale",4,"ngIf"],[1,"col-2","offset-0"],["mat-raised-button","","color","primary",1,"col-6","offset-3","mt-3"],[1,"col-md-4","col-6","form-group",3,"formGroupName"],["appearance","outline","floatLabel","always",1,"form-field","w-100"],["type","text","placeholder","","matInput","","formControlName","amount"],[1,"col-md-4","col-12","py-3",3,"formGroupName"],[1,"my-md-2","mat-body"],["class","col-4 form-group",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-4","form-group",3,"formGroupName"],[1,"mat-headline-4","text-end","text-mat-accent","total-sale"]],template:function(n,i){if(1&n&&(t.TgZ(0,"app-form-heading"),t._uU(1," Add Daily Sale\n"),t.qZA(),t.TgZ(2,"div",0)(3,"div",1)(4,"div",2)(5,"form",3)(6,"div",4)(7,"div",5)(8,"button",6),t.NdJ("click",function(){return i.onPrev()}),t.TgZ(9,"mat-icon"),t._uU(10,"chevron_left"),t.qZA()()(),t.TgZ(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Date"),t.qZA(),t.TgZ(15,"input",9),t.NdJ("dateChange",function(s){return i.onChange(s)}),t.qZA(),t._UZ(16,"mat-datepicker-toggle",10)(17,"mat-datepicker",null,11),t.qZA()(),t.TgZ(19,"div",12)(20,"button",6),t.NdJ("click",function(){return i.onNext()}),t.TgZ(21,"mat-icon"),t._uU(22,"chevron_right"),t.qZA()()()()()()(),t.YNc(23,Lt,35,8,"form",13),t.qZA()),2&n){const o=t.MAs(18);t.xp6(5),t.Q6J("formGroup",i.filterForm),t.xp6(10),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(7),t.Q6J("ngIf",i.requiredDataProcessed)}},dependencies:[h.sg,h.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,d.x0,d.CE,et,nt,M.lW,M.cs,J.Nt,x.KE,x.hX,x.R9,T.Mq,T.hl,T.nW,W,h.JJ],styles:[".sale-group-label[_ngcontent-%COMP%]{color:#807c7c}input[_ngcontent-%COMP%]{font-size:large!important}.total-sale[_ngcontent-%COMP%]{font-size:50px;font-family:Bungee;font-weight:bolder}"]})}return a})();var g=l(7155);class Ft{dictSaleType(){let r=new Map;return this.saleBySaleTypeList.forEach(e=>{r.set(e.saleType.toLowerCase(),e.totalSale)}),r}dictPaymentType(){let r=new Map;return this.saleByPaymentTypeList.forEach(e=>{r.set(e.paymentType.toLowerCase(),e.totalSale)}),r}}class V extends Ft{}var K=l(1112),At=l(874);class Et{constructor(){this.between=new K.a,this.pagination=new At.w}}var Zt=l(3359);let Nt=(()=>{class a{constructor(e){this.ds=e,this.filterEvent=new _.x,this.loadEvent=new _.x}ngOnInit(){this.initDateRange(),this.filterForm=new d.cw({from:new d.NI(this.req.from,[d.kI.required]),to:new d.NI(this.req.to,[d.kI.required])}),this.valueChangeSubscription=this.filterForm.valueChanges.subscribe(e=>{this.req.from=this.ds.formatToRequest(this.filterForm.value.from),this.req.to=this.ds.formatToRequest(this.filterForm.value.to),this.filterEvent.next(this.req)})}ngOnChanges(e){null!=this.filterForm&&this.filterForm.patchValue({from:this.req.from,to:this.req.to})}initDateRange(){let n=this.ds.Today;this.req.from=this.ds.formatToRequest(this.ds.Today),this.req.to=this.ds.formatToRequest(n)}getList(){this.loadEvent.next()}ngOnDestroy(){this.valueChangeSubscription?.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(v.R))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-filter-between-date"]],inputs:{req:"req"},outputs:{filterEvent:"filterEvent",loadEvent:"loadEvent"},features:[t.TTD],decls:22,vars:5,consts:[[1,"row","mt-4",3,"formGroup","ngSubmit"],[1,"col-md-3","col-8","offset-md-8","offset-1"],[1,"row"],[1,"col-md-6","col-6","px-2"],["appearance","outline",1,"col-12","form-field"],["matInput","","formControlName","from",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],["matInput","","formControlName","to",3,"matDatepicker"],["picker1",""],[1,"col-md-1","col-3","px-4"],["type","submit","mat-raised-button","","color","primary",1,"col-12","mt-2"]],template:function(n,i){if(1&n&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return i.getList()}),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),t._uU(6,"From"),t.qZA(),t._UZ(7,"input",5)(8,"mat-datepicker-toggle",6)(9,"mat-datepicker",null,7),t.qZA()(),t.TgZ(11,"div",3)(12,"mat-form-field",4)(13,"mat-label"),t._uU(14,"To"),t.qZA(),t._UZ(15,"input",8)(16,"mat-datepicker-toggle",6)(17,"mat-datepicker",null,9),t.qZA()()()(),t.TgZ(19,"div",10)(20,"button",11),t._uU(21,"Load"),t.qZA()()()),2&n){const o=t.MAs(10),s=t.MAs(18);t.Q6J("formGroup",i.filterForm),t.xp6(7),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(7),t.Q6J("matDatepicker",s),t.xp6(1),t.Q6J("for",s)}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,x.KE,x.hX,x.R9,M.lW,J.Nt,T.Mq,T.hl,T.nW]})}return a})();var N=l(7020),Rt=l(2873);function qt(a,r){if(1&a&&(t.TgZ(0,"div",1)(1,"div",2)(2,"h2",3),t._uU(3),t.ALo(4,"number"),t.qZA()(),t.TgZ(5,"div",4),t._UZ(6,"div",5),t.qZA(),t.TgZ(7,"div",4),t._UZ(8,"div",5),t.qZA(),t.TgZ(9,"div",6),t._UZ(10,"div",7),t.qZA()()),2&a){const e=t.oxw();t.xp6(3),t.Oqu(t.xi3(4,4,e.dsSummary.totalSale,"1.0-0")),t.xp6(3),t.Q6J("chart",e.paymentChart),t.xp6(2),t.Q6J("chart",e.saleTypeChart),t.xp6(2),t.Q6J("chart",e.platformChart)}}let Ut=(()=>{class a{constructor(e,n){this.colorService=e,this.graphService=n,this.paymentChart=new N.kL,this.saleTypeChart=new N.kL,this.platformChart=new N.kL,this.cash=0,this.card=0,this.online=0,this.direct=0,this.tip=0,this.platform=0,this.loaded=!1,this.graphHeight=200}ngOnChanges(e){this.loaded=null!=this.dsSummary.from,this.loadPaymentChart(),this.loadSaleTypeChart(),this.loadPlatformChart()}loadPaymentChart(){let e=this.dsSummary.saleByPaymentTypeList.map(o=>({name:o.paymentType,y:o.totalSale,color:this.colorService.getPaymentColor(o.paymentType)})),n=this.dsSummary.saleByPaymentTypeList.map(o=>o.paymentType);this.paymentChart=this.graphService.getPieChart({data:e,labelList:n,title:"Payment",labelY:"Sale",innerSize:"60%",height:this.graphHeight})}loadSaleTypeChart(){let e=this.dsSummary.saleBySaleTypeList.map(o=>({name:o.saleType,y:o.totalSale,color:this.colorService.getSaleTypeColor(o.saleType)})),n=this.dsSummary.saleBySaleTypeList.map(o=>o.saleType);this.saleTypeChart=this.graphService.getPieChart({data:e,labelList:n,title:"Sale",labelY:"Sale",innerSize:"60%",height:this.graphHeight})}loadPlatformChart(){let e=this.dsSummary.saleByPlatformList.map(s=>s.salePlatform.name),n=this.dsSummary.saleByPlatformList.map(s=>({y:s.totalSale,color:"#6167C7"})),i=0;n.forEach(s=>{i+=s.y}),this.platformChart=this.graphService.getBarChart(n,e,"Platform","Sale",this.graphHeight)}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(I.A),t.Y36(Rt.M))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-daily-sale-summary"]],inputs:{dsSummary:"dsSummary"},features:[t.TTD],decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-md-2","col-12","mt-5"],[1,"mat-headline-4","text-center","text-mat-primary","summary-value"],[1,"col-md-3","col-6"],[1,"pie",3,"chart"],[1,"col-md-4","col-12"],[1,"column",3,"chart"]],template:function(n,i){1&n&&t.YNc(0,qt,11,7,"div",0),2&n&&t.Q6J("ngIf",i.loaded)},dependencies:[h.O5,N.Dm,h.JJ],styles:[".testimonial-group[_ngcontent-%COMP%] > .row[_ngcontent-%COMP%]{overflow-x:auto;white-space:nowrap}.testimonial-group[_ngcontent-%COMP%] > .row[_ngcontent-%COMP%] > .col-sm-4[_ngcontent-%COMP%]{display:inline-block;float:none}.summary-value[_ngcontent-%COMP%]{font-size:60px}.summary-head[_ngcontent-%COMP%]{font-size:12px;color:gray}"]})}return a})();var Ot=l(7114),tt=l(7974);let Pt=(()=>{class a{constructor(e){this.pipe=e}transform(e,n){let i=new Date(e);return this.pipe.transform(i,n)}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(h.uU,16))};static#e=this.\u0275pipe=t.Yjl({name:"formatDate",type:a,pure:!0})}return a})();const Yt=["page"];function Jt(a,r){1&a&&(t.TgZ(0,"th",25),t._uU(1," Date "),t.qZA())}function Gt(a,r){if(1&a&&(t.TgZ(0,"td",26),t._uU(1),t.ALo(2,"formatDate"),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.date,"EEE, dd-MMM-yyyy")," ")}}function Bt(a,r){1&a&&(t.TgZ(0,"th",27),t._uU(1,"Cash "),t.qZA())}function Qt(a,r){if(1&a&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.item.saleByPaymentTypeList[0].totalSale,"1.2-2")," ")}}function kt(a,r){1&a&&(t.TgZ(0,"th",27),t._uU(1," Card "),t.qZA())}function zt(a,r){if(1&a&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.item.saleByPaymentTypeList[1].totalSale,"1.2-2")," ")}}function Ht(a,r){1&a&&(t.TgZ(0,"th",27),t._uU(1," Online "),t.qZA())}function jt(a,r){if(1&a&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.item.saleByPaymentTypeList[2].totalSale,"1.2-2")," ")}}function $t(a,r){1&a&&(t.TgZ(0,"th",27),t._uU(1," Direct "),t.qZA())}function Wt(a,r){if(1&a&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.item.saleBySaleTypeList[0].totalSale,"1.2-2")," ")}}function Xt(a,r){1&a&&(t.TgZ(0,"th",27),t._uU(1," Tip "),t.qZA())}function Vt(a,r){if(1&a&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.item.saleBySaleTypeList[2].totalSale,"1.2-2")," ")}}function Kt(a,r){1&a&&(t.TgZ(0,"th",27),t._uU(1," Platform "),t.qZA())}function te(a,r){if(1&a&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.item.saleBySaleTypeList[1].totalSale,"1.2-2")," ")}}function ee(a,r){1&a&&(t.TgZ(0,"th",27),t._uU(1," Total "),t.qZA())}function ae(a,r){if(1&a&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.item.totalSale,"1.2-2")," ")}}function ne(a,r){1&a&&t._UZ(0,"th",27)}function ie(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"td",28)(1,"button",29),t.NdJ("click",function(){const o=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.gotoManage(o.date))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()()}}function oe(a,r){1&a&&t._UZ(0,"tr",30)}function re(a,r){1&a&&t._UZ(0,"tr",31)}const se=function(){return[7,14,28,70,366]};let le=(()=>{class a{constructor(e,n,i,o){this.router=e,this.ds=n,this.eService=i,this.dialog=o,this.moreEvent=new _.x,this.addEvent=new _.x,this.editEvent=new _.x,this.displayedColumns=["date","cash","card","online","direct","tip","platform","total","manage"]}ngOnChanges(e){this.dsList.paginator=this.paginator}ngAfterViewInit(){this.dsList.paginator=this.paginator}loadMore(){this.moreEvent.next(!0)}gotoManage(e){let n=null;n=this.ds.formatToRequest(null!=e?this.ds.responseFormatToDate(e):new Date),null!=n&&this.dialog.open(X,{data:n,width:"90%",height:"95%"}).componentInstance.addEvent.subscribe(o=>{this.addEvent.next()})}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(c.F0),t.Y36(v.R),t.Y36(u),t.Y36(S.uw))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-daily-sale-list"]],viewQuery:function(n,i){if(1&n&&t.Gf(Yt,5),2&n){let o;t.iGM(o=t.CRH())&&(i.paginator=o.first)}},inputs:{dsList:"dsList",count:"count"},outputs:{moreEvent:"moreEvent",addEvent:"addEvent",editEvent:"editEvent"},features:[t.TTD],decls:40,vars:7,consts:[[1,"row","py-2"],[1,"col-1","offset-11","px-4"],["type","submit","mat-raised-button","","color","primary",1,"col-12",3,"click"],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","cash"],["mat-header-cell","","class","text-end",4,"matHeaderCellDef"],["mat-cell","","class","text-end",4,"matCellDef"],["matColumnDef","card"],["matColumnDef","online"],["matColumnDef","direct"],["matColumnDef","tip"],["matColumnDef","platform"],["matColumnDef","total"],["matColumnDef","manage"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","",3,"pageSizeOptions"],["page",""],[1,"row"],[1,"col-6"],[3,"loaded","count","loadMore"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"text-end"],["mat-cell","",1,"text-end"],["mat-mini-fab","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return i.gotoManage()}),t._uU(3,"Add"),t.qZA()()(),t.TgZ(4,"div",3)(5,"table",4),t.ynx(6,5),t.YNc(7,Jt,2,0,"th",6),t.YNc(8,Gt,3,4,"td",7),t.BQk(),t.ynx(9,8),t.YNc(10,Bt,2,0,"th",9),t.YNc(11,Qt,3,4,"td",10),t.BQk(),t.ynx(12,11),t.YNc(13,kt,2,0,"th",9),t.YNc(14,zt,3,4,"td",10),t.BQk(),t.ynx(15,12),t.YNc(16,Ht,2,0,"th",9),t.YNc(17,jt,3,4,"td",10),t.BQk(),t.ynx(18,13),t.YNc(19,$t,2,0,"th",9),t.YNc(20,Wt,3,4,"td",10),t.BQk(),t.ynx(21,14),t.YNc(22,Xt,2,0,"th",9),t.YNc(23,Vt,3,4,"td",10),t.BQk(),t.ynx(24,15),t.YNc(25,Kt,2,0,"th",9),t.YNc(26,te,3,4,"td",10),t.BQk(),t.ynx(27,16),t.YNc(28,ee,2,0,"th",9),t.YNc(29,ae,3,4,"td",10),t.BQk(),t.ynx(30,17),t.YNc(31,ne,1,0,"th",9),t.YNc(32,ie,4,0,"td",10),t.BQk(),t.YNc(33,oe,1,0,"tr",18),t.YNc(34,re,1,0,"tr",19),t.qZA(),t._UZ(35,"mat-paginator",20,21),t.qZA(),t.TgZ(37,"div",22)(38,"div",23)(39,"app-pagination",24),t.NdJ("loadMore",function(){return i.loadMore()}),t.qZA()()()),2&n&&(t.xp6(5),t.Q6J("dataSource",i.dsList),t.xp6(28),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(6,se)),t.xp6(4),t.Q6J("loaded",i.dsList.data.length)("count",i.count))},dependencies:[Ot.Q,M.lW,M.nh,g.BZ,g.fO,g.as,g.w1,g.Dz,g.nj,g.ge,g.ev,g.XQ,g.Gk,tt.NW,W,h.JJ,Pt],styles:["div.scroll[_ngcontent-%COMP%]{height:23rem;overflow-x:hidden;overflow-y:auto}"]})}return a})();const ce=[{path:"",component:(()=>{class a{constructor(e,n,i){this.weekService=e,this.ds=n,this.dailySaleService=i,this.req=new Et,this.dsList=[],this.dsSummary=new V,this.count=0}ngOnInit(){this.dataSource=new g.by(this.dsList);let e=this.ds.formatToRequest(new Date);this.weekSubscription=this.weekService.getWeek(e).subscribe(n=>{n.response?.status==F.s.success&&(this.req.pagination.pageSize=30,this.req.between=new K.a,this.req.between.from=this.ds.responseFormatToRequest(n.item?.from),this.req.between.to=this.ds.responseFormatToRequest(n.item?.to),this.getList())})}ngAfterViewInit(){}getList(){this.dailySaleSubscription=this.dailySaleService.getDailySaleList(this.req).subscribe(e=>{e?.response?.status==F.s.success&&(this.dsSummary=e.dailySaleBetweenSummary,this.dsList.push.apply(this.dsList,e?.list),this.dataSource=new g.by(this.dsList),this.count=e?.totalRecords,this.req.pagination.pageNumber+=1)})}refreshList(){this.dsList=[],this.dataSource=new g.by(this.dsList),this.req.pagination.pageNumber=1,this.getList()}onFilter(){this.dsSummary=new V,this.dsList=[],this.dataSource=new g.by(this.dsList),this.req.pagination.pageNumber=1}ngOnDestroy(){this.weekSubscription?.unsubscribe(),this.dailySaleSubscription?.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(Zt.F),t.Y36(v.R),t.Y36(u))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-daily-sale"]],decls:3,vars:4,consts:[[3,"req","filterEvent","loadEvent"],[3,"dsSummary"],[3,"dsList","count","moreEvent","addEvent"]],template:function(n,i){1&n&&(t.TgZ(0,"app-filter-between-date",0),t.NdJ("filterEvent",function(){return i.onFilter()})("loadEvent",function(){return i.getList()}),t.qZA(),t._UZ(1,"app-daily-sale-summary",1),t.TgZ(2,"app-daily-sale-list",2),t.NdJ("moreEvent",function(){return i.getList()})("addEvent",function(){return i.refreshList()}),t.qZA()),2&n&&(t.Q6J("req",i.req.between),t.xp6(1),t.Q6J("dsSummary",i.dsSummary),t.xp6(1),t.Q6J("dsList",i.dataSource)("count",i.count))},dependencies:[Nt,Ut,le]})}return a})()},{path:"manage/:date",component:X}];let de=(()=>{class a{static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275mod=t.oAB({type:a});static#a=this.\u0275inj=t.cJS({imports:[c.Bz.forChild(ce)]})}return a})();var me=l(1097),ue=l(7367),pe=l(2346);let Ne=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[D.BQ,h.ez,D.BQ]}),a})();var Re=l(8184);let qe=(()=>{class a{static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275mod=t.oAB({type:a});static#a=this.\u0275inj=t.cJS({imports:[h.ez,de,d.u5,d.UX,pe.g,me.z,ue.o,N.SD,x.lN,J.c,M.ot,Tt,T.FA,D.XK,Ne,g.p0,tt.TU,S.Is,Re.U8]})}return a})()},7114:(P,y,l)=>{l.d(y,{Q:()=>t});var h=l(7579),c=l(4650),d=l(6895),S=l(4859);let _=(()=>{class p{constructor(u,v){this.element=u,this.renderer=v}ngOnChanges(u){this.loaded==this.total?(this.renderer.addClass(this.element.nativeElement,"text-success"),this.renderer.removeClass(this.element.nativeElement,"text-info")):(this.renderer.removeClass(this.element.nativeElement,"text-success"),this.renderer.addClass(this.element.nativeElement,"text-info"))}static#t=this.\u0275fac=function(v){return new(v||p)(c.Y36(c.SBq),c.Y36(c.Qsj))};static#e=this.\u0275dir=c.lG2({type:p,selectors:[["","appLoadedStatus",""]],inputs:{loaded:"loaded",total:"total"},features:[c.TTD]})}return p})();function Y(p,R){if(1&p&&(c.TgZ(0,"label",5)(1,"span",6),c._uU(2),c.qZA(),c.TgZ(3,"span",7),c._uU(4," of "),c.qZA(),c.TgZ(5,"span",6),c._uU(6),c.qZA()()),2&p){const u=c.oxw(2);c.Q6J("loaded",u.loaded)("total",u.count),c.xp6(1),c.Q6J("ngClass",u.loaded!=u.count?"page-data":"page-data-full"),c.xp6(1),c.Oqu(u.loaded),c.xp6(3),c.Q6J("ngClass",u.loaded!=u.count?"page-data":"page-data-full"),c.xp6(1),c.Oqu(u.count)}}function L(p,R){if(1&p){const u=c.EpF();c.TgZ(0,"button",8),c.NdJ("click",function(){c.CHM(u);const I=c.oxw(2);return c.KtG(I.more())}),c._uU(1,"More ..."),c.qZA()}}function F(p,R){if(1&p&&(c.TgZ(0,"div",1),c.YNc(1,Y,7,6,"label",2),c.TgZ(2,"div",3),c.YNc(3,L,2,0,"button",4),c.qZA()()),2&p){const u=c.oxw();c.xp6(1),c.Q6J("ngIf",u.loaded!=u.count),c.xp6(2),c.Q6J("ngIf",u.loaded!=u.count)}}let t=(()=>{class p{constructor(){this.loadMore=new h.x}more(){this.loadMore.next(!0)}static#t=this.\u0275fac=function(v){return new(v||p)};static#e=this.\u0275cmp=c.Xpm({type:p,selectors:[["app-pagination"]],inputs:{count:"count",loaded:"loaded"},outputs:{loadMore:"loadMore"},decls:1,vars:1,consts:[["class","row my-4",4,"ngIf"],[1,"row","my-4"],["appLoadedStatus","","class","col-4 mx-2",3,"loaded","total",4,"ngIf"],[1,"col-6"],["mat-raised-button","","color","primary","type","button","class","col-4",3,"click",4,"ngIf"],["appLoadedStatus","",1,"col-4","mx-2",3,"loaded","total"],[3,"ngClass"],[1,"page-data"],["mat-raised-button","","color","primary","type","button",1,"col-4",3,"click"]],template:function(v,I){1&v&&c.YNc(0,F,4,2,"div",0),2&v&&c.Q6J("ngIf",I.loaded>0)},dependencies:[d.mk,d.O5,S.lW,_],styles:[".page-data[_ngcontent-%COMP%]{background-color:transparent;color:var(--text-color);border-radius:10px;opacity:.3}.page-data-full[_ngcontent-%COMP%]{background-color:#009cbf;color:#fff;padding:10px;border-radius:10px}"]})}return p})()}}]);