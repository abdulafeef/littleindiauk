"use strict";(self.webpackChunklittle_india_UI_app=self.webpackChunklittle_india_UI_app||[]).push([[50],{50:(K,Z,a)=>{a.r(Z),a.d(Z,{ReportModule:()=>j});var u=a(6895),h=a(1635);var t=a(4650),g=a(5302),k=a(3359),b=a(5659),M=a(7579),x=a(9057),S=a(6037);let v=(()=>{class o{constructor(e){this.http=e,this.reportEvent=new M.x}getReportBetweenMonthExcel(e){let n=x.b.getReportBetweenMonthExcel;return this.reportEvent.next("Downloading ..."),this.http.postAttachment(n,e)}getReportBetweenWeekExcel(e){let n=x.b.getReportBetweenWeekExcel;return this.reportEvent.next("Downloading ..."),this.http.postAttachment(n,e)}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(S.L))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function T(o,l,e,n,r,i,c){try{var s=o[i](c),m=s.value}catch(z){return void e(z)}s.done?l(m):Promise.resolve(m).then(n,r)}function y(o){return function(){var l=this,e=arguments;return new Promise(function(n,r){var i=o.apply(l,e);function c(m){T(i,n,r,c,s,"next",m)}function s(m){T(i,n,r,c,s,"throw",m)}c(void 0)})}}let _=(()=>{class o{constructor(e){this.rs=e}downloadExcel(e,n){var r=this;return y(function*(){const c=new Blob([e.body],{type:e.body?.type});if(""!=c.type){const s=document.createElement("a");s.setAttribute("style","display:none;"),document.body.appendChild(s),s.download=n,s.href=URL.createObjectURL(c),s.click(),document.body.removeChild(s),r.rs.reportEvent.next("Downloaded")}})()}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(v))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var w=a(4859);function A(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,i=t.oxw();return t.KtG(i.gotoReport(r))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e)}}function B(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,i=t.oxw();return t.KtG(i.gotoReport(r))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e)}}function C(o,l){if(1&o&&(t.TgZ(0,"div",6),t.YNc(1,A,2,1,"button",7),t.YNc(2,B,2,1,"button",8),t.qZA()),2&o){const e=l.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",e==n.reportOption),t.xp6(1),t.Q6J("ngIf",e!=n.reportOption)}}let O=(()=>{class o{constructor(e,n,r,i,c,s){this.fyService=e,this.weekService=n,this.ds=r,this.reportService=i,this.fileService=c,this.router=s,this.reportOptions=["Month","Week"],this.reportOption="Month",this.status=""}ngOnInit(){this.gotoReport(this.reportOption),this.reportEventSubscription=this.reportService.reportEvent.subscribe(e=>{this.status=e})}gotoReport(e){this.reportOption=e,"Month"==this.reportOption?this.router.navigate(["/report","month"]):"Week"==this.reportOption&&this.router.navigate(["/report","week"])}ngOnDestroy(){this.reportEventSubscription?.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(g.m),t.Y36(k.F),t.Y36(b.R),t.Y36(v),t.Y36(_),t.Y36(h.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-report"]],decls:9,vars:2,consts:[[1,"row","p-4"],[1,"col-2","offset-5"],[1,"row"],["class","col-6",4,"ngFor","ngForOf"],[1,"row","form-margin"],[1,"col-12","text-center"],[1,"col-6"],["mat-raised-button","","color","primary","class","col-12",3,"click",4,"ngIf"],["mat-raised-button","","color","secondary","class","col-12",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",1,"col-12",3,"click"],["mat-raised-button","","color","secondary",1,"col-12",3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,C,3,2,"div",3),t.qZA()()(),t.TgZ(4,"div",4),t._UZ(5,"router-outlet"),t.qZA(),t.TgZ(6,"div",2)(7,"label",5),t._uU(8),t.qZA()()),2&n&&(t.xp6(3),t.Q6J("ngForOf",r.reportOptions),t.xp6(5),t.Oqu(r.status))},dependencies:[u.sg,u.O5,h.lC,w.lW]})}return o})();class W{}var p=a(4006),f=a(9549),R=a(4385),F=a(3238);const Y=["betweenMonthForm"];function J(o,l){if(1&o&&(t.TgZ(0,"mat-option",14),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",t.xi3(2,2,e,"yyyy-MMM")," ")}}function q(o,l){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Required"),t.qZA())}function E(o,l){if(1&o&&(t.TgZ(0,"mat-option",14),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",t.xi3(2,2,e,"yyyy-MMM")," ")}}function N(o,l){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Required"),t.qZA())}let U=(()=>{class o{constructor(e,n,r,i,c){this.fyService=e,this.ds=n,this.reportService=r,this.fileService=i,this.router=c,this.monthList=[]}ngOnInit(){this.monthList=this.fyService.getFyMonthList(),this.reportService.reportEvent.next("")}getBetweenMonthReport(){var e=this;if(!this.betweenMonthForm.valid)return;let n=new W,r=new Date(this.betweenMonthForm.value.from),i=new Date(this.betweenMonthForm.value.to);n.year=r.getFullYear(),n.month=r.getMonth()+1,n.addMonth=this.ds.totalMonth(r,i),this.betweenMonthReportSubscription=this.reportService.getReportBetweenMonthExcel(n).subscribe(function(){var c=y(function*(s){var m=`ReportBetweenMonth ${e.ds.formatToMonth(r)} - ${e.ds.formatToMonth(i)}.xlsx`;yield e.fileService.downloadExcel(s,m)});return function(s){return c.apply(this,arguments)}}())}reset(){this.betweenMonthForm.reset(),this.reportService.reportEvent.next("")}ngOnDestroy(){this.betweenMonthReportSubscription?.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(g.m),t.Y36(b.R),t.Y36(v),t.Y36(_),t.Y36(h.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-report-between-month"]],viewQuery:function(n,r){if(1&n&&t.Gf(Y,5),2&n){let i;t.iGM(i=t.CRH())&&(r.betweenMonthForm=i.first)}},decls:25,vars:6,consts:[[1,"row","p-4","form-margin"],[1,"col-4","offset-4"],[1,"text-center","mb-5"],["md-colors","{color:'primary'}",1,"mat-subheading-1"],[1,"col-6","offset-3",3,"ngSubmit"],["betweenMonthForm","ngForm"],["appearance","outline",1,"w-100","mb-4",3,"floatLabel"],["name","from","required","",3,"ngModel"],["sampleField",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["name","to","required","",3,"ngModel"],["type","button","mat-raised-button","","color","accent",1,"col-4","mb-4",3,"click"],["type","submit","mat-raised-button","","color","primary",1,"col-4","offset-4","mb-4"],[3,"value"]],template:function(n,r){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),t._uU(4,"Month Report"),t.qZA()(),t.TgZ(5,"form",4,5),t.NdJ("ngSubmit",function(){return r.getBetweenMonthReport()}),t.TgZ(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"From"),t.qZA(),t.TgZ(10,"mat-select",7,8),t.YNc(12,J,3,5,"mat-option",9),t.qZA(),t.YNc(13,q,2,0,"mat-error",10),t.qZA(),t.TgZ(14,"mat-form-field",6)(15,"mat-label"),t._uU(16,"To"),t.qZA(),t.TgZ(17,"mat-select",11),t.YNc(18,E,3,5,"mat-option",9),t.qZA(),t.YNc(19,N,2,0,"mat-error",10),t.qZA(),t.TgZ(20,"div")(21,"button",12),t.NdJ("click",function(){return r.reset()}),t._uU(22,"Reset"),t.qZA(),t.TgZ(23,"button",13),t._uU(24,"Download"),t.qZA()()()()()),2&n){const i=t.MAs(6);t.xp6(7),t.Q6J("floatLabel","always"),t.xp6(5),t.Q6J("ngForOf",r.monthList),t.xp6(1),t.Q6J("ngIf",i.controls.from.hasError("required")),t.xp6(1),t.Q6J("floatLabel","always"),t.xp6(4),t.Q6J("ngForOf",r.monthList),t.xp6(1),t.Q6J("ngIf",i.controls.to.hasError("required"))}},dependencies:[u.sg,u.O5,p._Y,p.JJ,p.JL,p.Q7,p.On,p.F,f.KE,f.hX,f.TO,w.lW,R.gD,F.ey,u.uU]})}return o})();class L{}var I=a(673);function Q(o,l){if(1&o&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.Q6J("value",e.weekNumber),t.xp6(1),t.lnq(" # ",e.weekNumber," - ",e.from," - ",e.to," ")}}function D(o,l){if(1&o&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.Q6J("value",e.weekNumber),t.xp6(1),t.lnq(" # ",e.weekNumber," - ",e.from," - ",e.to," ")}}const $=[{path:"",component:O,children:[{path:"month",component:U},{path:"week",component:(()=>{class o{constructor(e,n,r,i,c,s){this.fyService=e,this.weekService=n,this.ds=r,this.reportService=i,this.fileService=c,this.router=s,this.weekList=[]}ngOnInit(){this.betweenWeekForm=new p.cw({from:new p.NI(null,p.kI.required),to:new p.NI(null,p.kI.required)}),this.weekSubscription=this.weekService.getWeekList().subscribe(e=>{e?.response?.status==I.s.success?this.weekList=e.list:alert(e?.response?.message)}),this.reportService.reportEvent.next("")}getBetweenWeekReport(){var e=this;if(!this.betweenWeekForm.valid)return;let n=new L,r=this.fyService.getFyLocal();n.financialYearId=r.id,n.fromWeekNumber=this.betweenWeekForm.value.from,n.toWeekNumber=this.betweenWeekForm.value.to,this.betweenWeekReportSubscription=this.reportService.getReportBetweenWeekExcel(n).subscribe(function(){var i=y(function*(c){var s=`ReportBetweenWeek-#${n.fromWeekNumber}-#${n.toWeekNumber}.xlsx`;yield e.fileService.downloadExcel(c,s)});return function(c){return i.apply(this,arguments)}}())}reset(){this.betweenWeekForm.reset(),this.reportService.reportEvent.next("")}ngOnDestroy(){this.weekSubscription.unsubscribe(),this.betweenWeekReportSubscription?.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(g.m),t.Y36(k.F),t.Y36(b.R),t.Y36(v),t.Y36(_),t.Y36(h.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-report-between-week"]],decls:21,vars:3,consts:[[1,"row","p-4","form-margin"],[1,"col-6","offset-3"],[1,"text-center","mb-5"],[1,"mat-subheading-1"],[1,"col-6","offset-3",3,"formGroup","ngSubmit"],["appearance","outline",1,"w-100","mb-4"],["formControlName","from"],[3,"value",4,"ngFor","ngForOf"],["formControlName","to"],["type","button","mat-raised-button","","color","accent",1,"col-4","mb-4",3,"click"],["type","submit","mat-raised-button","","color","primary",1,"col-4","offset-4","mb-4"],[3,"value"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),t._uU(4,"Week Report"),t.qZA()(),t.TgZ(5,"form",4),t.NdJ("ngSubmit",function(){return r.getBetweenWeekReport()}),t.TgZ(6,"mat-form-field",5)(7,"mat-label"),t._uU(8,"From"),t.qZA(),t.TgZ(9,"mat-select",6),t.YNc(10,Q,2,4,"mat-option",7),t.qZA()(),t.TgZ(11,"mat-form-field",5)(12,"mat-label"),t._uU(13,"To"),t.qZA(),t.TgZ(14,"mat-select",8),t.YNc(15,D,2,4,"mat-option",7),t.qZA()(),t.TgZ(16,"div")(17,"button",9),t.NdJ("click",function(){return r.reset()}),t._uU(18,"Reset"),t.qZA(),t.TgZ(19,"button",10),t._uU(20,"Download"),t.qZA()()()()()),2&n&&(t.xp6(5),t.Q6J("formGroup",r.betweenWeekForm),t.xp6(5),t.Q6J("ngForOf",r.weekList),t.xp6(5),t.Q6J("ngForOf",r.weekList))},dependencies:[u.sg,p._Y,p.JJ,p.JL,p.sg,p.u,f.KE,f.hX,w.lW,R.gD,F.ey]})}return o})()}]}];let G=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[h.Bz.forChild($)]})}return o})();var X=a(529);let j=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[u.ez,X.JF,h.Bz,G,p.u5,p.UX,f.lN,w.ot,R.LD]})}return o})()}}]);