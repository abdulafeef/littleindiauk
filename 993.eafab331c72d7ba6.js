"use strict";(self.webpackChunklittle_india_UI_app=self.webpackChunklittle_india_UI_app||[]).push([[993],{874:(G,Z,s)=>{s.d(Z,{w:()=>p});class p{constructor(){this.required=!0,this.pageNumber=1,this.pageSize=20}}},322:(G,Z,s)=>{s.r(Z),s.d(Z,{PayrollModule:()=>na});var p=s(6895),i=s(4006),N=s(7367),x=s(2346),M=s(529),D=s(1635),c=s(7155),C=s(9172),T=s(1654),d=s(673),F=s(7842);class u{}class h{}var e=s(4650),_=s(5412),f=s(9057),$=s(6037);let J=(()=>{class a{constructor(t){this.http=t}getEmployeeList(t){return this.http.post(f.bU.getEmployeeList,t)}getEmployeeById(t){let o=f.lp.getByIdUrl(f.hh.employee);return o=o.replace(/{id}/gi,t),this.http.get(o)}getEmployeeDetailById(t){let o=f.lp.getDetailByIdUrl(f.hh.employee);return o=o.replace(/{id}/gi,t),this.http.get(o)}getEmployeeManageData(){let t=f.lp.getManageData(f.hh.employee);return this.http.get(t)}addEmployee(t){let o=f.lp.add(f.hh.employee);return this.http.post(o,t)}editEmployee(t){let o=f.lp.edit(f.hh.employee);return this.http.post(o,t)}addEmployeeDetail(t){let o=f.lp.add(f.hh.employee)+"/detail";return this.http.post(o,t)}deleteEmployee(t){let o=f.lp.deleteById(f.hh.employee);return o=o.replace(/{id}/gi,t),this.http.post(o,null)}static#e=this.\u0275fac=function(o){return new(o||a)(e.LFG($.L))};static#t=this.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var I=s(5659),A=s(7706),w=s(4144),g=s(9549),y=s(9602),b=s(4385),q=s(3238),S=s(7579),R=s(4859);function re(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"button",1),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.submitItem())}),e._uU(1,"Add"),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",t.disabled)}}function se(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"button",1),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.submitItem())}),e._uU(1,"Edit"),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",t.disabled)}}let U=(()=>{class a{constructor(){this.disabled=!1,this.isAdd=!1,this.isEdit=!1,this.submitEvent=new S.x}submitItem(){this.submitEvent.next()}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-crud-button"]],inputs:{disabled:"disabled",isAdd:"isAdd",isEdit:"isEdit"},outputs:{submitEvent:"submitEvent"},decls:2,vars:2,consts:[["type","submit","mat-raised-button","","color","primary","class","col-12 my-2",3,"disabled","click",4,"ngIf"],["type","submit","mat-raised-button","","color","primary",1,"col-12","my-2",3,"disabled","click"]],template:function(o,n){1&o&&(e.YNc(0,re,2,1,"button",0),e.YNc(1,se,2,1,"button",0)),2&o&&(e.Q6J("ngIf",n.isAdd),e.xp6(1),e.Q6J("ngIf",n.isEdit))},dependencies:[p.O5,R.lW]})}return a})();function me(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"button",2),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.resetItem())}),e._uU(1,"Reset"),e.qZA()}}function ce(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"button",3),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.resetItem())}),e._uU(1,"Reset"),e.qZA()}}let k=(()=>{class a{constructor(){this.resetEvent=new S.x,this.isReset=!0}resetItem(){this.resetEvent.next()}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-reset-button"]],inputs:{isReset:"isReset"},outputs:{resetEvent:"resetEvent"},decls:2,vars:2,consts:[["type","reset","mat-raised-button","","color","accent","class","col-12 my-2",3,"click",4,"ngIf"],["type","button","mat-raised-button","","color","accent","class","col-12 my-2",3,"click",4,"ngIf"],["type","reset","mat-raised-button","","color","accent",1,"col-12","my-2",3,"click"],["type","button","mat-raised-button","","color","accent",1,"col-12","my-2",3,"click"]],template:function(o,n){1&o&&(e.YNc(0,me,2,0,"button",0),e.YNc(1,ce,2,0,"button",1)),2&o&&(e.Q6J("ngIf",n.isReset),e.xp6(1),e.Q6J("ngIf",!n.isReset))},dependencies:[p.O5,R.lW]})}return a})();function de(a,l){if(1&a&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function pe(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",1)(1,"form",2),e.NdJ("submit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addEmployee())}),e.TgZ(2,"div",3)(3,"mat-form-field",4)(4,"mat-label"),e._uU(5,"First Name"),e.qZA(),e._UZ(6,"input",5),e.qZA(),e.TgZ(7,"mat-form-field",6)(8,"mat-label"),e._uU(9,"Middle Name"),e.qZA(),e._UZ(10,"input",7),e.qZA(),e.TgZ(11,"mat-form-field",8)(12,"mat-label"),e._uU(13,"Last Name"),e.qZA(),e._UZ(14,"input",9),e.qZA()(),e.TgZ(15,"div",3)(16,"mat-form-field",10)(17,"mat-label"),e._uU(18,"Nick Name"),e.qZA(),e._UZ(19,"input",11),e.qZA(),e.TgZ(20,"mat-form-field",8)(21,"mat-label"),e._uU(22,"Code"),e.qZA(),e._UZ(23,"input",12),e.qZA()(),e.TgZ(24,"div",3)(25,"mat-form-field",10)(26,"mat-label"),e._uU(27,"Group"),e.qZA(),e.TgZ(28,"mat-select",13),e.YNc(29,de,2,2,"mat-option",14),e.qZA()(),e.TgZ(30,"mat-form-field",15)(31,"mat-label"),e._uU(32,"Joining Date"),e.qZA(),e._UZ(33,"input",16)(34,"mat-datepicker-toggle",17)(35,"mat-datepicker",null,18),e.qZA()(),e.TgZ(37,"div",19)(38,"app-reset-button",20),e.NdJ("resetEvent",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.reset())}),e.qZA(),e._UZ(39,"app-crud-button",21),e.qZA()()()}if(2&a){const t=e.MAs(36),o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.manageForm),e.xp6(28),e.Q6J("ngForOf",o.manageData.employeeGroupList),e.xp6(4),e.Q6J("matDatepicker",t),e.xp6(1),e.Q6J("for",t),e.xp6(5),e.Q6J("isAdd",!0)("disabled",o.isProcessing)}}let ue=(()=>{class a{constructor(t,o,n){this.dialogRef=t,this.employeeService=o,this.ds=n,this.manageData=new h,this.isLoaded=!1,this.isProcessing=!1}ngOnInit(){this.manageForm=new i.cw({firstName:new i.NI(null,[i.kI.required]),middleName:new i.NI(null),lastName:new i.NI(null),nickName:new i.NI(null,[i.kI.required]),code:new i.NI(null,[i.kI.required]),employeeGroupId:new i.NI(null,[i.kI.required]),joiningDate:new i.NI(null,[i.kI.required]),leavingDate:new i.NI(null)}),this.isLoaded=!1,this.sub=this.employeeService.getEmployeeManageData().subscribe(t=>{this.manageData=t.item,this.isLoaded=!0})}addEmployee(){if(!this.manageForm.valid)return void this.manageForm.markAllAsTouched();if(!confirm("Are you sure ?"))return;let t=new u;t.firstName=this.manageForm.value.firstName,t.middleName=this.manageForm.value.middleName,t.lastName=this.manageForm.value.lastName,t.nickName=this.manageForm.value.nickName,t.code=this.manageForm.value.code,t.employeeGroupId=this.manageForm.value.employeeGroupId,t.firstName=this.manageForm.value.firstName,t.firstName=this.manageForm.value.firstName,t.joiningDate=this.ds.formatToRequest(this.manageForm.value.joiningDate),null!=this.manageForm.value.leavingDate&&(t.leavingDate=this.ds.formatToRequest(this.manageForm.value.leavingDate)),this.isProcessing=!0,this.sub=this.employeeService.addEmployee(t).subscribe(o=>{this.isProcessing=!1,o?.status==d.s.success?(this.reset(),this.closeDialog()):alert(o?.message)})}reset(){this.manageForm.reset()}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}static#e=this.\u0275fac=function(o){return new(o||a)(e.Y36(_.so),e.Y36(J),e.Y36(I.R))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-add-employee"]],decls:3,vars:1,consts:[["mat-dialog-content","","class","row",4,"ngIf"],["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup","submit"],[1,"row","form-group"],[1,"form-field","col-5"],["type","text","matInput","","formControlName","firstName"],[1,"form-field","col-3"],["type","text","matInput","","formControlName","middleName"],[1,"form-field","col-4"],["type","text","matInput","","formControlName","lastName"],[1,"form-field","col-8"],["type","text","matInput","","formControlName","nickName"],["type","text","matInput","","formControlName","code"],["formControlName","employeeGroupId"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"col-4","form-field"],["matInput","","formControlName","joiningDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"row"],[1,"col-2",3,"resetEvent"],[1,"col-2","offset-8",3,"isAdd","disabled"],[3,"value"]],template:function(o,n){1&o&&(e.TgZ(0,"app-form-heading"),e._uU(1," Add Employee\n"),e.qZA(),e.YNc(2,pe,40,6,"div",0)),2&o&&(e.xp6(2),e.Q6J("ngIf",n.isLoaded))},dependencies:[p.sg,p.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,A.H,w.Nt,g.KE,g.hX,g.R9,y.Mq,y.hl,y.nW,_.xY,b.gD,q.ey,U,k]})}return a})(),Q=(()=>{class a{static#e=this.areYouSure="Are you sure";static#t=this.areYouSureTo="Are you sure ?";static confirmAdd(t){return this.areYouSure+" to add "+t+" ?"}static confirmEdit(t){return this.areYouSure+" to edit "+t+" ?"}static confirmDelete(t){return this.areYouSure+" to delete "+t+" ?"}static confirmRemove(t){return this.areYouSure+" to remove "+t+" ?"}static confirmActivate(t){return this.areYouSure+" to activate "+t+" ?"}static confirmInactivate(t){return this.areYouSure+" to inactivate "+t+" ?"}static confirmClear(t){return this.areYouSure+" to clear "+t+" ?"}static confirmAddUserRole(t,o){return this.areYouSure+" to add role "+o+" to user "+t+" ?"}static confirmRemoveUserRole(t,o){return this.areYouSure+" to remove role "+o+" to user "+t+" ?"}static confirmChangeUsername(t,o){return this.areYouSure+" to change username from "+t+" to "+o+" ?"}static confirmChangeEmail(t,o){return this.areYouSure+" to change email from "+t+" to "+o+" ?"}static revokeUser(t){return this.areYouSure+" to revoke user "+t+" ?"}static#a=this.downloading="Downloading ...";static#o=this.downloaded=""}return a})();var j=s(3900);class V{constructor(){this.employeeContactList=[],this.employeeAddressList=[]}}const H={home:"Home",work:"Work"},P={mobile:"Mobile",phone:"Phone",email:"Email"},z={male:"Male",female:"FeMale"};var O=s(3763),W=s(455);function fe(a,l){if(1&a&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function _e(a,l){if(1&a&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function ge(a,l){if(1&a&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function ye(a,l){if(1&a&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function he(a,l){if(1&a&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function ve(a,l){if(1&a&&(e.TgZ(0,"div",42)(1,"div",5)(2,"mat-form-field",10)(3,"mat-label"),e._uU(4,"Type"),e.qZA(),e.TgZ(5,"mat-select",43),e.YNc(6,he,2,2,"mat-option",16),e.qZA()(),e.TgZ(7,"mat-form-field",34)(8,"mat-label"),e._uU(9,"Contact"),e.qZA(),e._UZ(10,"input",44),e.qZA()()()),2&a){const t=l.index,o=e.oxw(2);e.Q6J("formGroupName",t),e.xp6(6),e.Q6J("ngForOf",o.contactTypeList)}}function Ze(a,l){if(1&a&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function xe(a,l){if(1&a&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Ce(a,l){if(1&a&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Te(a,l){if(1&a&&(e.TgZ(0,"div",42)(1,"div",36)(2,"mat-form-field",10)(3,"mat-label"),e._uU(4,"Type"),e.qZA(),e.TgZ(5,"mat-select",45),e.YNc(6,Ze,2,2,"mat-option",16),e.qZA()(),e.TgZ(7,"mat-form-field",34)(8,"mat-label"),e._uU(9,"Building"),e.qZA(),e._UZ(10,"input",46),e.qZA()(),e.TgZ(11,"div",5)(12,"mat-form-field",10)(13,"mat-label"),e._uU(14,"Street"),e.qZA(),e._UZ(15,"input",47),e.qZA(),e.TgZ(16,"mat-form-field",10)(17,"mat-label"),e._uU(18,"City"),e.qZA(),e._UZ(19,"input",48),e.qZA(),e.TgZ(20,"mat-form-field",10)(21,"mat-label"),e._uU(22,"PinCode"),e.qZA(),e._UZ(23,"input",49),e.qZA()(),e.TgZ(24,"div",5)(25,"mat-form-field",34)(26,"mat-label"),e._uU(27,"Country"),e.qZA(),e.TgZ(28,"mat-select",50),e.YNc(29,xe,2,2,"mat-option",16),e.qZA()(),e.TgZ(30,"mat-form-field",34)(31,"mat-label"),e._uU(32,"State"),e.qZA(),e.TgZ(33,"mat-select",51),e._UZ(34,"mat-option",33),e.YNc(35,Ce,2,2,"mat-option",16),e.qZA()()()()),2&a){const t=l.index,o=e.oxw(2);e.Q6J("formGroupName",t),e.xp6(6),e.Q6J("ngForOf",o.addressTypeList),e.xp6(23),e.Q6J("ngForOf",o.manageData.countryList),e.xp6(6),e.Q6J("ngForOf",o.getFilteredState(t))}}function Ne(a,l){if(1&a&&(e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"form",4)(4,"div",5)(5,"mat-form-field",6)(6,"mat-label"),e._uU(7,"First Name"),e.qZA(),e._UZ(8,"input",7),e.qZA(),e.TgZ(9,"mat-form-field",8)(10,"mat-label"),e._uU(11,"Middle Name"),e.qZA(),e._UZ(12,"input",9),e.qZA(),e.TgZ(13,"mat-form-field",10)(14,"mat-label"),e._uU(15,"Last Name"),e.qZA(),e._UZ(16,"input",11),e.qZA()(),e.TgZ(17,"div",5)(18,"mat-form-field",12)(19,"mat-label"),e._uU(20,"Nick Name"),e.qZA(),e._UZ(21,"input",13),e.qZA(),e.TgZ(22,"mat-form-field",10)(23,"mat-label"),e._uU(24,"Code"),e.qZA(),e._UZ(25,"input",14),e.qZA()(),e.TgZ(26,"div",5)(27,"mat-form-field",10)(28,"mat-label"),e._uU(29,"Group"),e.qZA(),e.TgZ(30,"mat-select",15),e.YNc(31,fe,2,2,"mat-option",16),e.qZA()(),e.TgZ(32,"mat-form-field",17)(33,"mat-label"),e._uU(34,"Joining Date"),e.qZA(),e._UZ(35,"input",18)(36,"mat-datepicker-toggle",19)(37,"mat-datepicker",null,20),e.qZA(),e.TgZ(39,"mat-form-field",17)(40,"mat-label"),e._uU(41,"Leaving Date"),e.qZA(),e._UZ(42,"input",21)(43,"mat-datepicker-toggle",19)(44,"mat-datepicker",null,22),e.qZA()(),e.TgZ(46,"div",5)(47,"mat-slide-toggle",23),e._uU(48,"Active"),e.qZA()()()(),e.TgZ(49,"div",24)(50,"form",25)(51,"div",26)(52,"label"),e._uU(53,"General Information"),e.qZA()(),e.TgZ(54,"div",27)(55,"mat-form-field",6)(56,"mat-label"),e._uU(57,"Designation"),e.qZA(),e.TgZ(58,"mat-select",28),e.YNc(59,_e,2,2,"mat-option",16),e.qZA()(),e.TgZ(60,"mat-form-field",8)(61,"mat-label"),e._uU(62,"Gender"),e.qZA(),e.TgZ(63,"mat-select",29),e.YNc(64,ge,2,2,"mat-option",16),e.qZA()(),e.TgZ(65,"mat-form-field",17)(66,"mat-label"),e._uU(67,"DOB"),e.qZA(),e._UZ(68,"input",30)(69,"mat-datepicker-toggle",19)(70,"mat-datepicker",null,31),e.qZA()(),e.TgZ(72,"div",27)(73,"mat-form-field",10)(74,"mat-label"),e._uU(75,"Blood Group"),e.qZA(),e.TgZ(76,"mat-select",32),e._UZ(77,"mat-option",33),e.YNc(78,ye,2,2,"mat-option",16),e.qZA()(),e.TgZ(79,"mat-form-field",34)(80,"mat-label"),e._uU(81,"Insurance Number"),e.qZA(),e._UZ(82,"input",35),e.qZA()(),e.TgZ(83,"div",36)(84,"div",37)(85,"label"),e._uU(86,"Contact"),e.qZA()()(),e.TgZ(87,"div",38),e.YNc(88,ve,11,2,"div",39),e.qZA(),e.TgZ(89,"div",36)(90,"div",37)(91,"label"),e._uU(92,"Address"),e.qZA()()(),e.TgZ(93,"div",40),e.YNc(94,Te,36,4,"div",39),e.qZA()()()()()),2&a){const t=e.MAs(38),o=e.MAs(45),n=e.MAs(71),r=e.oxw();e.xp6(3),e.Q6J("formGroup",r.manageForm),e.xp6(28),e.Q6J("ngForOf",r.manageData.employeeGroupList),e.xp6(4),e.Q6J("matDatepicker",t),e.xp6(1),e.Q6J("for",t),e.xp6(6),e.Q6J("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(7),e.Q6J("formGroup",r.manageDetailForm),e.xp6(9),e.Q6J("ngForOf",r.manageData.employeeDesignationList),e.xp6(5),e.Q6J("ngForOf",r.genderList),e.xp6(4),e.Q6J("matDatepicker",n),e.xp6(1),e.Q6J("for",n),e.xp6(9),e.Q6J("ngForOf",r.manageData.bloodGroupList),e.xp6(10),e.Q6J("ngForOf",r.contactListControls),e.xp6(6),e.Q6J("ngForOf",r.addressListControls)}}let Ie=(()=>{class a{constructor(t,o,n,r,m,v){this.dialogRef=t,this.employeeService=o,this.ds=n,this.snackBarService=r,this.data=m,this.dialog=v,this.employee=new V,this.manageData=new h,this.genderList=[],this.contactTypeList=[],this.addressTypeList=[],this.isLoaded=!1,this.isProcessing=!1}get contactListControls(){return this.manageDetailForm.get("contactList").controls}get addressListControls(){return this.manageDetailForm.get("addressList").controls}ngOnInit(){this.manageForm=new i.cw({firstName:new i.NI(null,[i.kI.required]),middleName:new i.NI(null),lastName:new i.NI(null),nickName:new i.NI(null,[i.kI.required]),code:new i.NI(null,[i.kI.required]),employeeGroupId:new i.NI(null,[i.kI.required]),joiningDate:new i.NI(null,[i.kI.required]),leavingDate:new i.NI(null),active:new i.NI(null)}),this.manageDetailForm=new i.cw({generalInfo:new i.cw({employeeDesignationId:new i.NI(null,[i.kI.required]),gender:new i.NI(null,[i.kI.required]),dOB:new i.NI(null,[i.kI.required]),bloodGroupId:new i.NI(null),insuranceNumber:new i.NI(null,[i.kI.required])}),contactList:new i.Oe([]),addressList:new i.Oe([])}),this.isLoaded=!1,this.sub=this.employeeService.getEmployeeManageData().pipe((0,j.w)(t=>(this.manageData=t.item,this.genderList=Object.values(z),this.contactTypeList=Object.values(P),this.addressTypeList=Object.values(H),this.employeeService.getEmployeeDetailById(this.data.id)))).subscribe(t=>{if(this.employee=t.item,this.manageForm.patchValue({firstName:this.employee.firstName,middleName:this.employee.middleName,lastName:this.employee.lastName,nickName:this.employee.nickName,code:this.employee.code,employeeGroupId:this.employee.employeeGroup.id,joiningDate:this.ds.responseFormatToDate(this.employee.joiningDate),leavingDate:null!=this.employee.leavingDate?this.ds.responseFormatToDate(this.employee.leavingDate):null,active:this.employee.active}),null!=this.employee.employeeGeneralInfo&&this.manageDetailForm.patchValue({generalInfo:{employeeDesignationId:this.employee.employeeGeneralInfo.employeeDesignation.id,gender:this.employee.employeeGeneralInfo.gender,dOB:this.ds.responseFormatToDate(this.employee.employeeGeneralInfo.dob),bloodGroupId:this.employee.employeeGeneralInfo.bloodGroup?.id??"",insuranceNumber:this.employee.employeeGeneralInfo.insuranceNumber}}),this.employee.employeeContactList.length>0)for(var o of this.employee.employeeContactList)this.manageDetailForm.get("contactList").push(new i.cw({contactType:new i.NI(o.contactType,i.kI.required),contact:new i.NI(o.contact,i.kI.required)}));if(this.employee.employeeAddressList.length>0)for(var n of this.employee.employeeAddressList)this.manageDetailForm.get("addressList").push(new i.cw({addressType:new i.NI(n.addressType,i.kI.required),building:new i.NI(n.building,i.kI.required),street1:new i.NI(n.street1,i.kI.required),street2:new i.NI(n.street2),pinCode:new i.NI(n.pinCode),countryId:new i.NI(n.country.id,i.kI.required),stateId:new i.NI(n.state?.id??"")}));this.isLoaded=!0})}getFilteredState(t){let o=this.addressListControls.at(t)?.value.countryId;return null!=o?(console.log(this.manageData),this.manageData.stateList.filter(n=>n.country.id==o)):[]}ngOnDestroy(){this.sub?.unsubscribe()}static#e=this.\u0275fac=function(o){return new(o||a)(e.Y36(_.so),e.Y36(J),e.Y36(I.R),e.Y36(O.c),e.Y36(_.WI),e.Y36(_.uw))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-view-employee"]],decls:3,vars:1,consts:[["mat-dialog-content","","class","row m-0 p-3",4,"ngIf"],["mat-dialog-content","",1,"row","m-0","p-3"],[1,"row"],[1,"col-6"],[1,"my-2",3,"formGroup"],[1,"row","form-group"],[1,"form-field","col-5"],["type","text","matInput","","formControlName","firstName"],[1,"form-field","col-3"],["type","text","matInput","","formControlName","middleName"],[1,"form-field","col-4"],["type","text","matInput","","formControlName","lastName"],[1,"form-field","col-8"],["type","text","matInput","","formControlName","nickName"],["type","text","matInput","","formControlName","code"],["formControlName","employeeGroupId"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"col-4","form-field"],["matInput","","formControlName","joiningDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker1",""],["matInput","","formControlName","leavingDate",3,"matDatepicker"],["picker2",""],["formControlName","active",1,"form-field","col-2","offset-10","text-start"],[1,"col-6","ps-4"],[1,"",3,"formGroup"],[1,"row","form-group","mb-4"],["formGroupName","generalInfo",1,"row","form-group"],["formControlName","employeeDesignationId"],["formControlName","gender"],["matInput","","formControlName","dOB",3,"matDatepicker"],["picker3",""],["formControlName","bloodGroupId"],["value",""],[1,"form-field","col-6"],["type","text","matInput","","formControlName","insuranceNumber"],[1,"row","form-group","mt-4"],[1,"col-4"],["formArrayName","contactList",1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],["formArrayName","addressList",1,"mt-3"],[3,"value"],[1,"col-12","form-group",3,"formGroupName"],["formControlName","contactType"],["type","text","matInput","","formControlName","contact"],["formControlName","addressType"],["type","text","matInput","","formControlName","building"],["type","text","matInput","","formControlName","street1"],["type","text","matInput","","formControlName","street2"],["type","text","matInput","","formControlName","pinCode"],["formControlName","countryId"],["formControlName","stateId"]],template:function(o,n){1&o&&(e.TgZ(0,"app-form-heading"),e._uU(1," View Employee\n"),e.qZA(),e.YNc(2,Ne,95,14,"div",0)),2&o&&(e.xp6(2),e.Q6J("ngIf",n.isLoaded))},dependencies:[p.sg,p.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,A.H,w.Nt,g.KE,g.hX,g.R9,y.Mq,y.hl,y.nW,_.xY,b.gD,q.ey,W.Rr]})}return a})();class Ae{}class we{}class be{}class qe{}class Ee{}var De=s(7392);function Fe(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"button",2),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onAction())}),e.TgZ(1,"mat-icon"),e._uU(2,"visibility"),e.qZA()()}}function Se(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"button",2),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onAction())}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA()()}}function Le(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"button",2),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onAction())}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA()()}}function Je(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"button",3),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onAction())}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA()()}}let L=(()=>{class a{constructor(){this.isView=!1,this.isAdd=!1,this.isEdit=!1,this.isDelete=!1,this.actionEvent=new S.x}onAction(){this.actionEvent.next(this.item)}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-action-icon"]],inputs:{item:"item",isView:"isView",isAdd:"isAdd",isEdit:"isEdit",isDelete:"isDelete"},outputs:{actionEvent:"actionEvent"},decls:4,vars:4,consts:[["type","button","mat-mini-fab","","color","primary","class","ms-1",3,"click",4,"ngIf"],["type","button","mat-mini-fab","","color","warn","class","ms-1",3,"click",4,"ngIf"],["type","button","mat-mini-fab","","color","primary",1,"ms-1",3,"click"],["type","button","mat-mini-fab","","color","warn",1,"ms-1",3,"click"]],template:function(o,n){1&o&&(e.YNc(0,Fe,3,0,"button",0),e.YNc(1,Se,3,0,"button",0),e.YNc(2,Le,3,0,"button",0),e.YNc(3,Je,3,0,"button",1)),2&o&&(e.Q6J("ngIf",n.isView),e.xp6(1),e.Q6J("ngIf",n.isAdd),e.xp6(1),e.Q6J("ngIf",n.isEdit),e.xp6(1),e.Q6J("ngIf",n.isDelete))},dependencies:[p.O5,R.nh,De.Hw]})}return a})();function Ue(a,l){if(1&a&&(e.TgZ(0,"mat-option",46),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function ke(a,l){if(1&a&&(e.TgZ(0,"mat-option",46),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Qe(a,l){if(1&a&&(e.TgZ(0,"mat-option",46),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Oe(a,l){if(1&a&&(e.TgZ(0,"mat-option",46),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Ye(a,l){if(1&a&&(e.TgZ(0,"mat-option",46),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Ge(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",47)(1,"div",5)(2,"mat-form-field",10)(3,"mat-label"),e._uU(4,"Type"),e.qZA(),e.TgZ(5,"mat-select",48),e.YNc(6,Ye,2,2,"mat-option",16),e.qZA()(),e.TgZ(7,"mat-form-field",37)(8,"mat-label"),e._uU(9,"Contact"),e.qZA(),e._UZ(10,"input",49),e.qZA(),e.TgZ(11,"div",50)(12,"app-action-icon",51),e.NdJ("actionEvent",function(){const r=e.CHM(t).index,m=e.oxw(2);return e.KtG(m.deleteContactItem(r))}),e.qZA()()()()}if(2&a){const t=l.index,o=e.oxw(2);e.Q6J("formGroupName",t),e.xp6(6),e.Q6J("ngForOf",o.contactTypeList),e.xp6(6),e.Q6J("isDelete",!0)("item",t)}}function Me(a,l){if(1&a&&(e.TgZ(0,"mat-option",46),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Re(a,l){if(1&a&&(e.TgZ(0,"mat-option",46),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function He(a,l){if(1&a&&(e.TgZ(0,"mat-option",46),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Pe(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",47)(1,"div",39)(2,"mat-form-field",10)(3,"mat-label"),e._uU(4,"Type"),e.qZA(),e.TgZ(5,"mat-select",52),e.YNc(6,Me,2,2,"mat-option",16),e.qZA()(),e.TgZ(7,"mat-form-field",37)(8,"mat-label"),e._uU(9,"Building"),e.qZA(),e._UZ(10,"input",53),e.qZA(),e.TgZ(11,"div",50)(12,"app-action-icon",51),e.NdJ("actionEvent",function(){const r=e.CHM(t).index,m=e.oxw(2);return e.KtG(m.deleteAddressItem(r))}),e.qZA()()(),e.TgZ(13,"div",5)(14,"mat-form-field",10)(15,"mat-label"),e._uU(16,"Street"),e.qZA(),e._UZ(17,"input",54),e.qZA(),e.TgZ(18,"mat-form-field",10)(19,"mat-label"),e._uU(20,"City"),e.qZA(),e._UZ(21,"input",55),e.qZA(),e.TgZ(22,"mat-form-field",10)(23,"mat-label"),e._uU(24,"PinCode"),e.qZA(),e._UZ(25,"input",56),e.qZA()(),e.TgZ(26,"div",5)(27,"mat-form-field",37)(28,"mat-label"),e._uU(29,"Country"),e.qZA(),e.TgZ(30,"mat-select",57),e.NdJ("selectionChange",function(){const r=e.CHM(t).index,m=e.oxw(2);return e.KtG(m.onCountryChange(r))}),e.YNc(31,Re,2,2,"mat-option",16),e.qZA()(),e.TgZ(32,"mat-form-field",37)(33,"mat-label"),e._uU(34,"State"),e.qZA(),e.TgZ(35,"mat-select",58),e._UZ(36,"mat-option",36),e.YNc(37,He,2,2,"mat-option",16),e.qZA()()()()}if(2&a){const t=l.index,o=e.oxw(2);e.Q6J("formGroupName",t),e.xp6(6),e.Q6J("ngForOf",o.addressTypeList),e.xp6(6),e.Q6J("isDelete",!0)("item",t),e.xp6(19),e.Q6J("ngForOf",o.manageData.countryList),e.xp6(6),e.Q6J("ngForOf",o.getFilteredState(t))}}function Be(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"form",4),e.NdJ("submit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.editEmployee())}),e.TgZ(4,"div",5)(5,"mat-form-field",6)(6,"mat-label"),e._uU(7,"First Name"),e.qZA(),e._UZ(8,"input",7),e.qZA(),e.TgZ(9,"mat-form-field",8)(10,"mat-label"),e._uU(11,"Middle Name"),e.qZA(),e._UZ(12,"input",9),e.qZA(),e.TgZ(13,"mat-form-field",10)(14,"mat-label"),e._uU(15,"Last Name"),e.qZA(),e._UZ(16,"input",11),e.qZA()(),e.TgZ(17,"div",5)(18,"mat-form-field",12)(19,"mat-label"),e._uU(20,"Nick Name"),e.qZA(),e._UZ(21,"input",13),e.qZA(),e.TgZ(22,"mat-form-field",10)(23,"mat-label"),e._uU(24,"Code"),e.qZA(),e._UZ(25,"input",14),e.qZA()(),e.TgZ(26,"div",5)(27,"mat-form-field",10)(28,"mat-label"),e._uU(29,"Group"),e.qZA(),e.TgZ(30,"mat-select",15),e.YNc(31,Ue,2,2,"mat-option",16),e.qZA()(),e.TgZ(32,"mat-form-field",17)(33,"mat-label"),e._uU(34,"Joining Date"),e.qZA(),e._UZ(35,"input",18)(36,"mat-datepicker-toggle",19)(37,"mat-datepicker",null,20),e.qZA(),e.TgZ(39,"mat-form-field",17)(40,"mat-label"),e._uU(41,"Leaving Date"),e.qZA(),e._UZ(42,"input",21)(43,"mat-datepicker-toggle",19)(44,"mat-datepicker",null,22),e.qZA()(),e.TgZ(46,"div",5)(47,"mat-slide-toggle",23),e._uU(48,"Active"),e.qZA()(),e.TgZ(49,"div",24)(50,"app-reset-button",25),e.NdJ("resetEvent",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.resetBasic())}),e.qZA(),e._UZ(51,"app-crud-button",26),e.qZA()()(),e.TgZ(52,"div",27)(53,"form",28),e.NdJ("submit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addEmployeeDetail())}),e.TgZ(54,"div",29)(55,"label"),e._uU(56,"General Information"),e.qZA()(),e.TgZ(57,"div",30)(58,"mat-form-field",6)(59,"mat-label"),e._uU(60,"Designation"),e.qZA(),e.TgZ(61,"mat-select",31),e.YNc(62,ke,2,2,"mat-option",16),e.qZA()(),e.TgZ(63,"mat-form-field",8)(64,"mat-label"),e._uU(65,"Gender"),e.qZA(),e.TgZ(66,"mat-select",32),e.YNc(67,Qe,2,2,"mat-option",16),e.qZA()(),e.TgZ(68,"mat-form-field",17)(69,"mat-label"),e._uU(70,"DOB"),e.qZA(),e._UZ(71,"input",33)(72,"mat-datepicker-toggle",19)(73,"mat-datepicker",null,34),e.qZA()(),e.TgZ(75,"div",30)(76,"mat-form-field",10)(77,"mat-label"),e._uU(78,"Blood Group"),e.qZA(),e.TgZ(79,"mat-select",35),e._UZ(80,"mat-option",36),e.YNc(81,Oe,2,2,"mat-option",16),e.qZA()(),e.TgZ(82,"mat-form-field",37)(83,"mat-label"),e._uU(84,"Insurance Number"),e.qZA(),e._UZ(85,"input",38),e.qZA()(),e.TgZ(86,"div",39)(87,"div",40)(88,"label"),e._uU(89,"Contact"),e.qZA()(),e.TgZ(90,"div",41)(91,"app-action-icon",42),e.NdJ("actionEvent",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addContactItemForm())}),e.qZA()()(),e.TgZ(92,"div",43),e.YNc(93,Ge,13,4,"div",44),e.qZA(),e.TgZ(94,"div",39)(95,"div",40)(96,"label"),e._uU(97,"Address"),e.qZA()(),e.TgZ(98,"div",41)(99,"app-action-icon",42),e.NdJ("actionEvent",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addAddressItemForm())}),e.qZA()()(),e.TgZ(100,"div",45),e.YNc(101,Pe,38,6,"div",44),e.qZA(),e.TgZ(102,"div",24)(103,"app-reset-button",25),e.NdJ("resetEvent",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.resetBasic())}),e.qZA(),e._UZ(104,"app-crud-button",26),e.qZA()()()()()}if(2&a){const t=e.MAs(38),o=e.MAs(45),n=e.MAs(74),r=e.oxw();e.xp6(3),e.Q6J("formGroup",r.manageForm),e.xp6(28),e.Q6J("ngForOf",r.manageData.employeeGroupList),e.xp6(4),e.Q6J("matDatepicker",t),e.xp6(1),e.Q6J("for",t),e.xp6(6),e.Q6J("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(8),e.Q6J("isEdit",!0)("disabled",r.isProcessing),e.xp6(2),e.Q6J("formGroup",r.manageDetailForm),e.xp6(9),e.Q6J("ngForOf",r.manageData.employeeDesignationList),e.xp6(5),e.Q6J("ngForOf",r.genderList),e.xp6(4),e.Q6J("matDatepicker",n),e.xp6(1),e.Q6J("for",n),e.xp6(9),e.Q6J("ngForOf",r.manageData.bloodGroupList),e.xp6(10),e.Q6J("isAdd",!0),e.xp6(2),e.Q6J("ngForOf",r.contactListControls),e.xp6(6),e.Q6J("isAdd",!0),e.xp6(2),e.Q6J("ngForOf",r.addressListControls),e.xp6(3),e.Q6J("isEdit",!0)("disabled",r.isProcessing)}}let Ke=(()=>{class a{constructor(t,o,n,r,m,v){this.dialogRef=t,this.employeeService=o,this.ds=n,this.snackBarService=r,this.data=m,this.dialog=v,this.employee=new V,this.manageData=new h,this.genderList=[],this.contactTypeList=[],this.addressTypeList=[],this.isLoaded=!1,this.isProcessing=!1,this.editEvent=new S.x,this.addDetailEvent=new S.x}get contactListControls(){return this.manageDetailForm.get("contactList").controls}get addressListControls(){return this.manageDetailForm.get("addressList").controls}ngOnInit(){this.manageForm=new i.cw({firstName:new i.NI(null,[i.kI.required]),middleName:new i.NI(null),lastName:new i.NI(null),nickName:new i.NI(null,[i.kI.required]),code:new i.NI(null,[i.kI.required]),employeeGroupId:new i.NI(null,[i.kI.required]),joiningDate:new i.NI(null,[i.kI.required]),leavingDate:new i.NI(null),active:new i.NI(null)}),this.manageDetailForm=new i.cw({generalInfo:new i.cw({employeeDesignationId:new i.NI(null,[i.kI.required]),gender:new i.NI(null,[i.kI.required]),dOB:new i.NI(null,[i.kI.required]),bloodGroupId:new i.NI(null),insuranceNumber:new i.NI(null,[i.kI.required])}),contactList:new i.Oe([]),addressList:new i.Oe([])}),this.isLoaded=!1,this.sub=this.employeeService.getEmployeeManageData().pipe((0,j.w)(t=>(this.manageData=t.item,this.genderList=Object.values(z),this.contactTypeList=Object.values(P),this.addressTypeList=Object.values(H),this.employeeService.getEmployeeDetailById(this.data.id)))).subscribe(t=>{if(this.employee=t.item,this.manageForm.patchValue({firstName:this.employee.firstName,middleName:this.employee.middleName,lastName:this.employee.lastName,nickName:this.employee.nickName,code:this.employee.code,employeeGroupId:this.employee.employeeGroup.id,joiningDate:this.ds.responseFormatToDate(this.employee.joiningDate),leavingDate:null!=this.employee.leavingDate?this.ds.responseFormatToDate(this.employee.leavingDate):null,active:this.employee.active}),null!=this.employee.employeeGeneralInfo&&this.manageDetailForm.patchValue({generalInfo:{employeeDesignationId:this.employee.employeeGeneralInfo.employeeDesignation.id,gender:this.employee.employeeGeneralInfo.gender,dOB:this.ds.responseFormatToDate(this.employee.employeeGeneralInfo.dob),bloodGroupId:this.employee.employeeGeneralInfo.bloodGroup?.id??"",insuranceNumber:this.employee.employeeGeneralInfo.insuranceNumber}}),this.employee.employeeContactList.length>0)for(var o of this.employee.employeeContactList)this.manageDetailForm.get("contactList").push(new i.cw({contactType:new i.NI(o.contactType,i.kI.required),contact:new i.NI(o.contact,i.kI.required)}));else this.manageDetailForm.get("contactList").push(new i.cw({contactType:new i.NI(P.mobile,i.kI.required),contact:new i.NI(null,i.kI.required)}));if(this.employee.employeeAddressList.length>0)for(var n of this.employee.employeeAddressList)this.manageDetailForm.get("addressList").push(new i.cw({addressType:new i.NI(n.addressType,i.kI.required),building:new i.NI(n.building,i.kI.required),street1:new i.NI(n.street1,i.kI.required),street2:new i.NI(n.street2),pinCode:new i.NI(n.pinCode),countryId:new i.NI(n.country.id,i.kI.required),stateId:new i.NI(n.state?.id??"")}));else this.manageDetailForm.get("addressList").push(new i.cw({addressType:new i.NI(H.work,i.kI.required),building:new i.NI(null,i.kI.required),street1:new i.NI(null,i.kI.required),street2:new i.NI(null),pinCode:new i.NI(null),countryId:new i.NI(null,i.kI.required),stateId:new i.NI(null)}));this.isLoaded=!0})}addContactItemForm(){this.manageDetailForm.get("contactList").push(new i.cw({contactType:new i.NI(null,i.kI.required),contact:new i.NI(null,i.kI.required)}))}deleteContactItem(t){this.manageDetailForm.get("contactList").removeAt(t),this.manageDetailForm.updateValueAndValidity()}addAddressItemForm(){this.manageDetailForm.get("addressList").push(new i.cw({addressType:new i.NI(null,i.kI.required),building:new i.NI(null,i.kI.required),street1:new i.NI(null,i.kI.required),street2:new i.NI(null),pinCode:new i.NI(null),countryId:new i.NI(null,i.kI.required),stateId:new i.NI("")}))}deleteAddressItem(t){this.manageDetailForm.get("addressList").removeAt(t),this.manageDetailForm.updateValueAndValidity()}getFilteredState(t){let o=this.addressListControls.at(t)?.value.countryId;return null!=o?(console.log(this.manageData),this.manageData.stateList.filter(n=>n.country.id==o)):[]}onCountryChange(t){let o=this.addressListControls.at(t);o?.patchValue({stateId:null}),o?.updateValueAndValidity()}editEmployee(){if(!this.manageForm.valid)return void this.manageForm.markAllAsTouched();if(!confirm("Are you sure ?"))return;let t=new we;t.id=this.data.id,t.firstName=this.manageForm.value.firstName,t.middleName=this.manageForm.value.middleName,t.lastName=this.manageForm.value.lastName,t.nickName=this.manageForm.value.nickName,t.code=this.manageForm.value.code,t.employeeGroupId=this.manageForm.value.employeeGroupId,t.firstName=this.manageForm.value.firstName,t.firstName=this.manageForm.value.firstName,t.joiningDate=this.ds.formatToRequest(this.manageForm.value.joiningDate),null!=this.manageForm.value.leavingDate&&(t.leavingDate=this.ds.formatToRequest(this.manageForm.value.leavingDate)),t.active=this.manageForm.value.active,this.isProcessing=!0,this.sub=this.employeeService.editEmployee(t).subscribe(o=>{this.isProcessing=!1,o?.status==d.s.success?this.editEvent.next(o):alert(o?.message)})}addEmployeeDetail(){if(!this.manageDetailForm.valid)return void this.manageDetailForm.markAllAsTouched();if(!confirm(null==this.employee.employeeGeneralInfo?"Are you sure to add detail ?":"Are you sure to edit detail ?"))return;let o=new Ae;o.id=this.data.id,o.employeeGeneralInfo=new be;let n=this.manageDetailForm.get("generalInfo");o.employeeGeneralInfo.employeeDesignationId=n?.value.employeeDesignationId,o.employeeGeneralInfo.gender=n?.value.gender,o.employeeGeneralInfo.dob=this.ds.formatToRequest(n?.value.dOB),o.employeeGeneralInfo.bloodGroupId=""!=n?.value.bloodGroupId?n?.value.bloodGroupId:null,o.employeeGeneralInfo.insuranceNumber=n?.value.insuranceNumber,o.employeeContactList=[],this.contactListControls.forEach(r=>{let m=new Ee;m.contactType=r.value.contactType,m.contact=r.value.contact,o.employeeContactList.push(m)}),o.employeeAddressList=[],this.addressListControls.forEach(r=>{let m=new qe;m.addressType=r.value.addressType,m.building=r.value.building,m.street1=r.value.street1,m.street2=r.value.street2,m.pinCode=r.value.pinCode,m.countryId=r.value.countryId,m.stateId=""!=r.value.stateId?r.value.stateId:null,o.employeeAddressList.push(m)}),this.isProcessing=!0,this.sub=this.employeeService.addEmployeeDetail(o).subscribe(r=>{this.isProcessing=!1,r?.status==d.s.success?this.addDetailEvent.next(r):alert(r?.message)})}resetBasic(){this.manageForm.reset()}resetDetail(){this.manageDetailForm.reset()}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}static#e=this.\u0275fac=function(o){return new(o||a)(e.Y36(_.so),e.Y36(J),e.Y36(I.R),e.Y36(O.c),e.Y36(_.WI),e.Y36(_.uw))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-employee"]],decls:3,vars:1,consts:[["mat-dialog-content","","class","row m-0 p-3",4,"ngIf"],["mat-dialog-content","",1,"row","m-0","p-3"],[1,"row"],[1,"col-6"],[1,"my-2",3,"formGroup","submit"],[1,"row","form-group"],[1,"form-field","col-5"],["type","text","matInput","","formControlName","firstName"],[1,"form-field","col-3"],["type","text","matInput","","formControlName","middleName"],[1,"form-field","col-4"],["type","text","matInput","","formControlName","lastName"],[1,"form-field","col-8"],["type","text","matInput","","formControlName","nickName"],["type","text","matInput","","formControlName","code"],["formControlName","employeeGroupId"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"col-4","form-field"],["matInput","","formControlName","joiningDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker1",""],["matInput","","formControlName","leavingDate",3,"matDatepicker"],["picker2",""],["formControlName","active",1,"form-field","col-2","offset-10","text-start"],[1,"row","mt-4"],[1,"col-2",3,"resetEvent"],[1,"col-2","offset-8",3,"isEdit","disabled"],[1,"col-6","ps-4"],[1,"",3,"formGroup","submit"],[1,"row","form-group","mb-4"],["formGroupName","generalInfo",1,"row","form-group"],["formControlName","employeeDesignationId"],["formControlName","gender"],["matInput","","formControlName","dOB",3,"matDatepicker"],["picker3",""],["formControlName","bloodGroupId"],["value",""],[1,"form-field","col-6"],["type","text","matInput","","formControlName","insuranceNumber"],[1,"row","form-group","mt-4"],[1,"col-4"],[1,"col-2","offset-6","text-end"],[3,"isAdd","actionEvent"],["formArrayName","contactList",1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],["formArrayName","addressList",1,"mt-3"],[3,"value"],[1,"col-12","form-group",3,"formGroupName"],["formControlName","contactType"],["type","text","matInput","","formControlName","contact"],[1,"col-2","text-end","mt-2"],[3,"isDelete","item","actionEvent"],["formControlName","addressType"],["type","text","matInput","","formControlName","building"],["type","text","matInput","","formControlName","street1"],["type","text","matInput","","formControlName","street2"],["type","text","matInput","","formControlName","pinCode"],["formControlName","countryId",3,"selectionChange"],["formControlName","stateId"]],template:function(o,n){1&o&&(e.TgZ(0,"app-form-heading"),e._uU(1," Edit Employee\n"),e.qZA(),e.YNc(2,Be,105,20,"div",0)),2&o&&(e.xp6(2),e.Q6J("ngIf",n.isLoaded))},dependencies:[p.sg,p.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,A.H,w.Nt,g.KE,g.hX,g.R9,y.Mq,y.hl,y.nW,_.xY,b.gD,q.ey,W.Rr,U,k,L]})}return a})();var X=s(9314),ee=s(7114),te=s(8219),ae=s(2402),oe=s(7974);function $e(a,l){1&a&&e._UZ(0,"label",1)}const je=["*"];let ie=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-active-text"]],inputs:{active:"active"},ngContentSelectors:je,decls:2,vars:1,consts:[["class","bg-warn active-box",4,"ngIf"],[1,"bg-warn","active-box"]],template:function(o,n){1&o&&(e.F$t(),e.YNc(0,$e,1,0,"label",0),e.Hsn(1)),2&o&&e.Q6J("ngIf",!n.active)},dependencies:[p.O5],styles:[".active-box[_ngcontent-%COMP%]{width:10px;height:10px;margin-right:5px}"]})}return a})();var Ve=s(9208);const ze=["page"];function We(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",23)(1,"app-add-button",24),e.NdJ("addEvent",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.openAddDialog())}),e.qZA()()}}function Xe(a,l){1&a&&(e.TgZ(0,"th",25),e._uU(1," Name "),e.qZA())}function et(a,l){if(1&a&&(e.TgZ(0,"td",26)(1,"app-active-text",27),e._uU(2),e.qZA()()),2&a){const t=l.$implicit;e.xp6(1),e.Q6J("active",t.active),e.xp6(1),e.hij("",t.fullName," ")}}function tt(a,l){1&a&&(e.TgZ(0,"th",25),e._uU(1," Nick Name "),e.qZA())}function at(a,l){if(1&a&&(e.TgZ(0,"td",26),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.xp6(1),e.hij(" ",t.nickName," ")}}function ot(a,l){1&a&&(e.TgZ(0,"th",25),e._uU(1," Code "),e.qZA())}function it(a,l){if(1&a&&(e.TgZ(0,"td",26),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.xp6(1),e.hij(" ",t.code," ")}}function nt(a,l){1&a&&(e.TgZ(0,"th",25),e._uU(1," Group "),e.qZA())}function lt(a,l){if(1&a&&(e.TgZ(0,"td",26),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.xp6(1),e.hij(" ",t.employeeGroup.name," ")}}function rt(a,l){1&a&&e._UZ(0,"th",28)}function st(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"app-action-icon",33),e.NdJ("actionEvent",function(){e.CHM(t);const n=e.oxw().$implicit,r=e.oxw();return e.KtG(r.openEditDialog(n))}),e.qZA()}if(2&a){const t=e.oxw().$implicit;e.Q6J("isEdit",!0)("item",t)}}function mt(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"app-action-icon",34),e.NdJ("actionEvent",function(){e.CHM(t);const n=e.oxw().$implicit,r=e.oxw();return e.KtG(r.delete(n))}),e.qZA()}if(2&a){const t=e.oxw().$implicit;e.Q6J("isDelete",!0)("item",t)}}function ct(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"td",29)(1,"app-action-icon",30),e.NdJ("actionEvent",function(){const r=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.openViewDialog(r))}),e.qZA(),e.YNc(2,st,1,2,"app-action-icon",31),e.YNc(3,mt,1,2,"app-action-icon",32),e.qZA()}if(2&a){const t=l.$implicit,o=e.oxw();e.xp6(1),e.Q6J("isView",!0)("item",t),e.xp6(1),e.Q6J("ngIf",o.allowEdit),e.xp6(1),e.Q6J("ngIf",o.allowDelete)}}function dt(a,l){1&a&&e._UZ(0,"tr",35)}function pt(a,l){1&a&&e._UZ(0,"tr",36)}const ut=function(){return[10,50,100]};let ft=(()=>{class a{constructor(t,o,n,r){this.employeeService=t,this.menuService=o,this.snackBarService=n,this.dialog=r,this.eList=[],this.req=new F.J,this.count=0,this.searchKey="",this.allowAdd=!1,this.allowEdit=!1,this.allowDelete=!1,this.displayedColumns=["name","nick-name","code","group","manage"]}ngOnInit(){this.dataSource=new c.by(this.eList),this.req.pagination.pageSize=100,this.allowAdd=this.menuService.isMenuRoleAuthorizedSingle(C.w.Employee_Payroll_Master,T.k.add),this.allowEdit=this.menuService.isMenuRoleAuthorizedSingle(C.w.Employee_Payroll_Master,T.k.edit),this.allowDelete=this.menuService.isMenuRoleAuthorizedSingle(C.w.Employee_Payroll_Master,T.k.delete),this.getList()}onSearchChange(t){this.eList=[],this.dataSource=new c.by(this.eList),this.req.pagination.pageNumber=1,this.searchKey=t}getList(){this.req.searchKey=this.searchKey,this.sub=this.employeeService.getEmployeeList(this.req).subscribe(t=>{t?.response?.status==d.s.success?(this.eList.push.apply(this.eList,t?.list),this.dataSource=new c.by(this.eList),this.dataSource.paginator=this.paginator,this.count=t?.totalRecords,this.req.pagination.pageNumber+=1):alert(t?.response?.message)})}refreshList(){this.eList=[],this.dataSource=new c.by(this.eList),this.req.pagination.pageNumber=1,this.getList()}openAddDialog(){this.dialog.open(ue,{width:"50%"}).afterClosed().subscribe(o=>{1==o&&this.refreshList()})}openViewDialog(t){this.dialog.open(Ie,{data:t,width:"95%"}).afterClosed().subscribe(n=>{1==n&&this.refreshList()})}openEditDialog(t){const o=this.dialog.open(Ke,{data:t,width:"95%"});o.componentInstance.editEvent.subscribe(n=>{this.snackBarService.response(n),this.refreshList()}),o.componentInstance.addDetailEvent.subscribe(n=>{this.snackBarService.response(n),this.refreshList()}),o.afterClosed().subscribe(n=>{1==n&&this.refreshList()})}delete(t){confirm(Q.confirmDelete(t.nickName))&&(this.sub=this.employeeService.deleteEmployee(t.id).subscribe(o=>{o?.status==d.s.success?this.refreshList():alert(o?.message)}))}ngOnDestroy(){this.sub.unsubscribe()}static#e=this.\u0275fac=function(o){return new(o||a)(e.Y36(J),e.Y36(X.h),e.Y36(O.c),e.Y36(_.uw))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee"]],viewQuery:function(o,n){if(1&o&&e.Gf(ze,5),2&o){let r;e.iGM(r=e.CRH())&&(n.paginator=r.first)}},decls:31,vars:9,consts:[[1,"row"],[1,"col-3","offset-9"],[3,"onSearchChange","onSearch"],[1,"row","p-2"],[1,"col-3"],["class","col-1 offset-8",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nick-name"],["matColumnDef","code"],["matColumnDef","group"],["matColumnDef","manage"],["mat-header-cell","","class","text-end",4,"matHeaderCellDef"],["mat-cell","","class","text-end","style","width: 16rem;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","",3,"pageSizeOptions"],["page",""],[1,"col-6"],[3,"loaded","count","loadMore"],[1,"col-1","offset-8"],[3,"addEvent"],["mat-header-cell",""],["mat-cell",""],[3,"active"],["mat-header-cell","",1,"text-end"],["mat-cell","",1,"text-end",2,"width","16rem"],[3,"isView","item","actionEvent"],[3,"isEdit","item","actionEvent",4,"ngIf"],[3,"isDelete","item","actionEvent",4,"ngIf"],[3,"isEdit","item","actionEvent"],[3,"isDelete","item","actionEvent"],["mat-header-row",""],["mat-row",""]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"app-search-filter",2),e.NdJ("onSearchChange",function(m){return n.onSearchChange(m)})("onSearch",function(){return n.getList()}),e.qZA()()(),e.TgZ(3,"div",3)(4,"app-table-heading",4),e._uU(5," People "),e.qZA(),e.YNc(6,We,2,0,"div",5),e.qZA(),e.TgZ(7,"div",6)(8,"table",7),e.ynx(9,8),e.YNc(10,Xe,2,0,"th",9),e.YNc(11,et,3,2,"td",10),e.BQk(),e.ynx(12,11),e.YNc(13,tt,2,0,"th",9),e.YNc(14,at,2,1,"td",10),e.BQk(),e.ynx(15,12),e.YNc(16,ot,2,0,"th",9),e.YNc(17,it,2,1,"td",10),e.BQk(),e.ynx(18,13),e.YNc(19,nt,2,0,"th",9),e.YNc(20,lt,2,1,"td",10),e.BQk(),e.ynx(21,14),e.YNc(22,rt,1,0,"th",15),e.YNc(23,ct,4,4,"td",16),e.BQk(),e.YNc(24,dt,1,0,"tr",17),e.YNc(25,pt,1,0,"tr",18),e.qZA(),e._UZ(26,"mat-paginator",19,20),e.qZA(),e.TgZ(28,"div",0)(29,"div",21)(30,"app-pagination",22),e.NdJ("loadMore",function(){return n.getList()}),e.qZA()()()),2&o&&(e.xp6(6),e.Q6J("ngIf",n.allowAdd),e.xp6(2),e.Q6J("dataSource",n.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(8,ut)),e.xp6(4),e.Q6J("loaded",n.dataSource.data.length)("count",n.count))},dependencies:[p.O5,ee.Q,te.c,ae.u,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,oe.NW,ie,Ve.L,L],styles:["div.scroll[_ngcontent-%COMP%]{max-height:35rem;overflow-x:hidden;overflow-y:auto}"]})}return a})();class B{}class ne{}class le{}const E={months:"Months",weekly:"Weekly",days:"Days"};let Y=(()=>{class a{constructor(t){this.http=t}getEmployeeSalaryDetailList(t){return this.http.post(f.bU.getEmployeeSalaryDetailList,t)}getSalaryManageData(){let t=f.lp.getManageData(f.hh.employeeSalaryDetail);return this.http.get(t)}addSalary(t){let o=f.lp.add(f.hh.employeeSalaryDetail);return this.http.post(o,t)}deleteSalary(t){let o=f.lp.delete(f.hh.employeeSalaryDetail)+"/{employeeId}";return o=o.replace(/{employeeId}/gi,t),this.http.post(o,null)}static#e=this.\u0275fac=function(o){return new(o||a)(e.LFG($.L))};static#t=this.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();function _t(a,l){1&a&&(e.TgZ(0,"app-form-heading"),e._uU(1," Add Salary\n"),e.qZA())}function gt(a,l){if(1&a&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function yt(a,l){if(1&a&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function ht(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",12)(2,"mat-form-field",33)(3,"mat-label"),e._uU(4,"PayHead"),e.qZA(),e.TgZ(5,"mat-select",34),e.NdJ("selectionChange",function(n){const m=e.CHM(t).index,v=e.oxw(2);return e.KtG(v.onPayHeadChange(n,m))}),e.YNc(6,yt,2,2,"mat-option",19),e.qZA()(),e.TgZ(7,"mat-form-field",17)(8,"mat-label"),e._uU(9,"Rate"),e.qZA(),e.TgZ(10,"input",35),e.NdJ("input",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onRateChange())}),e.qZA()(),e.TgZ(11,"div",36)(12,"app-action-icon",37),e.NdJ("actionEvent",function(){const r=e.CHM(t).index,m=e.oxw(2);return e.KtG(m.deleteSalaryLine(r))}),e.qZA()()()()}if(2&a){const t=l.$implicit,o=l.index,n=e.oxw(2);e.Q6J("formGroupName",o),e.xp6(6),e.Q6J("ngForOf",n.manageData.payHeadList),e.xp6(6),e.Q6J("isDelete",!0)("item",t)}}function vt(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"form",3),e.NdJ("submit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addSalary())}),e.TgZ(2,"div",4)(3,"div",5)(4,"div",6)(5,"label")(6,"strong",7),e._uU(7),e.qZA()()()(),e.TgZ(8,"label",8),e._uU(9),e.qZA()(),e.TgZ(10,"div",4)(11,"div",9)(12,"div",10)(13,"label",7),e._uU(14),e.qZA()()(),e.TgZ(15,"label",11),e._uU(16),e.qZA()(),e.TgZ(17,"div",12)(18,"mat-form-field",13)(19,"mat-label"),e._uU(20,"Effective From"),e.qZA(),e._UZ(21,"input",14)(22,"mat-datepicker-toggle",15)(23,"mat-datepicker",null,16),e.qZA(),e.TgZ(25,"mat-form-field",17)(26,"mat-label"),e._uU(27,"Period"),e.qZA(),e.TgZ(28,"mat-select",18),e.YNc(29,gt,2,2,"mat-option",19),e.qZA()(),e.TgZ(30,"mat-form-field",17)(31,"mat-label"),e._uU(32,"Off Days"),e.qZA(),e._UZ(33,"input",20),e.qZA()(),e.TgZ(34,"div",6)(35,"div",7)(36,"div",21)(37,"div",22)(38,"div",23)(39,"label"),e._uU(40,"Salary Line"),e.qZA()(),e.TgZ(41,"div",24)(42,"app-action-icon",25),e.NdJ("actionEvent",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addSalaryLine())}),e.qZA()(),e.TgZ(43,"div",26)(44,"h4"),e._uU(45),e.qZA()()(),e.TgZ(46,"div",27),e.YNc(47,ht,13,4,"div",28),e.qZA()()()(),e.TgZ(48,"div",6)(49,"app-reset-button",29),e.NdJ("resetEvent",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.reset())}),e.qZA(),e._UZ(50,"app-crud-button",30),e.qZA()()()}if(2&a){const t=e.MAs(24),o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.manageForm),e.xp6(6),e.Oqu(o.data.employee.fullName),e.xp6(2),e.hij(" ",o.data.employee.code," "),e.xp6(5),e.Oqu(o.data.employee.nickName),e.xp6(2),e.hij(" ",o.data.employee.employeeGroup," "),e.xp6(5),e.Q6J("matDatepicker",t),e.xp6(1),e.Q6J("for",t),e.xp6(7),e.Q6J("ngForOf",o.salaryPeriodList),e.xp6(13),e.Q6J("isAdd",!0),e.xp6(3),e.hij("\xa3 ",o.total,""),e.xp6(2),e.Q6J("ngForOf",o.salaryLineControls),e.xp6(3),e.Q6J("isAdd",!0)("disabled",o.isProcessing)}}let Zt=(()=>{class a{constructor(t,o,n,r){this.dialogRef=t,this.salaryService=o,this.ds=n,this.data=r,this.manageData=new B,this.isLoaded=!1,this.isProcessing=!1,this.salaryPeriodList=[],this.total=0}get salaryLineControls(){return this.manageForm.get("salaryLines").controls}ngOnInit(){this.manageForm=new i.cw({effectiveFrom:new i.NI(new Date,[i.kI.required]),salaryPeriod:new i.NI(E.weekly,[i.kI.required]),weeklyOffDays:new i.NI(0,[i.kI.required]),salaryLines:new i.Oe([])}),this.isLoaded=!1,this.sub=this.salaryService.getSalaryManageData().subscribe(t=>{this.manageData=t.item,this.salaryPeriodList=Object.values(E),this.isLoaded=!0,this.addDefaultSalaryLine("Weekly Wage")})}addDefaultSalaryLine(t){let o=this.manageData.payHeadList.find(n=>n.name==t)?.id;this.manageForm.get("salaryLines").push(new i.cw({payHeadId:new i.NI(o,i.kI.required),rate:new i.NI(null,i.kI.required)}))}addSalaryLine(){this.manageForm.get("salaryLines").push(new i.cw({payHeadId:new i.NI(null,i.kI.required),rate:new i.NI(null,i.kI.required)}))}deleteSalaryLine(t){this.manageForm.get("salaryLines").removeAt(t),this.onRateChange()}onPayHeadChange(t,o){this.manageForm.get("salaryLines").at(o).patchValue({rate:null})}onRateChange(){let t=0;this.manageForm.value.salaryLines.forEach(o=>{t+=o.rate??0}),this.total=t}addSalary(){if(!this.manageForm.valid)return void this.manageForm.markAllAsTouched();if(!confirm(Q.areYouSureTo))return;let t=new ne;t.effectiveFrom=this.ds.formatToRequest(this.manageForm.value.effectiveFrom),t.salaryPeriod=this.manageForm.value.salaryPeriod,t.weeklyOffDays=this.manageForm.value.weeklyOffDays,t.employeeId=this.data.employee.id,t.employeeSalaryDetailLines=[],this.manageForm.value.salaryLines.forEach(n=>{let r=new le;r.payHeadId=n.payHeadId,r.rate=n.rate,t.employeeSalaryDetailLines.push(r)});let o=this.validateSalaryLine();""==o?(this.isProcessing=!0,this.sub=this.salaryService.addSalary(t).subscribe(n=>{if(this.isProcessing=!1,n?.status!=d.s.success)return this.isProcessing=!1,void alert(n?.message);this.reset(),this.closeDialog()})):alert(`Error : ${o}`)}validateSalaryLine(){let t=[],o="",n=0;if(this.manageForm.value.salaryLines.forEach(m=>{n++,t.findIndex(K=>K.key.payHeadId==m.payHeadId)>=0?o=m.payHeadId:t.push({key:{payHeadId:m.payHeadId},value:1})}),""!=o){var r=this.manageData.payHeadList.find(m=>m.id==o)?.name;return`Duplicate line ${r} found`}return 0==n?"No salary line":""}reset(){for(this.manageForm.reset();this.manageForm.get("salaryLines").length>0;)this.manageForm.get("salaryLines").removeAt(0)}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}static#e=this.\u0275fac=function(o){return new(o||a)(e.Y36(_.so),e.Y36(Y),e.Y36(I.R),e.Y36(_.WI))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-add-salary"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-content",""],[1,"my-2",3,"formGroup","submit"],[1,"row","mb-4"],[1,"col-8"],[1,"row"],[1,"col-12"],[1,"col-4","text-end"],[1,"col-6"],[1,"row","fst-italic"],[1,"col-6","text-end"],[1,"row","form-group"],["appearance","outline",1,"col-4","form-field"],["matInput","","formControlName","effectiveFrom",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"form-field","col-4"],["formControlName","salaryPeriod"],[3,"value",4,"ngFor","ngForOf"],["type","number","matInput","","formControlName","weeklyOffDays"],["formArrayName","salaryLines"],[1,"row","my-4"],[1,"col-2"],[1,"col-2","text-end"],[3,"isAdd","actionEvent"],[1,"col-8","text-end"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-3",3,"resetEvent"],[1,"col-3","offset-6",3,"isAdd","disabled"],[3,"value"],[1,"col-12","form-group",3,"formGroupName"],[1,"form-field","col-6"],["formControlName","payHeadId",3,"selectionChange"],["type","number","matInput","","formControlName","rate",3,"input"],[1,"col-2","text-end","mt-2"],[3,"isDelete","item","actionEvent"]],template:function(o,n){1&o&&(e.YNc(0,_t,2,0,"app-form-heading",0),e.YNc(1,vt,51,13,"div",1)),2&o&&(e.Q6J("ngIf",n.isLoaded),e.xp6(1),e.Q6J("ngIf",n.isLoaded))},dependencies:[p.sg,p.O5,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,A.H,w.Nt,g.KE,g.hX,g.R9,y.Mq,y.hl,y.nW,_.xY,b.gD,q.ey,U,k,L]})}return a})();function xt(a,l){1&a&&(e.TgZ(0,"app-form-heading"),e._uU(1," View Salary\n"),e.qZA())}function Ct(a,l){if(1&a&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Tt(a,l){if(1&a&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Nt(a,l){if(1&a&&(e.TgZ(0,"div",29)(1,"div",12)(2,"mat-form-field",30)(3,"mat-label"),e._uU(4,"PayHead"),e.qZA(),e.TgZ(5,"mat-select",31),e.YNc(6,Tt,2,2,"mat-option",19),e.qZA()(),e.TgZ(7,"mat-form-field",17)(8,"mat-label"),e._uU(9,"Rate"),e.qZA(),e._UZ(10,"input",32),e.qZA()()()),2&a){const t=l.index,o=e.oxw(2);e.Q6J("formGroupName",t),e.xp6(6),e.Q6J("ngForOf",o.manageData.payHeadList)}}function It(a,l){if(1&a&&(e.TgZ(0,"div",2)(1,"form",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"label")(6,"strong",7),e._uU(7),e.qZA()()()(),e.TgZ(8,"label",8),e._uU(9),e.qZA()(),e.TgZ(10,"div",4)(11,"div",9)(12,"div",10)(13,"label",7),e._uU(14),e.qZA()()(),e.TgZ(15,"label",11),e._uU(16),e.qZA()(),e.TgZ(17,"div",12)(18,"mat-form-field",13)(19,"mat-label"),e._uU(20,"Effective From"),e.qZA(),e._UZ(21,"input",14)(22,"mat-datepicker-toggle",15)(23,"mat-datepicker",null,16),e.qZA(),e.TgZ(25,"mat-form-field",17)(26,"mat-label"),e._uU(27,"Period"),e.qZA(),e.TgZ(28,"mat-select",18),e.YNc(29,Ct,2,2,"mat-option",19),e.qZA()(),e.TgZ(30,"mat-form-field",17)(31,"mat-label"),e._uU(32,"Off Days"),e.qZA(),e._UZ(33,"input",20),e.qZA()(),e.TgZ(34,"div",6)(35,"div",7)(36,"div",21)(37,"div",22)(38,"div",23)(39,"label"),e._uU(40,"Salary Line"),e.qZA()(),e._UZ(41,"div",24),e.TgZ(42,"div",25)(43,"h4"),e._uU(44),e.qZA()()(),e.TgZ(45,"div",26),e.YNc(46,Nt,11,2,"div",27),e.qZA()()()()()()),2&a){const t=e.MAs(24),o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.manageForm),e.xp6(6),e.Oqu(o.data.employee.fullName),e.xp6(2),e.hij(" ",o.data.employee.code," "),e.xp6(5),e.Oqu(o.data.employee.nickName),e.xp6(2),e.hij(" ",o.data.employee.employeeGroup," "),e.xp6(5),e.Q6J("matDatepicker",t),e.xp6(1),e.Q6J("for",t),e.xp6(7),e.Q6J("ngForOf",o.salaryPeriodList),e.xp6(15),e.hij("\xa3 ",o.total,""),e.xp6(2),e.Q6J("ngForOf",o.salaryLineControls)}}let At=(()=>{class a{constructor(t,o,n,r){this.dialogRef=t,this.salaryService=o,this.ds=n,this.data=r,this.manageData=new B,this.isLoaded=!1,this.isProcessing=!1,this.salaryPeriodList=[],this.total=0}get salaryLineControls(){return this.manageForm.get("salaryLines").controls}ngOnInit(){this.manageForm=new i.cw({effectiveFrom:new i.NI(new Date,[i.kI.required]),salaryPeriod:new i.NI(E.weekly,[i.kI.required]),weeklyOffDays:new i.NI(0,[i.kI.required]),salaryLines:new i.Oe([])}),this.isLoaded=!1,this.sub=this.salaryService.getSalaryManageData().subscribe(t=>{this.manageData=t.item,this.salaryPeriodList=Object.values(E);let o=null!=this.data.effectiveFrom?this.ds.responseFormatToDate(this.data.effectiveFrom):null;this.manageForm.patchValue({effectiveFrom:o,salaryPeriod:this.data.salaryPeriod,weeklyOffDays:this.data.weeklyOffDays});let n=0;this.data.employeeSalaryDetailLines.forEach(r=>{n+=r.rate??0,this.manageForm.get("salaryLines").push(new i.cw({payHeadId:new i.NI({value:r.payHead.id,disabled:!1}),rate:new i.NI({value:r.rate,disabled:!1})}))}),this.total=n,this.isLoaded=!0})}ngOnDestroy(){this.sub?.unsubscribe()}static#e=this.\u0275fac=function(o){return new(o||a)(e.Y36(_.so),e.Y36(Y),e.Y36(I.R),e.Y36(_.WI))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-view-salary"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-content",""],[1,"my-2",3,"formGroup"],[1,"row","mb-4"],[1,"col-8"],[1,"row"],[1,"col-12"],[1,"col-4","text-end"],[1,"col-6"],[1,"row","fst-italic"],[1,"col-6","text-end"],[1,"row","form-group"],["appearance","outline",1,"col-4","form-field"],["matInput","","formControlName","effectiveFrom",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"form-field","col-4"],["formControlName","salaryPeriod"],[3,"value",4,"ngFor","ngForOf"],["type","number","matInput","","formControlName","weeklyOffDays"],["formArrayName","salaryLines"],[1,"row","my-4"],[1,"col-2"],[1,"col-2","text-end"],[1,"col-8","text-end"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],[3,"value"],[1,"col-12","form-group",3,"formGroupName"],[1,"form-field","col-6"],["formControlName","payHeadId"],["type","number","matInput","","formControlName","rate"]],template:function(o,n){1&o&&(e.YNc(0,xt,2,0,"app-form-heading",0),e.YNc(1,It,47,10,"div",1)),2&o&&(e.Q6J("ngIf",n.isLoaded),e.xp6(1),e.Q6J("ngIf",n.isLoaded))},dependencies:[p.sg,p.O5,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,A.H,w.Nt,g.KE,g.hX,g.R9,y.Mq,y.hl,y.nW,_.xY,b.gD,q.ey]})}return a})();function wt(a,l){1&a&&(e.TgZ(0,"app-form-heading"),e._uU(1," Edit Salary\n"),e.qZA())}function bt(a,l){if(1&a&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function qt(a,l){if(1&a&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Et(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",12)(2,"mat-form-field",33)(3,"mat-label"),e._uU(4,"PayHead"),e.qZA(),e.TgZ(5,"mat-select",34),e.NdJ("selectionChange",function(n){const m=e.CHM(t).index,v=e.oxw(2);return e.KtG(v.onPayHeadChange(n,m))}),e.YNc(6,qt,2,2,"mat-option",19),e.qZA()(),e.TgZ(7,"mat-form-field",17)(8,"mat-label"),e._uU(9,"Rate"),e.qZA(),e.TgZ(10,"input",35),e.NdJ("input",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onRateChange())}),e.qZA()(),e.TgZ(11,"div",36)(12,"app-action-icon",37),e.NdJ("actionEvent",function(){const r=e.CHM(t).index,m=e.oxw(2);return e.KtG(m.deleteSalaryLine(r))}),e.qZA()()()()}if(2&a){const t=l.$implicit,o=l.index,n=e.oxw(2);e.Q6J("formGroupName",o),e.xp6(6),e.Q6J("ngForOf",n.manageData.payHeadList),e.xp6(6),e.Q6J("isDelete",!0)("item",t)}}function Dt(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"form",3),e.NdJ("submit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.editSalary())}),e.TgZ(2,"div",4)(3,"div",5)(4,"div",6)(5,"label")(6,"strong",7),e._uU(7),e.qZA()()()(),e.TgZ(8,"label",8),e._uU(9),e.qZA()(),e.TgZ(10,"div",4)(11,"div",9)(12,"div",10)(13,"label",7),e._uU(14),e.qZA()()(),e.TgZ(15,"label",11),e._uU(16),e.qZA()(),e.TgZ(17,"div",12)(18,"mat-form-field",13)(19,"mat-label"),e._uU(20,"Effective From"),e.qZA(),e._UZ(21,"input",14)(22,"mat-datepicker-toggle",15)(23,"mat-datepicker",null,16),e.qZA(),e.TgZ(25,"mat-form-field",17)(26,"mat-label"),e._uU(27,"Period"),e.qZA(),e.TgZ(28,"mat-select",18),e.YNc(29,bt,2,2,"mat-option",19),e.qZA()(),e.TgZ(30,"mat-form-field",17)(31,"mat-label"),e._uU(32,"Off Days"),e.qZA(),e._UZ(33,"input",20),e.qZA()(),e.TgZ(34,"div",6)(35,"div",7)(36,"div",21)(37,"div",22)(38,"div",23)(39,"label"),e._uU(40,"Salary Line"),e.qZA()(),e.TgZ(41,"div",24)(42,"app-action-icon",25),e.NdJ("actionEvent",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addSalaryLine())}),e.qZA()(),e.TgZ(43,"div",26)(44,"h4"),e._uU(45),e.qZA()()(),e.TgZ(46,"div",27),e.YNc(47,Et,13,4,"div",28),e.qZA()()()(),e.TgZ(48,"div",6)(49,"app-reset-button",29),e.NdJ("resetEvent",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.reset())}),e.qZA(),e._UZ(50,"app-crud-button",30),e.qZA()()()}if(2&a){const t=e.MAs(24),o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.manageForm),e.xp6(6),e.Oqu(o.data.employee.fullName),e.xp6(2),e.hij(" ",o.data.employee.code," "),e.xp6(5),e.Oqu(o.data.employee.nickName),e.xp6(2),e.hij(" ",o.data.employee.employeeGroup," "),e.xp6(5),e.Q6J("matDatepicker",t),e.xp6(1),e.Q6J("for",t),e.xp6(7),e.Q6J("ngForOf",o.salaryPeriodList),e.xp6(13),e.Q6J("isAdd",!0),e.xp6(3),e.hij("\xa3 ",o.total,""),e.xp6(2),e.Q6J("ngForOf",o.salaryLineControls),e.xp6(3),e.Q6J("isAdd",!0)("disabled",o.isProcessing)}}let Ft=(()=>{class a{constructor(t,o,n,r){this.dialogRef=t,this.salaryService=o,this.ds=n,this.data=r,this.manageData=new B,this.isLoaded=!1,this.isProcessing=!1,this.salaryPeriodList=[],this.total=0}get salaryLineControls(){return this.manageForm.get("salaryLines").controls}ngOnInit(){this.manageForm=new i.cw({effectiveFrom:new i.NI(new Date,[i.kI.required]),salaryPeriod:new i.NI(E.weekly,[i.kI.required]),weeklyOffDays:new i.NI(0,[i.kI.required]),salaryLines:new i.Oe([])}),this.isLoaded=!1,this.sub=this.salaryService.getSalaryManageData().subscribe(t=>{this.manageData=t.item,this.salaryPeriodList=Object.values(E);let o=null!=this.data.effectiveFrom?this.ds.responseFormatToDate(this.data.effectiveFrom):null;this.manageForm.patchValue({effectiveFrom:o,salaryPeriod:this.data.salaryPeriod,weeklyOffDays:this.data.weeklyOffDays});let n=0;this.data.employeeSalaryDetailLines.forEach(r=>{n+=r.rate??0,this.manageForm.get("salaryLines").push(new i.cw({payHeadId:new i.NI({value:r.payHead.id,disabled:!1}),rate:new i.NI({value:r.rate,disabled:!1})}))}),this.total=n,this.isLoaded=!0})}addSalaryLine(){this.manageForm.get("salaryLines").push(new i.cw({payHeadId:new i.NI(null,i.kI.required),rate:new i.NI(null,i.kI.required)}))}deleteSalaryLine(t){this.manageForm.get("salaryLines").removeAt(t),this.onRateChange()}onPayHeadChange(t,o){this.manageForm.get("salaryLines").at(o).patchValue({rate:null})}onRateChange(){let t=0;this.manageForm.value.salaryLines.forEach(o=>{t+=o.rate??0}),this.total=t}editSalary(){if(!this.manageForm.valid)return void this.manageForm.markAllAsTouched();if(!confirm(Q.areYouSureTo))return;let t=new ne;t.effectiveFrom=this.ds.formatToRequest(this.manageForm.value.effectiveFrom),t.salaryPeriod=this.manageForm.value.salaryPeriod,t.weeklyOffDays=this.manageForm.value.weeklyOffDays,t.employeeId=this.data.employee.id,t.employeeSalaryDetailLines=[],this.manageForm.value.salaryLines.forEach(n=>{let r=new le;r.payHeadId=n.payHeadId,r.rate=n.rate,t.employeeSalaryDetailLines.push(r)});let o=this.validateSalaryLine();""==o?(this.isProcessing=!0,this.sub=this.salaryService.addSalary(t).subscribe(n=>{if(this.isProcessing=!1,n?.status!=d.s.success)return this.isProcessing=!1,void alert(n?.message);this.reset(),this.closeDialog()})):alert(`Error : ${o}`)}validateSalaryLine(){let t=[],o="",n=0;if(this.manageForm.value.salaryLines.forEach(m=>{n++,t.findIndex(K=>K.key.payHeadId==m.payHeadId)>=0?o=m.payHeadId:t.push({key:{payHeadId:m.payHeadId},value:1})}),""!=o){var r=this.manageData.payHeadList.find(m=>m.id==o)?.name;return`Duplicate line ${r} found`}return 0==n?"No salary line":""}reset(){for(this.manageForm.reset();this.manageForm.get("salaryLines").length>0;)this.manageForm.get("salaryLines").removeAt(0)}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}static#e=this.\u0275fac=function(o){return new(o||a)(e.Y36(_.so),e.Y36(Y),e.Y36(I.R),e.Y36(_.WI))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-salary"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-content",""],[1,"my-2",3,"formGroup","submit"],[1,"row","mb-4"],[1,"col-8"],[1,"row"],[1,"col-12"],[1,"col-4","text-end"],[1,"col-6"],[1,"row","fst-italic"],[1,"col-6","text-end"],[1,"row","form-group"],["appearance","outline",1,"col-4","form-field"],["matInput","","formControlName","effectiveFrom",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"form-field","col-4"],["formControlName","salaryPeriod"],[3,"value",4,"ngFor","ngForOf"],["type","number","matInput","","formControlName","weeklyOffDays"],["formArrayName","salaryLines"],[1,"row","my-4"],[1,"col-2"],[1,"col-2","text-end"],[3,"isAdd","actionEvent"],[1,"col-8","text-end"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-3",3,"resetEvent"],[1,"col-3","offset-6",3,"isAdd","disabled"],[3,"value"],[1,"col-12","form-group",3,"formGroupName"],[1,"form-field","col-6"],["formControlName","payHeadId",3,"selectionChange"],["type","number","matInput","","formControlName","rate",3,"input"],[1,"col-2","text-end","mt-2"],[3,"isDelete","item","actionEvent"]],template:function(o,n){1&o&&(e.YNc(0,wt,2,0,"app-form-heading",0),e.YNc(1,Dt,51,13,"div",1)),2&o&&(e.Q6J("ngIf",n.isLoaded),e.xp6(1),e.Q6J("ngIf",n.isLoaded))},dependencies:[p.sg,p.O5,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,A.H,w.Nt,g.KE,g.hX,g.R9,y.Mq,y.hl,y.nW,_.xY,b.gD,q.ey,U,k,L]})}return a})();const St=["page"];function Lt(a,l){1&a&&(e.TgZ(0,"th",24),e._uU(1," Name "),e.qZA())}function Jt(a,l){if(1&a&&(e.TgZ(0,"td",25)(1,"app-active-text",26),e._uU(2),e.qZA()()),2&a){const t=l.$implicit;e.xp6(1),e.Q6J("active",t.employee.active),e.xp6(1),e.hij("",t.employee.fullName," ")}}function Ut(a,l){1&a&&(e.TgZ(0,"th",24),e._uU(1," Code "),e.qZA())}function kt(a,l){if(1&a&&(e.TgZ(0,"td",25),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.xp6(1),e.hij(" ",t.employee.code," ")}}function Qt(a,l){1&a&&(e.TgZ(0,"th",24),e._uU(1," Group "),e.qZA())}function Ot(a,l){if(1&a&&(e.TgZ(0,"td",25),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.xp6(1),e.hij(" ",t.employee.employeeGroup," ")}}function Yt(a,l){1&a&&(e.TgZ(0,"th",24),e._uU(1," Period "),e.qZA())}function Gt(a,l){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.salaryPeriod)}}function Mt(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function Rt(a,l){if(1&a&&(e.TgZ(0,"td",25),e.YNc(1,Gt,2,1,"span",27),e.YNc(2,Mt,2,0,"span",27),e.qZA()),2&a){const t=l.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.effectiveFrom),e.xp6(1),e.Q6J("ngIf",null==t.effectiveFrom)}}function Ht(a,l){1&a&&(e.TgZ(0,"th",28),e._uU(1," Salary ( \xa3 ) "),e.qZA())}function Pt(a,l){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.total)}}function Bt(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function Kt(a,l){if(1&a&&(e.TgZ(0,"td",29),e.YNc(1,Pt,2,1,"span",27),e.YNc(2,Bt,2,0,"span",27),e.qZA()),2&a){const t=l.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.effectiveFrom),e.xp6(1),e.Q6J("ngIf",null==t.effectiveFrom)}}function $t(a,l){1&a&&e._UZ(0,"th",28)}function jt(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"app-action-icon",35),e.NdJ("actionEvent",function(){e.CHM(t);const n=e.oxw().$implicit,r=e.oxw();return e.KtG(r.openViewDialog(n))}),e.qZA()}if(2&a){const t=e.oxw().$implicit;e.Q6J("isView",!0)("item",t)}}function Vt(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"app-action-icon",36),e.NdJ("actionEvent",function(){e.CHM(t);const n=e.oxw().$implicit,r=e.oxw();return e.KtG(r.openEditDialog(n))}),e.qZA()}if(2&a){const t=e.oxw().$implicit;e.Q6J("isEdit",!0)("item",t)}}function zt(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"app-action-icon",37),e.NdJ("actionEvent",function(){e.CHM(t);const n=e.oxw().$implicit,r=e.oxw();return e.KtG(r.openAddDialog(n))}),e.qZA()}if(2&a){const t=e.oxw().$implicit;e.Q6J("isAdd",!0)("item",t)}}function Wt(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"app-action-icon",38),e.NdJ("actionEvent",function(){e.CHM(t);const n=e.oxw().$implicit,r=e.oxw();return e.KtG(r.delete(n))}),e.qZA()}if(2&a){const t=e.oxw().$implicit;e.Q6J("isDelete",!0)("item",t)}}function Xt(a,l){if(1&a&&(e.TgZ(0,"td",30),e.YNc(1,jt,1,2,"app-action-icon",31),e.YNc(2,Vt,1,2,"app-action-icon",32),e.YNc(3,zt,1,2,"app-action-icon",33),e.YNc(4,Wt,1,2,"app-action-icon",34),e.qZA()),2&a){const t=l.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.effectiveFrom),e.xp6(1),e.Q6J("ngIf",null!=t.effectiveFrom),e.xp6(1),e.Q6J("ngIf",null==t.effectiveFrom),e.xp6(1),e.Q6J("ngIf",null!=t.effectiveFrom)}}function ea(a,l){1&a&&e._UZ(0,"tr",39)}function ta(a,l){1&a&&e._UZ(0,"tr",40)}const aa=function(){return[10,50,100]},oa=[{path:"employee",component:ft},{path:"employee/salary",component:(()=>{class a{constructor(t,o,n,r){this.salaryService=t,this.menuService=o,this.snackBarService=n,this.dialog=r,this.eList=[],this.req=new F.J,this.count=0,this.searchKey="",this.allowAdd=!1,this.allowEdit=!1,this.allowDelete=!1,this.displayedColumns=["name","code","group","period","total","manage"]}ngOnInit(){this.dataSource=new c.by(this.eList),this.req.pagination.pageSize=100,this.allowAdd=this.menuService.isMenuRoleAuthorizedSingle(C.w.EmployeeSalaryDetail_Payroll_Master,T.k.add),this.allowEdit=this.menuService.isMenuRoleAuthorizedSingle(C.w.EmployeeSalaryDetail_Payroll_Master,T.k.edit),this.allowDelete=this.menuService.isMenuRoleAuthorizedSingle(C.w.EmployeeSalaryDetail_Payroll_Master,T.k.delete),this.getList()}onSearchChange(t){this.eList=[],this.dataSource=new c.by(this.eList),this.req.pagination.pageNumber=1,this.searchKey=t}getList(){this.req.searchKey=this.searchKey,console.log(this.req),this.sub=this.salaryService.getEmployeeSalaryDetailList(this.req).subscribe(t=>{t?.response?.status==d.s.success?(this.eList.push.apply(this.eList,t?.list),this.dataSource=new c.by(this.eList),this.dataSource.paginator=this.paginator,this.count=t?.totalRecords,this.req.pagination.pageNumber+=1):alert(t?.response?.message)})}refreshList(){this.eList=[],this.dataSource=new c.by(this.eList),this.req.pagination.pageNumber=1,this.getList()}openViewDialog(t){this.dialog.open(At,{data:t,width:"40%"}).afterClosed().subscribe(n=>{1==n&&this.refreshList()})}openAddDialog(t){this.dialog.open(Zt,{data:t,width:"40%"}).afterClosed().subscribe(n=>{1==n&&this.refreshList()})}openEditDialog(t){this.dialog.open(Ft,{data:t,width:"40%"}).afterClosed().subscribe(n=>{1==n&&this.refreshList()})}delete(t){confirm(Q.confirmDelete(t.employee.fullName+" salary"))&&(this.sub=this.salaryService.deleteSalary(t.employee.id).subscribe(o=>{o?.status==d.s.success?this.refreshList():alert(o?.message)}))}ngOnDestroy(){this.sub.unsubscribe()}static#e=this.\u0275fac=function(o){return new(o||a)(e.Y36(Y),e.Y36(X.h),e.Y36(O.c),e.Y36(_.uw))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-salary"]],viewQuery:function(o,n){if(1&o&&e.Gf(St,5),2&o){let r;e.iGM(r=e.CRH())&&(n.paginator=r.first)}},decls:33,vars:8,consts:[[1,"row"],[1,"col-3","offset-9"],[3,"onSearchChange","onSearch"],[1,"row","p-2"],[1,"col-3"],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","group"],["matColumnDef","period"],["matColumnDef","total"],["mat-header-cell","","class","text-end",4,"matHeaderCellDef"],["mat-cell","","class","text-end",4,"matCellDef"],["matColumnDef","manage"],["mat-cell","","class","text-end","style","width: 16rem;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","",3,"pageSizeOptions"],["page",""],[1,"col-6"],[3,"loaded","count","loadMore"],["mat-header-cell",""],["mat-cell",""],[3,"active"],[4,"ngIf"],["mat-header-cell","",1,"text-end"],["mat-cell","",1,"text-end"],["mat-cell","",1,"text-end",2,"width","16rem"],[3,"isView","item","actionEvent",4,"ngIf"],[3,"isEdit","item","actionEvent",4,"ngIf"],[3,"isAdd","item","actionEvent",4,"ngIf"],[3,"isDelete","item","actionEvent",4,"ngIf"],[3,"isView","item","actionEvent"],[3,"isEdit","item","actionEvent"],[3,"isAdd","item","actionEvent"],[3,"isDelete","item","actionEvent"],["mat-header-row",""],["mat-row",""]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"app-search-filter",2),e.NdJ("onSearchChange",function(m){return n.onSearchChange(m)})("onSearch",function(){return n.getList()}),e.qZA()()(),e.TgZ(3,"div",3)(4,"app-table-heading",4),e._uU(5," Salary "),e.qZA()(),e.TgZ(6,"div",5)(7,"table",6),e.ynx(8,7),e.YNc(9,Lt,2,0,"th",8),e.YNc(10,Jt,3,2,"td",9),e.BQk(),e.ynx(11,10),e.YNc(12,Ut,2,0,"th",8),e.YNc(13,kt,2,1,"td",9),e.BQk(),e.ynx(14,11),e.YNc(15,Qt,2,0,"th",8),e.YNc(16,Ot,2,1,"td",9),e.BQk(),e.ynx(17,12),e.YNc(18,Yt,2,0,"th",8),e.YNc(19,Rt,3,2,"td",9),e.BQk(),e.ynx(20,13),e.YNc(21,Ht,2,0,"th",14),e.YNc(22,Kt,3,2,"td",15),e.BQk(),e.ynx(23,16),e.YNc(24,$t,1,0,"th",14),e.YNc(25,Xt,5,4,"td",17),e.BQk(),e.YNc(26,ea,1,0,"tr",18),e.YNc(27,ta,1,0,"tr",19),e.qZA(),e._UZ(28,"mat-paginator",20,21),e.qZA(),e.TgZ(30,"div",0)(31,"div",22)(32,"app-pagination",23),e.NdJ("loadMore",function(){return n.getList()}),e.qZA()()()),2&o&&(e.xp6(7),e.Q6J("dataSource",n.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(7,aa)),e.xp6(4),e.Q6J("loaded",n.dataSource.data.length)("count",n.count))},dependencies:[p.O5,ee.Q,te.c,ae.u,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,oe.NW,ie,L],styles:["div.scroll[_ngcontent-%COMP%]{max-height:45rem;overflow-x:hidden;overflow-y:auto}"]})}return a})()}];let ia=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=e.oAB({type:a});static#a=this.\u0275inj=e.cJS({imports:[D.Bz.forChild(oa)]})}return a})(),na=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=e.oAB({type:a});static#a=this.\u0275inj=e.cJS({imports:[p.ez,D.Bz,ia,i.u5,i.UX,M.JF,N.o,x.g]})}return a})()},7114:(G,Z,s)=>{s.d(Z,{Q:()=>T});var p=s(7579),i=s(4650),N=s(6895),x=s(4859);let M=(()=>{class d{constructor(u,h){this.element=u,this.renderer=h}ngOnChanges(u){this.loaded==this.total?(this.renderer.addClass(this.element.nativeElement,"text-success"),this.renderer.removeClass(this.element.nativeElement,"text-info")):(this.renderer.removeClass(this.element.nativeElement,"text-success"),this.renderer.addClass(this.element.nativeElement,"text-info"))}static#e=this.\u0275fac=function(h){return new(h||d)(i.Y36(i.SBq),i.Y36(i.Qsj))};static#t=this.\u0275dir=i.lG2({type:d,selectors:[["","appLoadedStatus",""]],inputs:{loaded:"loaded",total:"total"},features:[i.TTD]})}return d})();function D(d,F){if(1&d&&(i.TgZ(0,"label",5)(1,"span",6),i._uU(2),i.qZA(),i.TgZ(3,"span",7),i._uU(4," of "),i.qZA(),i.TgZ(5,"span",6),i._uU(6),i.qZA()()),2&d){const u=i.oxw(2);i.Q6J("loaded",u.loaded)("total",u.count),i.xp6(1),i.Q6J("ngClass",u.loaded!=u.count?"page-data":"page-data-full"),i.xp6(1),i.Oqu(u.loaded),i.xp6(3),i.Q6J("ngClass",u.loaded!=u.count?"page-data":"page-data-full"),i.xp6(1),i.Oqu(u.count)}}function c(d,F){if(1&d){const u=i.EpF();i.TgZ(0,"button",8),i.NdJ("click",function(){i.CHM(u);const e=i.oxw(2);return i.KtG(e.more())}),i._uU(1,"More ..."),i.qZA()}}function C(d,F){if(1&d&&(i.TgZ(0,"div",1),i.YNc(1,D,7,6,"label",2),i.TgZ(2,"div",3),i.YNc(3,c,2,0,"button",4),i.qZA()()),2&d){const u=i.oxw();i.xp6(1),i.Q6J("ngIf",u.loaded!=u.count),i.xp6(2),i.Q6J("ngIf",u.loaded!=u.count)}}let T=(()=>{class d{constructor(){this.loadMore=new p.x}more(){this.loadMore.next(!0)}static#e=this.\u0275fac=function(h){return new(h||d)};static#t=this.\u0275cmp=i.Xpm({type:d,selectors:[["app-pagination"]],inputs:{count:"count",loaded:"loaded"},outputs:{loadMore:"loadMore"},decls:1,vars:1,consts:[["class","row my-4",4,"ngIf"],[1,"row","my-4"],["appLoadedStatus","","class","col-4 mx-2",3,"loaded","total",4,"ngIf"],[1,"col-6"],["mat-raised-button","","color","primary","type","button","class","col-4",3,"click",4,"ngIf"],["appLoadedStatus","",1,"col-4","mx-2",3,"loaded","total"],[3,"ngClass"],[1,"page-data"],["mat-raised-button","","color","primary","type","button",1,"col-4",3,"click"]],template:function(h,e){1&h&&i.YNc(0,C,4,2,"div",0),2&h&&i.Q6J("ngIf",e.loaded>0)},dependencies:[N.mk,N.O5,x.lW,M],styles:[".page-data[_ngcontent-%COMP%]{background-color:transparent;color:var(--text-color);border-radius:10px;opacity:.3}.page-data-full[_ngcontent-%COMP%]{background-color:#009cbf;color:#fff;padding:10px;border-radius:10px}"]})}return d})()},2346:(G,Z,s)=>{s.d(Z,{g:()=>N});var p=s(6895),i=s(4650);let N=(()=>{class x{static#e=this.\u0275fac=function(c){return new(c||x)};static#t=this.\u0275mod=i.oAB({type:x});static#a=this.\u0275inj=i.cJS({imports:[p.ez]})}return x})()}}]);