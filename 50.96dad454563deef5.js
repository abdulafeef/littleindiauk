"use strict";(self.webpackChunklittle_india_UI_app=self.webpackChunklittle_india_UI_app||[]).push([[50],{50:(I,y,a)=>{a.r(y),a.d(y,{ReportModule:()=>L});var m=a(6895),h=a(2956);var e=a(8256),b=a(5302),k=a(3359),v=a(5659),_=a(7579),R=a(9057),Z=a(6037);let d=(()=>{class o{constructor(t){this.http=t,this.reportEvent=new _.x}getReportBetweenMonthExcel(t){let n=R.b.getReportBetweenMonthExcel;return this.reportEvent.next("Downloading ..."),this.http.postAttachment(n,t)}getReportBetweenWeekExcel(t){let n=R.b.getReportBetweenWeekExcel;return this.reportEvent.next("Downloading ..."),this.http.postAttachment(n,t)}static#e=this.\u0275fac=function(n){return new(n||o)(e.LFG(Z.L))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function F(o,l,t,n,r,i,c){try{var p=o[i](c),u=p.value}catch(Q){return void t(Q)}p.done?l(u):Promise.resolve(u).then(n,r)}function w(o){return function(){var l=this,t=arguments;return new Promise(function(n,r){var i=o.apply(l,t);function c(u){F(i,n,r,c,p,"next",u)}function p(u){F(i,n,r,c,p,"throw",u)}c(void 0)})}}let g=(()=>{class o{constructor(t){this.rs=t}downloadExcel(t,n){var r=this;return w(function*(){const c=new Blob([t.body],{type:t.body?.type});if(""!=c.type){const p=document.createElement("a");p.setAttribute("style","display:none;"),document.body.appendChild(p),p.download=n,p.href=URL.createObjectURL(c),p.click(),document.body.removeChild(p),r.rs.reportEvent.next("Downloaded")}})()}static#e=this.\u0275fac=function(n){return new(n||o)(e.LFG(d))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();const M=function(o,l){return{"btn-primary":o,"btn-light":l}};function x(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"button",7),e.NdJ("click",function(){const i=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.gotoReport(i))}),e._uU(2),e.qZA()()}if(2&o){const t=l.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.WLB(2,M,t==n.reportOption,t!=n.reportOption)),e.xp6(1),e.Oqu(t)}}let T=(()=>{class o{constructor(t,n,r,i,c,p){this.fyService=t,this.weekService=n,this.ds=r,this.reportService=i,this.fileService=c,this.router=p,this.reportOptions=["Month","Week"],this.reportOption="Month",this.status=""}ngOnInit(){this.gotoReport(this.reportOption),this.reportEventSubscription=this.reportService.reportEvent.subscribe(t=>{this.status=t})}gotoReport(t){this.reportOption=t,"Month"==this.reportOption?this.router.navigate(["/report","month"]):"Week"==this.reportOption&&this.router.navigate(["/report","week"])}ngOnDestroy(){this.reportEventSubscription?.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(b.m),e.Y36(k.F),e.Y36(v.R),e.Y36(d),e.Y36(g),e.Y36(h.F0))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-report"]],decls:9,vars:2,consts:[[1,"row","p-4"],[1,"col-2","offset-5"],[1,"row"],["class","col-6",4,"ngFor","ngForOf"],[1,"row","form-margin"],[1,"col-12","text-center"],[1,"col-6"],[1,"col-12","btn","btn",3,"ngClass","click"]],template:function(n,r){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,x,3,5,"div",3),e.qZA()()(),e.TgZ(4,"div",4),e._UZ(5,"router-outlet"),e.qZA(),e.TgZ(6,"div",2)(7,"label",5),e._uU(8),e.qZA()()),2&n&&(e.xp6(3),e.Q6J("ngForOf",r.reportOptions),e.xp6(5),e.Oqu(r.status))},dependencies:[m.mk,m.sg,h.lC]})}return o})();class S{}var s=a(433);const C=["betweenMonthForm"];function B(o,l){if(1&o&&(e.TgZ(0,"option",15),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=l.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(e.xi3(2,2,t,"yyyy-MMM"))}}function A(o,l){if(1&o&&(e.TgZ(0,"option",15),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=l.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(e.xi3(2,2,t,"yyyy-MMM"))}}let W=(()=>{class o{constructor(t,n,r,i,c){this.fyService=t,this.ds=n,this.reportService=r,this.fileService=i,this.router=c,this.monthList=[]}ngOnInit(){this.monthList=this.fyService.getFyMonthList(),this.reportService.reportEvent.next("")}getBetweenMonthReport(){var t=this;let n=new S,r=new Date(this.betweenMonthForm.value.from),i=new Date(this.betweenMonthForm.value.to);n.year=r.getFullYear(),n.month=r.getMonth()+1,n.addMonth=this.ds.totalMonth(r,i),this.betweenMonthReportSubscription=this.reportService.getReportBetweenMonthExcel(n).subscribe(function(){var c=w(function*(p){var u=`ReportBetweenMonth ${t.ds.formatToMonth(r)} - ${t.ds.formatToMonth(i)}.xlsx`;yield t.fileService.downloadExcel(p,u)});return function(p){return c.apply(this,arguments)}}())}reset(){this.betweenMonthForm.reset(),this.reportService.reportEvent.next("")}ngOnDestroy(){this.betweenMonthReportSubscription?.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(b.m),e.Y36(v.R),e.Y36(d),e.Y36(g),e.Y36(h.F0))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-report-between-month"]],viewQuery:function(n,r){if(1&n&&e.Gf(C,5),2&n){let i;e.iGM(i=e.CRH())&&(r.betweenMonthForm=i.first)}},decls:24,vars:4,consts:[[1,"row","p-4","form-margin"],[1,"col-4","offset-4"],[1,"text-center","mb-5"],[1,"form-heading"],[1,"col-6","offset-3",3,"ngSubmit"],["betweenMonthForm","ngForm"],[1,"form-outline","mb-4"],[1,"form-group"],["for","from",1,"form-label"],["id","from","name","from","required","",1,"form-control",3,"ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","to",1,"form-label"],["id","to","name","to","required","",1,"form-control",3,"ngModel"],["type","button",1,"col-4","btn","btn-warning","btn-block","mb-4",3,"disabled","click"],["type","submit",1,"col-4","offset-4","btn","btn-primary","btn-block","mb-4",3,"disabled"],[3,"value"]],template:function(n,r){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Month Report"),e.qZA()(),e.TgZ(5,"form",4,5),e.NdJ("ngSubmit",function(){return r.getBetweenMonthReport()}),e.TgZ(7,"div",6)(8,"div",7)(9,"label",8),e._uU(10,"From"),e.qZA(),e.TgZ(11,"select",9),e.YNc(12,B,3,5,"option",10),e.qZA()()(),e.TgZ(13,"div",6)(14,"div",7)(15,"label",11),e._uU(16,"To"),e.qZA(),e.TgZ(17,"select",12),e.YNc(18,A,3,5,"option",10),e.qZA()()(),e.TgZ(19,"div")(20,"button",13),e.NdJ("click",function(){return r.reset()}),e._uU(21,"Reset"),e.qZA(),e.TgZ(22,"button",14),e._uU(23,"Download"),e.qZA()()()()()),2&n){const i=e.MAs(6);e.xp6(12),e.Q6J("ngForOf",r.monthList),e.xp6(6),e.Q6J("ngForOf",r.monthList),e.xp6(2),e.Q6J("disabled",!i.valid),e.xp6(2),e.Q6J("disabled",!i.valid)}},dependencies:[m.sg,s._Y,s.YN,s.Kr,s.EJ,s.JJ,s.JL,s.Q7,s.On,s.F,m.uU]})}return o})();class O{}var Y=a(673);function J(o,l){if(1&o&&(e.TgZ(0,"option",14),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.s9C("value",t.weekNumber),e.xp6(1),e.lnq("# ",t.weekNumber," - ",t.from," - ",t.to," ")}}function E(o,l){if(1&o&&(e.TgZ(0,"option",14),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.s9C("value",t.weekNumber),e.xp6(1),e.lnq("# ",t.weekNumber," - ",t.from," - ",t.to," ")}}const N=[{path:"",component:T,children:[{path:"month",component:W},{path:"week",component:(()=>{class o{constructor(t,n,r,i,c,p){this.fyService=t,this.weekService=n,this.ds=r,this.reportService=i,this.fileService=c,this.router=p,this.weekList=[]}ngOnInit(){this.betweenWeekForm=new s.cw({from:new s.NI(null,s.kI.required),to:new s.NI(null,s.kI.required)}),this.weekSubscription=this.weekService.getWeekList().subscribe(t=>{t?.response?.status==Y.s.success?this.weekList=t.list:alert(t?.response?.message)}),this.reportService.reportEvent.next("")}getBetweenWeekReport(){var t=this;let n=new O,r=this.fyService.getFyLocal();n.financialYearId=r.id,n.fromWeekNumber=this.betweenWeekForm.value.from,n.toWeekNumber=this.betweenWeekForm.value.to,this.betweenWeekReportSubscription=this.reportService.getReportBetweenWeekExcel(n).subscribe(function(){var i=w(function*(c){var p=`ReportBetweenWeek-#${n.fromWeekNumber}-#${n.toWeekNumber}.xlsx`;yield t.fileService.downloadExcel(c,p)});return function(c){return i.apply(this,arguments)}}())}reset(){this.betweenWeekForm.reset(),this.reportService.reportEvent.next("")}ngOnDestroy(){this.weekSubscription.unsubscribe(),this.betweenWeekReportSubscription?.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(b.m),e.Y36(k.F),e.Y36(v.R),e.Y36(d),e.Y36(g),e.Y36(h.F0))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-report-between-week"]],decls:23,vars:5,consts:[[1,"row","p-4","form-margin"],[1,"col-6","offset-3"],[1,"text-center","mb-5"],[1,"form-heading"],[1,"col-6","offset-3",3,"formGroup","ngSubmit"],[1,"form-outline","mb-4"],[1,"form-group"],["for","from",1,"form-label"],["id","from","name","from","formControlName","from",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","to",1,"form-label"],["id","to","name","to","formControlName","to",1,"form-control"],["type","button",1,"col-4","btn","btn-warning","btn-block","mb-4",3,"disabled","click"],["type","submit",1,"col-4","offset-4","btn","btn-primary","btn-block","mb-4",3,"disabled"],[3,"value"]],template:function(n,r){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Week Report"),e.qZA()(),e.TgZ(5,"form",4),e.NdJ("ngSubmit",function(){return r.getBetweenWeekReport()}),e.TgZ(6,"div",5)(7,"div",6)(8,"label",7),e._uU(9,"From"),e.qZA(),e.TgZ(10,"select",8),e.YNc(11,J,2,4,"option",9),e.qZA()()(),e.TgZ(12,"div",5)(13,"div",6)(14,"label",10),e._uU(15,"To"),e.qZA(),e.TgZ(16,"select",11),e.YNc(17,E,2,4,"option",9),e.qZA()()(),e.TgZ(18,"div")(19,"button",12),e.NdJ("click",function(){return r.reset()}),e._uU(20,"Reset"),e.qZA(),e.TgZ(21,"button",13),e._uU(22,"Download"),e.qZA()()()()()),2&n&&(e.xp6(5),e.Q6J("formGroup",r.betweenWeekForm),e.xp6(6),e.Q6J("ngForOf",r.weekList),e.xp6(6),e.Q6J("ngForOf",r.weekList),e.xp6(2),e.Q6J("disabled",!r.betweenWeekForm.valid),e.xp6(2),e.Q6J("disabled",!r.betweenWeekForm.valid))},dependencies:[m.sg,s._Y,s.YN,s.Kr,s.EJ,s.JJ,s.JL,s.sg,s.u]})}return o})()}]}];let q=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[h.Bz.forChild(N)]})}return o})();var U=a(529);let L=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[m.ez,U.JF,h.Bz,q,s.u5,s.UX]})}return o})()}}]);