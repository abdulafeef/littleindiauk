"use strict";(self.webpackChunklittle_india_UI_app=self.webpackChunklittle_india_UI_app||[]).push([[807],{1112:(Z,_,d)=>{d.d(_,{a:()=>p});class p{constructor(s,C){this.from=s??"",this.to=C??""}}},874:(Z,_,d)=>{d.d(_,{w:()=>p});class p{constructor(){this.required=!0,this.pageNumber=1,this.pageSize=20}}},7807:(Z,_,d)=>{d.r(_),d.d(_,{DailySaleModule:()=>Kt});var p=d(6895),l=d(1635),s=d(4006),C=d(5412),v=d(7579);class A{}class D{}var M=d(673),t=d(4650),u=d(9057),L=d(6037);let m=(()=>{class e{constructor(a){this.http=a,this.manageEmitter=new v.x}getDailySaleList(a){return this.http.post(u.b.getDailySaleList,a)}getDailySaleManageDetail(a){let n=u.b.getDailySaleManageDetail;return n=n.replace(/{date}/gi,a),this.http.post(n,null)}addDailySale(a){return this.http.post(u.b.addDailySale,a)}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(L.L))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var g=d(5659),b=d(3184);let Y=(()=>{class e{constructor(a,n,o){this.element=a,this.renderer=n,this.colorService=o}ngOnInit(){this.renderer.setStyle(this.element.nativeElement,"color",this.colorService.getSaleTypeColor(this.saleType))}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(b.A))};static#e=this.\u0275dir=t.lG2({type:e,selectors:[["","appSaleTypeColor",""]],inputs:{saleType:["appSaleTypeColor","saleType"]}})}return e})();const Q=["*"];let G=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-form-heading"]],ngContentSelectors:Q,decls:3,vars:0,consts:[[1,"text-center","bg-primary","text-light","py-3"],[1,"fw-normal"]],template:function(n,o){1&n&&(t.F$t(),t.TgZ(0,"div",0)(1,"h5",1),t.Hsn(2),t.qZA()())}})}return e})();var T=d(4859),F=d(7392),q=d(4144),x=d(9549),S=d(9602);function O(e,i){if(1&e&&(t.TgZ(0,"div",33)(1,"mat-form-field",34)(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"input",35),t.qZA()()),2&e){const a=i.index,n=t.oxw(2);t.Q6J("formGroupName",a),t.xp6(3),t.Oqu(n.manageRequest.directDailySaleLines[a].saleGroup.name)}}function R(e,i){if(1&e&&(t.TgZ(0,"div",33)(1,"mat-form-field",34)(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"input",35),t.qZA()()),2&e){const a=i.index,n=t.oxw(2);t.Q6J("formGroupName",a),t.xp6(3),t.Oqu(n.manageRequest.tipDailySaleLines[a].saleGroup.name)}}function P(e,i){if(1&e&&(t.TgZ(0,"div",39)(1,"mat-form-field",34)(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"input",35),t.qZA()()),2&e){const a=i.index,n=t.oxw().index,o=t.oxw(2);t.Q6J("formGroupName",a),t.xp6(3),t.Oqu(o.manageRequest.platformDailySaleLines[n].platformDailySaleLines[a].saleGroup.name)}}function B(e,i){if(1&e&&(t.TgZ(0,"div",36)(1,"h6",37),t._uU(2),t.qZA(),t.TgZ(3,"div",18)(4,"div",4),t.YNc(5,P,5,2,"div",38),t.qZA()()()),2&e){const a=i.$implicit,n=i.index,o=t.oxw(2);t.Q6J("formGroupName",n),t.xp6(2),t.Oqu(o.manageRequest.platformDailySaleLines[n].platform),t.xp6(3),t.Q6J("ngForOf",o.getLines(a))}}function k(e,i){if(1&e&&(t.TgZ(0,"h1",40),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=t.oxw(2);t.xp6(1),t.Oqu(t.xi3(2,1,a.total,"1.2-2"))}}function H(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"form",14),t.NdJ("ngSubmit",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.manageDailySale())}),t.TgZ(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"div",19)(6,"div",20)(7,"div",21)(8,"h2",22),t._uU(9,"Direct"),t.qZA()(),t.TgZ(10,"div",4),t.YNc(11,O,5,2,"div",23),t.qZA()()()()()(),t.TgZ(12,"div",16)(13,"div",24)(14,"div",18)(15,"div",19)(16,"div",20)(17,"div",21)(18,"h2",22),t._uU(19,"Tip"),t.qZA()(),t.TgZ(20,"div",4),t.YNc(21,R,5,2,"div",23),t.qZA()()()()()()(),t.TgZ(22,"div",25)(23,"h2",22),t._uU(24,"Platform"),t.qZA()(),t.TgZ(25,"div",26)(26,"div",18)(27,"div",15),t.YNc(28,B,6,3,"div",27),t.qZA()()(),t.TgZ(29,"div",28)(30,"div",29),t.YNc(31,k,3,4,"h1",30),t.qZA(),t.TgZ(32,"div",31)(33,"button",32),t._uU(34,"Save"),t.qZA()()()()}if(2&e){const a=t.oxw();t.Q6J("formGroup",a.manageForm),t.xp6(8),t.Q6J("appSaleTypeColor","direct"),t.xp6(3),t.Q6J("ngForOf",a.directControls),t.xp6(7),t.Q6J("appSaleTypeColor","tip"),t.xp6(3),t.Q6J("ngForOf",a.tipControls),t.xp6(2),t.Q6J("appSaleTypeColor","platform"),t.xp6(5),t.Q6J("ngForOf",a.platformControls),t.xp6(3),t.Q6J("ngIf",a.requiredDataProcessed)}}let I=(()=>{class e{constructor(a,n,o,r,c,y){this.dialogRef=a,this.activatedRoute=n,this.router=o,this.dailySaleService=r,this.ds=c,this.data=y,this.requiredDataProcessed=!1,this.total=0,this.addEvent=new v.x}get directControls(){return this.manageForm.get("directLines").get("lines").controls}get tipControls(){return this.manageForm.get("tipLines").get("lines").controls}get platformControls(){return this.manageForm.get("platformLines").get("lines").controls}getLines(a){return a.get("lines").controls}ngOnInit(){this.filterForm=new s.cw({date:new s.NI(this.data,s.kI.required)}),this.getDailySaleManageDetail()}getDailySaleManageDetail(){this.requiredDataProcessed=!1,this.dailySaleService.getDailySaleManageDetail(this.data).subscribe(a=>{if(a.response?.status!=M.s.success)return;this.manageRequest=a.item;let n=new s.cw({lines:new s.Oe([])}),o=new s.cw({lines:new s.Oe([])}),r=new s.cw({lines:new s.Oe([])});this.manageRequest?.directDailySaleLines.forEach(c=>{let y=new s.NI(0==c.amount?null:c.amount.toFixed(2)),h=new s.cw({amount:y});n.get("lines").push(h)}),this.manageRequest?.tipDailySaleLines.forEach(c=>{let y=new s.NI(0==c.amount?null:c.amount.toFixed(2)),h=new s.cw({amount:y});o.get("lines").push(h)}),this.manageRequest?.platformDailySaleLines.forEach(c=>{let y=new s.cw({lines:new s.Oe([])});c.platformDailySaleLines.forEach(h=>{let te=new s.NI(0==h.amount?null:h.amount.toFixed(2)),ee=new s.cw({amount:te});y.get("lines").push(ee)}),r.get("lines").push(y)}),this.manageForm=new s.cw({directLines:n,tipLines:o,platformLines:r}),this.calculateTotal(),this.requiredDataProcessed=!0,this.manageForm.valueChanges.subscribe(()=>{this.calculateTotal()})})}ngOnChanges(a){}onPrev(){let a=this.ds.prevDay(new Date(this.data)),n=this.ds.formatToRequest(a);this.data=n,this.filterForm.patchValue({date:n}),this.getDailySaleManageDetail()}onNext(){let a=this.ds.nextDay(new Date(this.data)),n=this.ds.formatToRequest(a);this.data=n,this.filterForm.patchValue({date:n}),this.getDailySaleManageDetail()}onChange(a){let n=this.ds.formatToRequest(this.filterForm.value.date);this.data=n,this.filterForm.patchValue({date:n}),this.getDailySaleManageDetail()}calculateTotal(){this.total=0,this.manageForm.get("directLines.lines").controls.forEach((a,n)=>{!isNaN(a.value.amount)&&null!=a.value.amount&&""!=a.value.amount&&(this.total=this.total+parseFloat(a.value.amount))}),this.manageForm.get("tipLines.lines").controls.forEach((a,n)=>{!isNaN(a.value.amount)&&null!=a.value.amount&&""!=a.value.amount&&(this.total=this.total+parseFloat(a.value.amount))}),this.manageForm.get("platformLines.lines").controls.forEach((a,n)=>{a.get("lines").controls.forEach((o,r)=>{!isNaN(o.value.amount)&&null!=o.value.amount&&""!=o.value.amount&&(this.total=this.total+parseFloat(o.value.amount))})})}manageDailySale(){if(!confirm("Are you sure to add sale ?"))return;let a=new A;a.dateOfSale=this.ds.formatToRequest(this.filterForm.value.date),a.dailySaleLines=[],this.manageForm.get("directLines.lines").controls.forEach((n,o)=>{let r=new D;r.saleGroup=this.manageRequest.directDailySaleLines[o].saleGroup,r.amount=isNaN(n.value.amount)||null==n.value.amount||""==n.value.amount?0:parseFloat(n.value.amount),a.dailySaleLines.push(r)}),this.manageForm.get("tipLines.lines").controls.forEach((n,o)=>{let r=new D;r.saleGroup=this.manageRequest.tipDailySaleLines[o].saleGroup,r.amount=isNaN(n.value.amount)||null==n.value.amount||""==n.value.amount?0:parseFloat(n.value.amount),a.dailySaleLines.push(r)}),this.manageForm.get("platformLines.lines").controls.forEach((n,o)=>{let r=this.manageRequest?.platformDailySaleLines[o];n.get("lines").controls.forEach((c,y)=>{let h=new D;h.saleGroup=r.platformDailySaleLines[y].saleGroup,h.amount=isNaN(c.value.amount)||null==c.value.amount||""==c.value.amount?0:parseFloat(c.value.amount),a.dailySaleLines.push(h)})}),this.dsManageSub=this.dailySaleService.addDailySale(a).subscribe(n=>{this.addEvent.next(!0),this.onNext()})}ngOnDestroy(){this.paramSub?.unsubscribe(),this.dsManageSub?.unsubscribe(),this.eventSub?.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(C.so),t.Y36(l.gz),t.Y36(l.F0),t.Y36(m),t.Y36(g.R),t.Y36(C.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-daily-sale-manage"]],features:[t.TTD],decls:24,vars:4,consts:[[1,"mat-dialog-content"],[1,"row","p-0","m-0"],[1,"col-4","offset-4"],[1,"row","mt-md-4",3,"formGroup"],[1,"row"],[1,"col-3","mt-md-4","text-end"],["mat-fab","","color","primary",3,"click"],[1,"col-6","mt-md-4"],["appearance","outline",1,"col-12","form-field"],["matInput","","formControlName","date",3,"matDatepicker","dateChange"],["matIconSuffix","",3,"for"],["picker",""],[1,"col-3","mt-md-4","text-start"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row","m-0","px-4"],[1,"col-md-4","col-12"],["formGroupName","directLines"],["formArrayName","lines"],[1,"row","my-md-3"],[1,"col-12"],[1,"row","py-md-4"],[1,"mat-headline-6",3,"appSaleTypeColor"],["class","col-md-4 col-6 form-group",3,"formGroupName",4,"ngFor","ngForOf"],["formGroupName","tipLines"],[1,"row","px-4","m-0","pt-md-3"],["formGroupName","platformLines"],["class","col-md-4 col-12 py-3",3,"formGroupName",4,"ngFor","ngForOf"],[1,"row","m-0"],[1,"col-4","offset-6"],["class","mat-headline-4 text-end text-mat-accent total-sale",4,"ngIf"],[1,"col-2","offset-0"],["mat-raised-button","","color","primary",1,"col-6","offset-3","mt-3"],[1,"col-md-4","col-6","form-group",3,"formGroupName"],["appearance","outline","floatLabel","always",1,"form-field","w-100"],["type","text","placeholder","","matInput","","formControlName","amount"],[1,"col-md-4","col-12","py-3",3,"formGroupName"],[1,"my-md-2","mat-body","text-dark"],["class","col-4 form-group",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-4","form-group",3,"formGroupName"],[1,"mat-headline-4","text-end","text-mat-accent","total-sale"]],template:function(n,o){if(1&n&&(t.TgZ(0,"app-form-heading"),t._uU(1," Add Daily Sale\n"),t.qZA(),t.TgZ(2,"div",0)(3,"div",1)(4,"div",2)(5,"form",3)(6,"div",4)(7,"div",5)(8,"button",6),t.NdJ("click",function(){return o.onPrev()}),t.TgZ(9,"mat-icon"),t._uU(10,"chevron_left"),t.qZA()()(),t.TgZ(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Date"),t.qZA(),t.TgZ(15,"input",9),t.NdJ("dateChange",function(c){return o.onChange(c)}),t.qZA(),t._UZ(16,"mat-datepicker-toggle",10)(17,"mat-datepicker",null,11),t.qZA()(),t.TgZ(19,"div",12)(20,"button",6),t.NdJ("click",function(){return o.onNext()}),t.TgZ(21,"mat-icon"),t._uU(22,"chevron_right"),t.qZA()()()()()()(),t.YNc(23,H,35,8,"form",13),t.qZA()),2&n){const r=t.MAs(18);t.xp6(5),t.Q6J("formGroup",o.filterForm),t.xp6(10),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(7),t.Q6J("ngIf",o.requiredDataProcessed)}},dependencies:[p.sg,p.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE,Y,G,T.lW,T.cs,F.Hw,q.Nt,x.KE,x.hX,x.R9,S.Mq,S.hl,S.nW,p.JJ],styles:[".sale-group-label[_ngcontent-%COMP%]{color:#807c7c}input[_ngcontent-%COMP%]{font-size:large!important}.total-sale[_ngcontent-%COMP%]{font-size:50px;font-family:Bungee;font-weight:bolder}"]})}return e})();var f=d(7155);class j{dictSaleType(){let i=new Map;return this.saleBySaleTypeList.forEach(a=>{i.set(a.saleType.toLowerCase(),a.totalSale)}),i}dictPaymentType(){let i=new Map;return this.saleByPaymentTypeList.forEach(a=>{i.set(a.paymentType.toLowerCase(),a.totalSale)}),i}}class E extends j{}var J=d(1112),z=d(874);class X{constructor(){this.between=new J.a,this.pagination=new z.w}}var $=d(3359);let V=(()=>{class e{constructor(a){this.ds=a,this.filterEvent=new v.x,this.loadEvent=new v.x}ngOnInit(){this.initDateRange(),this.filterForm=new s.cw({from:new s.NI(this.req.from,[s.kI.required]),to:new s.NI(this.req.to,[s.kI.required])}),this.valueChangeSubscription=this.filterForm.valueChanges.subscribe(a=>{this.req.from=this.ds.formatToRequest(this.filterForm.value.from),this.req.to=this.ds.formatToRequest(this.filterForm.value.to),this.filterEvent.next(this.req)})}ngOnChanges(a){null!=this.filterForm&&this.filterForm.patchValue({from:this.req.from,to:this.req.to})}initDateRange(){let n=this.ds.Today;this.req.from=this.ds.formatToRequest(this.ds.Today),this.req.to=this.ds.formatToRequest(n)}getList(){this.loadEvent.next()}ngOnDestroy(){this.valueChangeSubscription?.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(g.R))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-filter-between-date"]],inputs:{req:"req"},outputs:{filterEvent:"filterEvent",loadEvent:"loadEvent"},features:[t.TTD],decls:22,vars:5,consts:[[1,"row","mt-4",3,"formGroup","ngSubmit"],[1,"col-md-3","col-8","offset-md-8","offset-1"],[1,"row"],[1,"col-md-6","col-6","px-2"],["appearance","outline",1,"col-12","form-field"],["matInput","","formControlName","from",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],["matInput","","formControlName","to",3,"matDatepicker"],["picker1",""],[1,"col-md-1","col-3","px-4"],["type","submit","mat-raised-button","","color","primary",1,"col-12","mt-2"]],template:function(n,o){if(1&n&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.getList()}),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),t._uU(6,"From"),t.qZA(),t._UZ(7,"input",5)(8,"mat-datepicker-toggle",6)(9,"mat-datepicker",null,7),t.qZA()(),t.TgZ(11,"div",3)(12,"mat-form-field",4)(13,"mat-label"),t._uU(14,"To"),t.qZA(),t._UZ(15,"input",8)(16,"mat-datepicker-toggle",6)(17,"mat-datepicker",null,9),t.qZA()()()(),t.TgZ(19,"div",10)(20,"button",11),t._uU(21,"Load"),t.qZA()()()),2&n){const r=t.MAs(10),c=t.MAs(18);t.Q6J("formGroup",o.filterForm),t.xp6(7),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(7),t.Q6J("matDatepicker",c),t.xp6(1),t.Q6J("for",c)}},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,x.KE,x.hX,x.R9,T.lW,q.Nt,S.Mq,S.hl,S.nW]})}return e})();var w=d(7020),W=d(2873);function K(e,i){if(1&e&&(t.TgZ(0,"div",1)(1,"div",2)(2,"h2",3),t._uU(3),t.ALo(4,"number"),t.qZA()(),t.TgZ(5,"div",4),t._UZ(6,"div",5),t.qZA(),t.TgZ(7,"div",4),t._UZ(8,"div",5),t.qZA(),t.TgZ(9,"div",6),t._UZ(10,"div",7),t.qZA()()),2&e){const a=t.oxw();t.xp6(3),t.Oqu(t.xi3(4,4,a.dsSummary.totalSale,"1.0-0")),t.xp6(3),t.Q6J("chart",a.paymentChart),t.xp6(2),t.Q6J("chart",a.saleTypeChart),t.xp6(2),t.Q6J("chart",a.platformChart)}}let tt=(()=>{class e{constructor(a,n){this.colorService=a,this.graphService=n,this.paymentChart=new w.kL,this.saleTypeChart=new w.kL,this.platformChart=new w.kL,this.cash=0,this.card=0,this.online=0,this.direct=0,this.tip=0,this.platform=0,this.loaded=!1,this.graphHeight=200}ngOnChanges(a){this.loaded=null!=this.dsSummary.from,this.loadPaymentChart(),this.loadSaleTypeChart(),this.loadPlatformChart()}loadPaymentChart(){let a=this.dsSummary.saleByPaymentTypeList.map(r=>({name:r.paymentType,y:r.totalSale,color:this.colorService.getPaymentColor(r.paymentType)})),n=this.dsSummary.saleByPaymentTypeList.map(r=>r.paymentType);this.paymentChart=this.graphService.getPieChart({data:a,labelList:n,title:"Payment",labelY:"Sale",innerSize:"60%",height:this.graphHeight})}loadSaleTypeChart(){let a=this.dsSummary.saleBySaleTypeList.map(r=>({name:r.saleType,y:r.totalSale,color:this.colorService.getSaleTypeColor(r.saleType)})),n=this.dsSummary.saleBySaleTypeList.map(r=>r.saleType);this.saleTypeChart=this.graphService.getPieChart({data:a,labelList:n,title:"Sale",labelY:"Sale",innerSize:"60%",height:this.graphHeight})}loadPlatformChart(){let a=this.dsSummary.saleByPlatformList.map(c=>c.salePlatform.name),n=this.dsSummary.saleByPlatformList.map(c=>({y:c.totalSale,color:"#6167C7"})),o=0;n.forEach(c=>{o+=c.y}),this.platformChart=this.graphService.getBarChart(n,a,"Platform","Sale",this.graphHeight)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(b.A),t.Y36(W.M))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-daily-sale-summary"]],inputs:{dsSummary:"dsSummary"},features:[t.TTD],decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-md-2","col-12","mt-5"],[1,"mat-headline-4","text-center","text-mat-primary","summary-value"],[1,"col-md-3","col-6"],[1,"pie",3,"chart"],[1,"col-md-4","col-12"],[1,"column",3,"chart"]],template:function(n,o){1&n&&t.YNc(0,K,11,7,"div",0),2&n&&t.Q6J("ngIf",o.loaded)},dependencies:[p.O5,w.Dm,p.JJ],styles:[".testimonial-group[_ngcontent-%COMP%] > .row[_ngcontent-%COMP%]{overflow-x:auto;white-space:nowrap}.testimonial-group[_ngcontent-%COMP%] > .row[_ngcontent-%COMP%] > .col-sm-4[_ngcontent-%COMP%]{display:inline-block;float:none}.summary-value[_ngcontent-%COMP%]{font-size:60px}.summary-head[_ngcontent-%COMP%]{font-size:12px;color:gray}"]})}return e})();var et=d(7114),U=d(7974);let at=(()=>{class e{constructor(a){this.pipe=a}transform(a,n){let o=new Date(a);return this.pipe.transform(o,n)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(p.uU,16))};static#e=this.\u0275pipe=t.Yjl({name:"formatDate",type:e,pure:!0})}return e})();const nt=["page"];function it(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1," Date "),t.qZA())}function ot(e,i){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.ALo(2,"formatDate"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.date,"EEE, dd-MMM-yyyy")," ")}}function rt(e,i){1&e&&(t.TgZ(0,"th",27),t._uU(1,"Cash "),t.qZA())}function lt(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.item.saleByPaymentTypeList[0].totalSale,"1.2-2")," ")}}function st(e,i){1&e&&(t.TgZ(0,"th",27),t._uU(1," Card "),t.qZA())}function dt(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.item.saleByPaymentTypeList[1].totalSale,"1.2-2")," ")}}function ct(e,i){1&e&&(t.TgZ(0,"th",27),t._uU(1," Online "),t.qZA())}function mt(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.item.saleByPaymentTypeList[2].totalSale,"1.2-2")," ")}}function ut(e,i){1&e&&(t.TgZ(0,"th",27),t._uU(1," Direct "),t.qZA())}function pt(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.item.saleBySaleTypeList[0].totalSale,"1.2-2")," ")}}function ft(e,i){1&e&&(t.TgZ(0,"th",27),t._uU(1," Tip "),t.qZA())}function gt(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.item.saleBySaleTypeList[2].totalSale,"1.2-2")," ")}}function ht(e,i){1&e&&(t.TgZ(0,"th",27),t._uU(1," Platform "),t.qZA())}function yt(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.item.saleBySaleTypeList[1].totalSale,"1.2-2")," ")}}function vt(e,i){1&e&&(t.TgZ(0,"th",27),t._uU(1," Total "),t.qZA())}function _t(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.item.totalSale,"1.2-2")," ")}}function Ct(e,i){1&e&&t._UZ(0,"th",27)}function xt(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"td",28)(1,"button",29),t.NdJ("click",function(){const r=t.CHM(a).$implicit,c=t.oxw();return t.KtG(c.gotoManage(r.date))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()()}}function St(e,i){1&e&&t._UZ(0,"tr",30)}function bt(e,i){1&e&&t._UZ(0,"tr",31)}const Tt=function(){return[7,14,28,70,366]};let Dt=(()=>{class e{constructor(a,n,o,r){this.router=a,this.ds=n,this.eService=o,this.dialog=r,this.moreEvent=new v.x,this.addEvent=new v.x,this.editEvent=new v.x,this.displayedColumns=["date","cash","card","online","direct","tip","platform","total","manage"]}ngOnChanges(a){this.dsList.paginator=this.paginator}ngAfterViewInit(){this.dsList.paginator=this.paginator}loadMore(){this.moreEvent.next(!0)}gotoManage(a){let n=null;n=this.ds.formatToRequest(null!=a?this.ds.responseFormatToDate(a):new Date),null!=n&&this.dialog.open(I,{data:n,width:"90%",height:"95%"}).componentInstance.addEvent.subscribe(r=>{this.addEvent.next()})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.F0),t.Y36(g.R),t.Y36(m),t.Y36(C.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-daily-sale-list"]],viewQuery:function(n,o){if(1&n&&t.Gf(nt,5),2&n){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first)}},inputs:{dsList:"dsList",count:"count"},outputs:{moreEvent:"moreEvent",addEvent:"addEvent",editEvent:"editEvent"},features:[t.TTD],decls:40,vars:7,consts:[[1,"row","py-2"],[1,"col-1","offset-11","px-4"],["type","submit","mat-raised-button","","color","primary",1,"col-12",3,"click"],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","cash"],["mat-header-cell","","class","text-end",4,"matHeaderCellDef"],["mat-cell","","class","text-end",4,"matCellDef"],["matColumnDef","card"],["matColumnDef","online"],["matColumnDef","direct"],["matColumnDef","tip"],["matColumnDef","platform"],["matColumnDef","total"],["matColumnDef","manage"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","",3,"pageSizeOptions"],["page",""],[1,"row"],[1,"col-6"],[3,"loaded","count","loadMore"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"text-end"],["mat-cell","",1,"text-end"],["mat-mini-fab","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return o.gotoManage()}),t._uU(3,"Add"),t.qZA()()(),t.TgZ(4,"div",3)(5,"table",4),t.ynx(6,5),t.YNc(7,it,2,0,"th",6),t.YNc(8,ot,3,4,"td",7),t.BQk(),t.ynx(9,8),t.YNc(10,rt,2,0,"th",9),t.YNc(11,lt,3,4,"td",10),t.BQk(),t.ynx(12,11),t.YNc(13,st,2,0,"th",9),t.YNc(14,dt,3,4,"td",10),t.BQk(),t.ynx(15,12),t.YNc(16,ct,2,0,"th",9),t.YNc(17,mt,3,4,"td",10),t.BQk(),t.ynx(18,13),t.YNc(19,ut,2,0,"th",9),t.YNc(20,pt,3,4,"td",10),t.BQk(),t.ynx(21,14),t.YNc(22,ft,2,0,"th",9),t.YNc(23,gt,3,4,"td",10),t.BQk(),t.ynx(24,15),t.YNc(25,ht,2,0,"th",9),t.YNc(26,yt,3,4,"td",10),t.BQk(),t.ynx(27,16),t.YNc(28,vt,2,0,"th",9),t.YNc(29,_t,3,4,"td",10),t.BQk(),t.ynx(30,17),t.YNc(31,Ct,1,0,"th",9),t.YNc(32,xt,4,0,"td",10),t.BQk(),t.YNc(33,St,1,0,"tr",18),t.YNc(34,bt,1,0,"tr",19),t.qZA(),t._UZ(35,"mat-paginator",20,21),t.qZA(),t.TgZ(37,"div",22)(38,"div",23)(39,"app-pagination",24),t.NdJ("loadMore",function(){return o.loadMore()}),t.qZA()()()),2&n&&(t.xp6(5),t.Q6J("dataSource",o.dsList),t.xp6(28),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(6,Tt)),t.xp6(4),t.Q6J("loaded",o.dsList.data.length)("count",o.count))},dependencies:[et.Q,T.lW,T.nh,F.Hw,f.BZ,f.fO,f.as,f.w1,f.Dz,f.nj,f.ge,f.ev,f.XQ,f.Gk,U.NW,p.JJ,at],styles:["div.scroll[_ngcontent-%COMP%]{height:23rem;overflow-x:hidden;overflow-y:auto}"]})}return e})();const Mt=[{path:"",component:(()=>{class e{constructor(a,n,o){this.weekService=a,this.ds=n,this.dailySaleService=o,this.req=new X,this.dsList=[],this.dsSummary=new E,this.count=0}ngOnInit(){this.dataSource=new f.by(this.dsList);let a=this.ds.formatToRequest(new Date);this.weekSubscription=this.weekService.getWeek(a).subscribe(n=>{n.response?.status==M.s.success&&(this.req.pagination.pageSize=30,this.req.between=new J.a,this.req.between.from=this.ds.responseFormatToRequest(n.item?.from),this.req.between.to=this.ds.responseFormatToRequest(n.item?.to),this.getList())})}ngAfterViewInit(){}getList(){this.dailySaleSubscription=this.dailySaleService.getDailySaleList(this.req).subscribe(a=>{a?.response?.status==M.s.success&&(this.dsSummary=a.dailySaleBetweenSummary,this.dsList.push.apply(this.dsList,a?.list),this.dataSource=new f.by(this.dsList),this.count=a?.totalRecords,this.req.pagination.pageNumber+=1)})}refreshList(){this.dsList=[],this.dataSource=new f.by(this.dsList),this.req.pagination.pageNumber=1,this.getList()}onFilter(){this.dsSummary=new E,this.dsList=[],this.dataSource=new f.by(this.dsList),this.req.pagination.pageNumber=1}ngOnDestroy(){this.weekSubscription?.unsubscribe(),this.dailySaleSubscription?.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36($.F),t.Y36(g.R),t.Y36(m))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-daily-sale"]],decls:3,vars:4,consts:[[3,"req","filterEvent","loadEvent"],[3,"dsSummary"],[3,"dsList","count","moreEvent","addEvent"]],template:function(n,o){1&n&&(t.TgZ(0,"app-filter-between-date",0),t.NdJ("filterEvent",function(){return o.onFilter()})("loadEvent",function(){return o.getList()}),t.qZA(),t._UZ(1,"app-daily-sale-summary",1),t.TgZ(2,"app-daily-sale-list",2),t.NdJ("moreEvent",function(){return o.getList()})("addEvent",function(){return o.refreshList()}),t.qZA()),2&n&&(t.Q6J("req",o.req.between),t.xp6(1),t.Q6J("dsSummary",o.dsSummary),t.xp6(1),t.Q6J("dsList",o.dataSource)("count",o.count))},dependencies:[V,tt,Dt]})}return e})()},{path:"manage/:date",component:I}];let wt=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#a=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(Mt)]})}return e})();var Lt=d(1097),Zt=d(7367),At=d(2346),N=d(3238);let Vt=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[N.BQ,p.ez,N.BQ]}),e})();var Wt=d(8184);let Kt=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#a=this.\u0275inj=t.cJS({imports:[p.ez,wt,s.u5,s.UX,At.g,Lt.z,Zt.o,w.SD,x.lN,q.c,T.ot,F.Ps,S.FA,N.XK,Vt,f.p0,U.TU,C.Is,Wt.U8]})}return e})()},7114:(Z,_,d)=>{d.d(_,{Q:()=>t});var p=d(7579),l=d(4650),s=d(6895),C=d(4859);let v=(()=>{class u{constructor(m,g){this.element=m,this.renderer=g}ngOnChanges(m){this.loaded==this.total?(this.renderer.addClass(this.element.nativeElement,"text-success"),this.renderer.removeClass(this.element.nativeElement,"text-info")):(this.renderer.removeClass(this.element.nativeElement,"text-success"),this.renderer.addClass(this.element.nativeElement,"text-info"))}static#t=this.\u0275fac=function(g){return new(g||u)(l.Y36(l.SBq),l.Y36(l.Qsj))};static#e=this.\u0275dir=l.lG2({type:u,selectors:[["","appLoadedStatus",""]],inputs:{loaded:"loaded",total:"total"},features:[l.TTD]})}return u})();function A(u,L){if(1&u&&(l.TgZ(0,"label",5)(1,"span",6),l._uU(2),l.qZA(),l.TgZ(3,"span",7),l._uU(4," of "),l.qZA(),l.TgZ(5,"span",6),l._uU(6),l.qZA()()),2&u){const m=l.oxw(2);l.Q6J("loaded",m.loaded)("total",m.count),l.xp6(1),l.Q6J("ngClass",m.loaded!=m.count?"page-data":"page-data-full"),l.xp6(1),l.Oqu(m.loaded),l.xp6(3),l.Q6J("ngClass",m.loaded!=m.count?"page-data":"page-data-full"),l.xp6(1),l.Oqu(m.count)}}function D(u,L){if(1&u){const m=l.EpF();l.TgZ(0,"button",8),l.NdJ("click",function(){l.CHM(m);const b=l.oxw(2);return l.KtG(b.more())}),l._uU(1,"More ..."),l.qZA()}}function M(u,L){if(1&u&&(l.TgZ(0,"div",1),l.YNc(1,A,7,6,"label",2),l.TgZ(2,"div",3),l.YNc(3,D,2,0,"button",4),l.qZA()()),2&u){const m=l.oxw();l.xp6(1),l.Q6J("ngIf",m.loaded!=m.count),l.xp6(2),l.Q6J("ngIf",m.loaded!=m.count)}}let t=(()=>{class u{constructor(){this.loadMore=new p.x}more(){this.loadMore.next(!0)}static#t=this.\u0275fac=function(g){return new(g||u)};static#e=this.\u0275cmp=l.Xpm({type:u,selectors:[["app-pagination"]],inputs:{count:"count",loaded:"loaded"},outputs:{loadMore:"loadMore"},decls:1,vars:1,consts:[["class","row my-4",4,"ngIf"],[1,"row","my-4"],["appLoadedStatus","","class","col-4 mx-2",3,"loaded","total",4,"ngIf"],[1,"col-6"],["mat-raised-button","","color","primary","type","button","class","col-4",3,"click",4,"ngIf"],["appLoadedStatus","",1,"col-4","mx-2",3,"loaded","total"],[3,"ngClass"],[1,"page-data"],["mat-raised-button","","color","primary","type","button",1,"col-4",3,"click"]],template:function(g,b){1&g&&l.YNc(0,M,4,2,"div",0),2&g&&l.Q6J("ngIf",b.loaded>0)},dependencies:[s.mk,s.O5,C.lW,v],styles:[".page-data[_ngcontent-%COMP%]{background-color:transparent;color:var(--text-color);border-radius:10px;opacity:.3}.page-data-full[_ngcontent-%COMP%]{background-color:#009cbf;color:#fff;padding:10px;border-radius:10px}"]})}return u})()}}]);