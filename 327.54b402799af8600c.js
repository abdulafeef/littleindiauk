"use strict";(self.webpackChunklittle_india_UI_app=self.webpackChunklittle_india_UI_app||[]).push([[327],{1112:(v,h,i)=>{i.d(h,{a:()=>d});class d{constructor(f,p){this.from=f??"",this.to=p??""}}},874:(v,h,i)=>{i.d(h,{w:()=>d});class d{constructor(){this.required=!0,this.pageNumber=1,this.pageSize=20}}},8274:(v,h,i)=>{i.d(h,{S:()=>K});var d=i(673);class o{constructor(_,e){this.from=_??"",this.to=e??""}}var f=i(1112),p=i(874);class L{constructor(){this.searchKey="",this.pagination=new p.w}}class g extends L{constructor(){super(),this.between=new f.a}}class b{constructor(){this.key=""}}var t=i(8256),c=i(9057),y=i(6037);let a=(()=>{class n{constructor(e){this.http=e}getLog(e){return this.http.post(c.b.getLog,e)}clearLog(e){return this.http.post(c.b.clearLog,e)}static#t=this.\u0275fac=function(r){return new(r||n)(t.LFG(y.L))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var m=i(5659),u=i(433),x=i(7579),w=i(6895);function C(n,_){if(1&n){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.changeSearchKey(""))}),t._uU(1,"X"),t.qZA()}}let q=(()=>{class n{constructor(e){this.ds=e,this.searchEvent=new x.x,this.loadEvent=new x.x}ngOnInit(){this.initDateRange(),this.filterForm=new u.cw({between:new u.cw({from:new u.NI(this.req.between.from,[u.kI.required]),to:new u.NI(this.req.between.to,[u.kI.required])}),searchKey:new u.NI("")}),this.valueChangeSubscription=this.filterForm.valueChanges.subscribe(e=>{this.req.searchKey=this.filterForm.value.searchKey,this.req.between.from=this.filterForm.value.between.from,this.req.between.to=this.filterForm.value.between.to,this.searchEvent.next(this.req)})}formatDate(e){const r=new Date(e);let s=""+(r.getMonth()+1),l=""+r.getDate();const T=r.getFullYear();return s.length<2&&(s="0"+s),l.length<2&&(l="0"+l),[T,s,l].join("-")}ngOnChanges(e){null!=this.filterForm&&this.filterForm.patchValue({between:{from:this.req.between.from,to:this.req.between.to},searchKey:this.req.searchKey})}initDateRange(){null==this.from?""==this.req.between.from&&(this.req.between.from=this.ds.formatToRequest(this.ds.Today)):this.req.between.from=this.ds.formatToRequest(this.from),null==this.to?""==this.req.between.to&&(this.req.between.to=this.ds.formatToRequest(this.ds.Today)):this.req.between.to=this.ds.formatToRequest(this.to)}getList(){this.loadEvent.next()}changeSearchKey(e){this.filterForm.patchValue({searchKey:e})}ngOnDestroy(){this.valueChangeSubscription?.unsubscribe()}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(m.R))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-search-filter-between-date"]],inputs:{req:"req",from:"from",to:"to"},outputs:{searchEvent:"searchEvent",loadEvent:"loadEvent"},features:[t.TTD],decls:22,vars:2,consts:[[1,"row","mt-2",3,"formGroup","ngSubmit"],[1,"col-1","offset-5"],[1,"row","mt-2"],["type","button","class","col-4 offset-8 mt-4 btn btn-small btn-dark",3,"click",4,"ngIf"],[1,"col-2","form-group"],[1,"form-outline","mb-4","col-12"],[1,"form-label"],["type","text","formControlName","searchKey",1,"form-control"],["formGroupName","between",1,"col-3"],[1,"row"],[1,"form-outline","mb-4","col-6"],["type","date","formControlName","from",1,"form-control"],["type","date","formControlName","to","required","",1,"form-control"],[1,"col-1","mt-4"],["type","submit",1,"btn","btn-primary","col-12","mt-2"],["type","button",1,"col-4","offset-8","mt-4","btn","btn-small","btn-dark",3,"click"]],template:function(r,s){1&r&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return s.getList()}),t.TgZ(1,"div",1)(2,"div",2),t.YNc(3,C,2,0,"button",3),t.qZA()(),t.TgZ(4,"div",4)(5,"div",5)(6,"label",6),t._uU(7,"Search "),t.qZA(),t._UZ(8,"input",7),t.qZA()(),t.TgZ(9,"div",8)(10,"div",9)(11,"div",10)(12,"label",6),t._uU(13,"From"),t.qZA(),t._UZ(14,"input",11),t.qZA(),t.TgZ(15,"div",10)(16,"label",6),t._uU(17,"To"),t.qZA(),t._UZ(18,"input",12),t.qZA()()(),t.TgZ(19,"div",13)(20,"button",14),t._uU(21,"Load"),t.qZA()()()),2&r&&(t.Q6J("formGroup",s.filterForm),t.xp6(3),t.Q6J("ngIf",s.filterForm.value.searchKey.length>0))},dependencies:[w.O5,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.sg,u.u,u.x0]})}return n})();var Z=i(3184),E=i(7114);const S=["dotSpan"],A=["moreText"],M=["readBtn"];function F(n,_){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.TgZ(2,"span",2,3),t._uU(4,"..."),t.qZA(),t.TgZ(5,"span",2,4),t._uU(7),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.text.substring(0,e.limit)),t.xp6(1),t.MGl("id","dots",e.id,""),t.xp6(3),t.MGl("id","more",e.id,""),t.xp6(2),t.Oqu(e.text.substring(e.limit))}}function U(n,_){if(1&n){const e=t.EpF();t.TgZ(0,"button",5,6),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.read())}),t._uU(2,"Read\nmore"),t.qZA()}if(2&n){const e=t.oxw();t.MGl("id","readBtn",e.id,"")}}function R(n,_){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.text)}}let D=(()=>{class n{constructor(e){this.renderer=e,this.limit=50}read(){"none"===this.dotSpan.nativeElement.style.display?(this.renderer.setStyle(this.dotSpan.nativeElement,"display","inline"),this.renderer.setProperty(this.readBtn.nativeElement,"innerHTML","Read more"),this.renderer.setStyle(this.moreText.nativeElement,"display","none")):(this.renderer.setStyle(this.dotSpan.nativeElement,"display","none"),this.renderer.setProperty(this.readBtn.nativeElement,"innerHTML","Read less"),this.renderer.setStyle(this.moreText.nativeElement,"display","inline"))}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(t.Qsj))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-read-more-text"]],viewQuery:function(r,s){if(1&r&&(t.Gf(S,5),t.Gf(A,5),t.Gf(M,5)),2&r){let l;t.iGM(l=t.CRH())&&(s.dotSpan=l.first),t.iGM(l=t.CRH())&&(s.moreText=l.first),t.iGM(l=t.CRH())&&(s.readBtn=l.first)}},inputs:{id:"id",text:"text",limit:"limit"},decls:3,vars:3,consts:[[4,"ngIf"],["class","btn btn-sm btn-primary",3,"id","click",4,"ngIf"],[3,"id"],["dotSpan",""],["moreText",""],[1,"btn","btn-sm","btn-primary",3,"id","click"],["readBtn",""]],template:function(r,s){1&r&&(t.YNc(0,F,8,4,"p",0),t.YNc(1,U,3,1,"button",1),t.YNc(2,R,2,1,"p",0)),2&r&&(t.Q6J("ngIf",s.text.length>s.limit),t.xp6(1),t.Q6J("ngIf",s.text.length>s.limit),t.xp6(1),t.Q6J("ngIf",s.text.length<=s.limit))},dependencies:[w.O5],styles:["span[id^=more][_ngcontent-%COMP%]{display:none}"]})}return n})(),I=(()=>{class n{transform(e,r,s){return e.substring(r,s)}static#t=this.\u0275fac=function(r){return new(r||n)};static#e=this.\u0275pipe=t.Yjl({name:"substr",type:n,pure:!0})}return n})(),J=(()=>{class n{transform(e,r="."){return e.split(r).pop()??""}static#t=this.\u0275fac=function(r){return new(r||n)};static#e=this.\u0275pipe=t.Yjl({name:"splitLast",type:n,pure:!0})}return n})();function O(n,_){if(1&n&&t._UZ(0,"app-read-more-text",18),2&n){const e=t.oxw().$implicit;let r;t.Q6J("text",null!==(r=null==e?null:e.exception)&&void 0!==r?r:"")("limit",50)}}const N=function(n){return{"background-color":n}};function Q(n,_){if(1&n&&(t.TgZ(0,"div",12)(1,"div",2)(2,"div",3)(3,"label"),t._uU(4),t.ALo(5,"substr"),t.qZA()(),t.TgZ(6,"div",4)(7,"label"),t._uU(8),t.qZA()(),t.TgZ(9,"div",13),t._UZ(10,"label",14),t.TgZ(11,"label"),t._uU(12),t.ALo(13,"splitLast"),t.qZA()(),t.TgZ(14,"div",13)(15,"label"),t._uU(16),t.ALo(17,"splitLast"),t.qZA()(),t.TgZ(18,"div",15),t._UZ(19,"app-read-more-text",16),t.YNc(20,O,1,2,"app-read-more-text",17),t.qZA(),t.TgZ(21,"div",4)(22,"label"),t._uU(23),t.qZA()()()()),2&n){const e=_.$implicit,r=_.index,s=t.oxw();let l;t.xp6(4),t.Oqu(t.Dn7(5,10,e.timeStamp,0,16)),t.xp6(4),t.Oqu(e.timeStamp.substring(17,28)),t.xp6(2),t.Q6J("ngStyle",t.VKq(18,N,s.levelColor(e.level))),t.xp6(2),t.hij(" ",t.lcZ(13,14,e.heading),""),t.xp6(4),t.Oqu(t.lcZ(17,16,e.controller)),t.xp6(3),t.Q6J("id",r)("text",e.message)("limit",70),t.xp6(1),t.Q6J("ngIf",(null!==(l=null==e?null:e.exception)&&void 0!==l?l:"").length>0),t.xp6(3),t.Oqu(null==e.user?null:e.user.name)}}function P(n,_){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.clear())}),t._uU(1,"Clear"),t.qZA()}}let Y=(()=>{class n{constructor(e){this.colorService=e,this.searchEvent=new x.x,this.moreEvent=new x.x,this.clearEvent=new x.x}more(){this.moreEvent.next(!0)}clear(){this.clearEvent.next(!0)}changeSearchKey(e){this.searchEvent.next(e)}levelColor(e){return this.colorService.getLogLevelColor(e)}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(Z.A))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-log-list"]],inputs:{logList:"logList",count:"count"},outputs:{searchEvent:"searchEvent",moreEvent:"moreEvent",clearEvent:"clearEvent"},decls:28,vars:4,consts:[[1,"row","bottom-border"],[1,"col-12","t-head"],[1,"row"],[1,"col-2"],[1,"col-1"],[1,"col-4"],[1,"row","scroll","t-body"],["class","col-12 bottom-border list-data t-item",4,"ngFor","ngForOf"],[1,"col-6"],[3,"loaded","count","loadMore"],[1,"col-2","offset-4","my-4","text-end"],["type","button","class","btn btn-danger btn-sm col-4",3,"click",4,"ngIf"],[1,"col-12","bottom-border","list-data","t-item"],[1,"col-2","text-break"],[2,"width","7px","height","7px","margin-right","5px",3,"ngStyle"],[1,"col-4","px-2","text-break"],[3,"id","text","limit"],[3,"text","limit",4,"ngIf"],[3,"text","limit"],["type","button",1,"btn","btn-danger","btn-sm","col-4",3,"click"]],template:function(r,s){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h6"),t._uU(5,"Date"),t.qZA()(),t.TgZ(6,"div",4)(7,"h6"),t._uU(8,"Time"),t.qZA()(),t.TgZ(9,"div",3)(10,"h6"),t._uU(11,"Heading"),t.qZA()(),t.TgZ(12,"div",3)(13,"h6"),t._uU(14,"Controller"),t.qZA()(),t.TgZ(15,"div",5)(16,"h6"),t._uU(17,"Message"),t.qZA()(),t.TgZ(18,"div",4)(19,"h6"),t._uU(20,"User"),t.qZA()()()()(),t.TgZ(21,"div",6),t.YNc(22,Q,24,20,"div",7),t.qZA(),t.TgZ(23,"div",2)(24,"div",8)(25,"app-pagination",9),t.NdJ("loadMore",function(){return s.more()}),t.qZA()(),t.TgZ(26,"div",10),t.YNc(27,P,2,0,"button",11),t.qZA()()),2&r&&(t.xp6(22),t.Q6J("ngForOf",s.logList),t.xp6(3),t.Q6J("loaded",s.logList.length)("count",s.count),t.xp6(2),t.Q6J("ngIf",s.logList.length>0))},dependencies:[w.sg,w.O5,w.PC,E.Q,D,I,J],styles:["div.scroll[_ngcontent-%COMP%]{max-height:35rem;overflow-x:hidden;overflow-y:auto}"]})}return n})(),K=(()=>{class n{constructor(e,r){this.logService=e,this.ds=r,this.req=new g,this.logList=[],this.count=0,this.from=this.ds.Today,this.to=this.ds.Today}ngOnInit(){}ngAfterViewInit(){this.getList()}initDateRange(){var e=new Date,r=new Date(e.getFullYear(),e.getMonth(),1),s=new Date(e.getFullYear(),e.getMonth(),e.getDate());this.req.between=new o,this.req.between.from=this.ds.formatToRequest(r),this.req.between.to=this.ds.formatToRequest(s)}onSearch(e){this.logList=[],this.req.pagination.pageNumber=1}getList(){this.sub=this.logService.getLog(this.req).subscribe(e=>{e?.response?.status==d.s.success&&(this.logList.push.apply(this.logList,e?.list),this.count=e?.totalRecords,this.req.pagination.pageNumber+=1,console.log(this.logList))})}loadMore(){this.req.pagination.pageNumber+=1,this.getList()}clearLog(){if(!confirm("Are you sure to clear ?"))return;let e=new b;e.between=new o,e.between.from=this.req.between.from,e.between.to=this.req.between.to,this.sub=this.logService.clearLog(e).subscribe(r=>{r?.status==d.s.success?(this.logList=[],this.req=Object.assign({},this.req),this.req.searchKey="",this.getList()):alert(r?.message)})}changeSearchKey(e){this.req=Object.assign({},this.req),this.req.searchKey=e,this.logList=[],this.req.pagination.pageNumber=1}ngOnDestroy(){this.sub.unsubscribe()}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(a),t.Y36(m.R))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-log"]],decls:2,vars:5,consts:[[3,"req","from","to","searchEvent","loadEvent"],[3,"logList","count","moreEvent","clearEvent","searchEvent"]],template:function(r,s){1&r&&(t.TgZ(0,"app-search-filter-between-date",0),t.NdJ("searchEvent",function(T){return s.onSearch(T)})("loadEvent",function(){return s.getList()}),t.qZA(),t.TgZ(1,"app-log-list",1),t.NdJ("moreEvent",function(){return s.getList()})("clearEvent",function(){return s.clearLog()})("searchEvent",function(T){return s.changeSearchKey(T)}),t.qZA()),2&r&&(t.Q6J("req",s.req)("from",s.from)("to",s.to),t.xp6(1),t.Q6J("logList",s.logList)("count",s.count))},dependencies:[q,Y],styles:[".list-data[_ngcontent-%COMP%]{font-size:12px}"]})}return n})()},7114:(v,h,i)=>{i.d(h,{Q:()=>t});var d=i(7579),o=i(8256),f=i(6895);let p=(()=>{class c{constructor(a,m){this.element=a,this.renderer=m}ngOnChanges(a){this.loaded==this.total?(this.renderer.addClass(this.element.nativeElement,"text-success"),this.renderer.removeClass(this.element.nativeElement,"text-info")):(this.renderer.removeClass(this.element.nativeElement,"text-success"),this.renderer.addClass(this.element.nativeElement,"text-info"))}static#t=this.\u0275fac=function(m){return new(m||c)(o.Y36(o.SBq),o.Y36(o.Qsj))};static#e=this.\u0275dir=o.lG2({type:c,selectors:[["","appLoadedStatus",""]],inputs:{loaded:"loaded",total:"total"},features:[o.TTD]})}return c})();function L(c,y){if(1&c&&(o.TgZ(0,"label",5)(1,"span",6),o._uU(2),o.qZA(),o.TgZ(3,"span",7),o._uU(4," of "),o.qZA(),o.TgZ(5,"span",6),o._uU(6),o.qZA()()),2&c){const a=o.oxw(2);o.Q6J("loaded",a.loaded)("total",a.count),o.xp6(1),o.Q6J("ngClass",a.loaded!=a.count?"page-data":"page-data-full"),o.xp6(1),o.Oqu(a.loaded),o.xp6(3),o.Q6J("ngClass",a.loaded!=a.count?"page-data":"page-data-full"),o.xp6(1),o.Oqu(a.count)}}function g(c,y){if(1&c){const a=o.EpF();o.TgZ(0,"button",8),o.NdJ("click",function(){o.CHM(a);const u=o.oxw(2);return o.KtG(u.more())}),o._uU(1,"More ..."),o.qZA()}}function b(c,y){if(1&c&&(o.TgZ(0,"div",1),o.YNc(1,L,7,6,"label",2),o.TgZ(2,"div",3),o.YNc(3,g,2,0,"button",4),o.qZA()()),2&c){const a=o.oxw();o.xp6(1),o.Q6J("ngIf",a.loaded!=a.count),o.xp6(2),o.Q6J("ngIf",a.loaded!=a.count)}}let t=(()=>{class c{constructor(){this.loadMore=new d.x}more(){this.loadMore.next(!0)}static#t=this.\u0275fac=function(m){return new(m||c)};static#e=this.\u0275cmp=o.Xpm({type:c,selectors:[["app-pagination"]],inputs:{count:"count",loaded:"loaded"},outputs:{loadMore:"loadMore"},decls:1,vars:1,consts:[["class","row my-4",4,"ngIf"],[1,"row","my-4"],["appLoadedStatus","","class","col-4",3,"loaded","total",4,"ngIf"],[1,"col-6"],["type","button","class","btn btn-primary btn-sm col-4",3,"click",4,"ngIf"],["appLoadedStatus","",1,"col-4",3,"loaded","total"],[3,"ngClass"],[1,"page-data"],["type","button",1,"btn","btn-primary","btn-sm","col-4",3,"click"]],template:function(m,u){1&m&&o.YNc(0,b,4,2,"div",0),2&m&&o.Q6J("ngIf",u.loaded>0)},dependencies:[f.mk,f.O5,p],styles:[".page-data[_ngcontent-%COMP%]{background-color:transparent;color:var(--text-color);border-radius:10px;opacity:.3}.page-data-full[_ngcontent-%COMP%]{background-color:#009cbf;color:#fff;padding:10px;border-radius:10px}"]})}return c})()},2346:(v,h,i)=>{i.d(h,{g:()=>f});var d=i(6895),o=i(8256);let f=(()=>{class p{static#t=this.\u0275fac=function(b){return new(b||p)};static#e=this.\u0275mod=o.oAB({type:p});static#n=this.\u0275inj=o.cJS({imports:[d.ez]})}return p})()},3184:(v,h,i)=>{i.d(h,{A:()=>f});const d={information:"Information",warning:"Warning",debug:"Debug",error:"Error",exception:"Exception"};var o=i(8256);let f=(()=>{class p{constructor(){}getPaymentColor(g){switch(g.toLowerCase()){case"cash":return"#0068F9";case"card":return"#D730C7";case"online":return"#FF6198"}return"#0068F9"}getSaleTypeColor(g){switch(g.toLowerCase()){case"direct":return"#009997";case"tip":return"#1D6895";case"platform":return"#6167C7"}return"#F009997"}getLogLevelColor(g){switch(g.toLowerCase()){case d.information.toLowerCase():return"blue";case d.warning.toLowerCase():return"Amber";case d.debug.toLowerCase():return"blue";case d.error.toLowerCase():return"Red";case d.exception.toLowerCase():return"Amber"}return"blue"}static#t=this.\u0275fac=function(b){return new(b||p)};static#e=this.\u0275prov=o.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()}}]);